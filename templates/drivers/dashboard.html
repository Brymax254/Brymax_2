{% load static %}
{% load custom_filters %}

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>The Office Manager | Safari Adventures Kenya</title>

    <!-- Meta tags for SEO -->
    <meta name="description" content="Driver dashboard for Safari Adventures Kenya - manage tours, earnings, and schedule">
    <meta name="author" content="Safari Adventures Kenya">

    <!-- Preconnect for performance -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link rel="preconnect" href="https://cdnjs.cloudflare.com">
    <link rel="preconnect" href="https://unpkg.com">
    <link rel="preconnect" href="https://cdn.jsdelivr.net">

    <!-- Alpine.js -->
    <script defer src="https://unpkg.com/alpinejs@3.x.x/dist/cdn.min.js"></script>

    <!-- Chart.js with tree-shaking -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chartjs-plugin-datalabels@2.2.0/dist/chartjs-plugin-datalabels.min.js"></script>

    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>

    <!-- FontAwesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">

    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@400;700&family=Source+Sans+Pro:wght@400;600;700&display=swap" rel="stylesheet">

    <!-- Enhanced Modern CSS with Slate & Emerald Theme -->
<style>
    :root {
        /* Slate & Emerald Color Palette */
        --light-slate: #F8FAFC;
        --cool-gray: #F1F5F9;
        --deep-teal: #0F766E;
        --aqua-green: #2DD4BF;
        --charcoal-slate: #1E293B;
        --dark-slate: #0F172A;
        --emerald: #10B981;
        --amber: #F59E0B;
        --red: #EF4444;
        --border-divider: #E2E8F0;

        /* Extended Palette for Gradients */
        --teal-700: #0F766E;
        --teal-600: #0D9488;
        --teal-500: #14B8A6;
        --emerald-500: #10B981;
        --emerald-400: #34D399;
        --slate-800: #1E293B;
        --slate-700: #334155;
        --slate-600: #475569;
        --slate-500: #64748B;
        --slate-400: #94A3B8;
        --slate-300: #CBD5E1;
        --slate-200: #E2E8F0;
        --slate-100: #F1F5F9;
        --slate-50: #F8FAFC;

        /* Glass Effect Variables */
        --glass-bg: rgba(241, 245, 249, 0.85);
        --glass-border: rgba(255, 255, 255, 0.18);
        --glass-shadow: 0 8px 32px rgba(15, 118, 110, 0.12);
        --glass-backdrop: blur(20px) saturate(180%);

        /* Shadows & Effects */
        --card-shadow: 0 10px 25px rgba(15, 23, 42, 0.08);
        --card-shadow-hover: 0 20px 40px rgba(15, 23, 42, 0.12);
        --transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        --transition-slow: all 0.5s cubic-bezier(0.4, 0, 0.2, 1);
    }

    /* Dark Mode Variables */
    .dark {
        --light-slate: #0F172A;
        --cool-gray: #1E293B;
        --charcoal-slate: #F1F5F9;
        --dark-slate: #F8FAFC;
        --border-divider: #334155;

        --glass-bg: rgba(30, 41, 59, 0.85);
        --glass-border: rgba(255, 255, 255, 0.08);
        --glass-shadow: 0 8px 32px rgba(0, 0, 0, 0.25);

        --card-shadow: 0 10px 25px rgba(0, 0, 0, 0.2);
        --card-shadow-hover: 0 20px 40px rgba(0, 0, 0, 0.3);
    }

    * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
    }

    body {
        font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;
        background: linear-gradient(135deg, var(--light-slate) 0%, var(--cool-gray) 100%);
        min-height: 100vh;
        color: var(--charcoal-slate);
        line-height: 1.6;
        font-weight: 400;
        overflow-x: hidden;
    }

    .dark body {
        background: linear-gradient(135deg, var(--dark-slate) 0%, var(--charcoal-slate) 100%);
        color: var(--light-slate);
    }

    h1, h2, h3, h4, h5, h6 {
        font-family: 'Space Grotesk', sans-serif;
        font-weight: 600;
        letter-spacing: -0.025em;
        color: var(--dark-slate);
    }

    .dark h1, .dark h2, .dark h3, .dark h4, .dark h5, .dark h6 {
        color: var(--light-slate);
    }

    /* Enhanced Glass Effect */
    .glass {
        background: var(--glass-bg);
        backdrop-filter: var(--glass-backdrop);
        border-radius: 1.25rem;
        border: 1px solid var(--glass-border);
        box-shadow: var(--glass-shadow);
        transition: var(--transition);
        position: relative;
        overflow: hidden;
    }

    .glass::before {
        content: '';
        position: absolute;
        top: 0;
        left: 0;
        right: 0;
        height: 1px;
        background: linear-gradient(90deg, transparent, var(--aqua-green), transparent);
        opacity: 0.6;
    }

    .glass:hover {
        transform: translateY(-4px);
        box-shadow: var(--card-shadow-hover);
        border-color: rgba(45, 212, 191, 0.3);
    }

    /* Premium Stat Cards */
    .stat-card {
        position: relative;
        overflow: hidden;
        padding: 2.5rem 2rem;
        text-align: center;
        color: var(--dark-slate);
        border-radius: 1.25rem;
        box-shadow: var(--card-shadow);
        transition: var(--transition);
        border: 1px solid var(--border-divider);
        background: linear-gradient(135deg, var(--light-slate) 0%, var(--cool-gray) 100%);
    }

    .dark .stat-card {
        color: var(--light-slate);
        background: linear-gradient(135deg, var(--slate-800) 0%, var(--slate-700) 100%);
        border-color: var(--slate-600);
    }

    .stat-card::before {
        content: "";
        position: absolute;
        inset: 0;
        background: linear-gradient(135deg, var(--deep-teal) 0%, var(--aqua-green) 100%);
        opacity: 0.05;
        z-index: 0;
    }

    .stat-card .overlay {
        position: relative;
        z-index: 1;
    }

    /* Enhanced Sidebar */
    .sidebar {
        background: linear-gradient(180deg, var(--light-slate) 0%, var(--cool-gray) 100%);
        border-right: 1px solid var(--border-divider);
        backdrop-filter: var(--glass-backdrop);
        box-shadow: 4px 0 20px rgba(15, 118, 110, 0.08);
    }

    .dark .sidebar {
        background: linear-gradient(180deg, var(--slate-800) 0%, var(--slate-700) 100%);
        border-right-color: var(--slate-600);
        box-shadow: 4px 0 20px rgba(0, 0, 0, 0.3);
    }

    /* Premium Navigation */
    .nav-link {
        display: flex;
        align-items: center;
        gap: 1rem;
        padding: 1rem 1.5rem;
        border-radius: 0.875rem;
        color: var(--slate-600);
        font-weight: 500;
        transition: var(--transition);
        position: relative;
        overflow: hidden;
        margin: 0.25rem 0;
        border: 1px solid transparent;
    }

    .dark .nav-link {
        color: var(--slate-300);
    }

    .nav-link::before {
        content: "";
        position: absolute;
        top: 0;
        left: 0;
        width: 4px;
        height: 100%;
        background: var(--aqua-green);
        transform: translateX(-100%);
        transition: transform 0.3s ease;
        border-radius: 0 2px 2px 0;
    }

    .nav-link:hover {
        background: rgba(45, 212, 191, 0.08);
        transform: translateX(8px);
        color: var(--deep-teal);
        border-color: rgba(45, 212, 191, 0.2);
    }

    .dark .nav-link:hover {
        background: rgba(45, 212, 191, 0.12);
        color: var(--aqua-green);
    }

    .nav-link:hover::before {
        transform: translateX(0);
    }

    .nav-link.active {
        background: linear-gradient(135deg, rgba(15, 118, 110, 0.1) 0%, rgba(45, 212, 191, 0.05) 100%);
        color: var(--deep-teal);
        border-color: rgba(15, 118, 110, 0.2);
        box-shadow: 0 4px 12px rgba(15, 118, 110, 0.15);
    }

    .dark .nav-link.active {
        background: linear-gradient(135deg, rgba(15, 118, 110, 0.2) 0%, rgba(45, 212, 191, 0.1) 100%);
        color: var(--aqua-green);
        border-color: rgba(45, 212, 191, 0.3);
    }

    [x-cloak] {
        display: none !important;
    }

    /* Enhanced Buttons */
    .btn-primary {
        background: linear-gradient(135deg, var(--deep-teal) 0%, var(--aqua-green) 100%);
        color: white;
        padding: 1rem 2rem;
        border-radius: 0.75rem;
        font-weight: 600;
        transition: var(--transition);
        box-shadow: 0 4px 15px rgba(15, 118, 110, 0.3);
        border: none;
        cursor: pointer;
        position: relative;
        overflow: hidden;
    }

    .btn-primary::before {
        content: '';
        position: absolute;
        top: 0;
        left: -100%;
        width: 100%;
        height: 100%;
        background: linear-gradient(90deg, transparent, rgba(255,255,255,0.2), transparent);
        transition: left 0.5s;
    }

    .btn-primary:hover {
        transform: translateY(-2px);
        box-shadow: 0 8px 25px rgba(15, 118, 110, 0.4);
    }

    .btn-primary:hover::before {
        left: 100%;
    }

    .classic-border {
        border: 2px solid var(--aqua-green);
        border-radius: 0.75rem;
    }

    .text-accent {
        color: var(--aqua-green);
    }

    .bg-accent {
        background-color: var(--aqua-green);
    }

    .bg-cream {
        background-color: var(--light-slate);
    }

    .dark .bg-cream {
        background-color: var(--slate-800);
    }

    /* Premium Table Styles */
    .data-table {
        width: 100%;
        border-collapse: separate;
        border-spacing: 0;
        background: var(--light-slate);
        border-radius: 1rem;
        overflow: hidden;
        box-shadow: var(--card-shadow);
    }

    .dark .data-table {
        background: var(--slate-800);
    }

    .data-table th {
        background: linear-gradient(135deg, var(--deep-teal) 0%, var(--aqua-green) 100%);
        color: white;
        padding: 1.25rem;
        text-align: left;
        font-weight: 600;
        font-size: 0.875rem;
        text-transform: uppercase;
        letter-spacing: 0.05em;
        border-bottom: 1px solid var(--border-divider);
    }

    .data-table td {
        padding: 1.25rem;
        border-bottom: 1px solid var(--border-divider);
        color: var(--charcoal-slate);
        transition: var(--transition);
    }

    .dark .data-table td {
        color: var(--slate-200);
        border-bottom-color: var(--slate-600);
    }

    .data-table tr {
        transition: var(--transition);
    }

    .data-table tr:hover {
        background: rgba(45, 212, 191, 0.05);
        transform: translateX(4px);
    }

    .dark .data-table tr:hover {
        background: rgba(45, 212, 191, 0.08);
    }

    .action-btn {
        padding: 0.5rem 1rem;
        border-radius: 0.5rem;
        font-size: 0.875rem;
        margin-right: 0.5rem;
        cursor: pointer;
        transition: var(--transition);
        border: none;
        font-weight: 500;
    }

    .view-btn {
        background: linear-gradient(135deg, var(--deep-teal) 0%, var(--aqua-green) 100%);
        color: white;
    }

    .edit-btn {
        background: linear-gradient(135deg, var(--amber) 0%, #FBBF24 100%);
        color: var(--dark-slate);
    }

    .delete-btn {
        background: linear-gradient(135deg, var(--red) 0%, #F87171 100%);
        color: white;
    }

    .status-badge {
        padding: 0.5rem 1rem;
        border-radius: 1.5rem;
        font-size: 0.75rem;
        font-weight: 600;
        display: inline-block;
        text-transform: uppercase;
        letter-spacing: 0.05em;
    }

    .status-active {
        background: rgba(16, 185, 129, 0.15);
        color: var(--emerald);
        border: 1px solid rgba(16, 185, 129, 0.3);
    }

    .status-pending {
        background: rgba(245, 158, 11, 0.15);
        color: var(--amber);
        border: 1px solid rgba(245, 158, 11, 0.3);
    }

    .status-inactive {
        background: rgba(239, 68, 68, 0.15);
        color: var(--red);
        border: 1px solid rgba(239, 68, 68, 0.3);
    }

    /* Premium Form Styles */
    .form-container {
        max-width: 100%;
        padding: 0;
    }

    .form-header {
        background: linear-gradient(135deg, var(--deep-teal) 0%, var(--aqua-green) 100%);
        color: white;
        padding: 3rem;
        border-radius: 1.5rem 1.5rem 0 0;
        text-align: center;
        position: relative;
        overflow: hidden;
    }

    .form-header::before {
        content: "";
        position: absolute;
        top: -50%;
        left: -50%;
        width: 200%;
        height: 200%;
        background: radial-gradient(circle, rgba(255,255,255,0.15) 0%, rgba(255,255,255,0) 70%);
        animation: pulse 4s infinite ease-in-out;
    }

    @keyframes pulse {
        0%, 100% {
            transform: scale(1);
            opacity: 0.5;
        }
        50% {
            transform: scale(1.1);
            opacity: 0.3;
        }
    }

    .form-header h1 {
        font-size: 2.25rem;
        font-weight: 700;
        margin-bottom: 0.5rem;
        position: relative;
        z-index: 1;
        color: white;
    }

    .section-card {
        border: 1px solid var(--border-divider);
        border-radius: 1rem;
        box-shadow: var(--card-shadow);
        margin-bottom: 1.5rem;
        overflow: hidden;
        transition: var(--transition);
        background: var(--light-slate);
    }

    .dark .section-card {
        background: var(--slate-800);
        border-color: var(--slate-600);
    }

    .section-card:hover {
        transform: translateY(-3px);
        box-shadow: var(--card-shadow-hover);
        border-color: var(--aqua-green);
    }

    .section-header {
        padding: 1.5rem;
        font-weight: 600;
        display: flex;
        align-items: center;
        gap: 1rem;
        border-bottom: 1px solid var(--border-divider);
        background: linear-gradient(135deg, rgba(15, 118, 110, 0.05) 0%, rgba(45, 212, 191, 0.03) 100%);
    }

    .dark .section-header {
        background: linear-gradient(135deg, rgba(15, 118, 110, 0.1) 0%, rgba(45, 212, 191, 0.05) 100%);
        border-bottom-color: var(--slate-600);
    }

    .section-header i {
        font-size: 1.5rem;
        width: 3rem;
        height: 3rem;
        display: flex;
        align-items: center;
        justify-content: center;
        border-radius: 0.75rem;
        color: white;
        background: linear-gradient(135deg, var(--deep-teal) 0%, var(--aqua-green) 100%);
    }

    .section-title {
        font-size: 1.25rem;
        font-weight: 700;
        color: var(--dark-slate);
    }

    .dark .section-title {
        color: var(--light-slate);
    }

    .section-body {
        padding: 1.5rem;
    }

    .form-label {
        font-weight: 600;
        color: var(--dark-slate);
        margin-bottom: 0.75rem;
        display: block;
        font-size: 0.875rem;
    }

    .dark .form-label {
        color: var(--light-slate);
    }

    .form-control, .form-select {
        background: var(--light-slate);
        border: 1px solid var(--border-divider);
        border-radius: 0.75rem;
        padding: 0.875rem 1rem;
        transition: var(--transition);
        width: 100%;
        font-size: 0.875rem;
        color: var(--charcoal-slate);
        box-shadow: 0 2px 4px rgba(15, 23, 42, 0.05);
    }

    .dark .form-control, .dark .form-select {
        background: var(--slate-700);
        border-color: var(--slate-600);
        color: var(--light-slate);
        box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);
    }

    .form-control:focus, .form-select:focus {
        border-color: var(--aqua-green);
        box-shadow: 0 0 0 3px rgba(45, 212, 191, 0.15);
        outline: none;
        background: var(--light-slate);
        transform: translateY(-1px);
    }

    .dark .form-control:focus, .dark .form-select:focus {
        background: var(--slate-600);
        box-shadow: 0 0 0 3px rgba(45, 212, 191, 0.25);
    }

    .form-control::placeholder {
        color: var(--slate-400);
    }

    textarea.form-control {
        min-height: 120px;
        resize: vertical;
        line-height: 1.5;
    }

    .form-check {
        display: flex;
        align-items: center;
        gap: 0.75rem;
        margin-bottom: 1rem;
    }

    .form-check-input {
        width: 1.25rem;
        height: 1.25rem;
        cursor: pointer;
        background: var(--light-slate);
        border: 1px solid var(--border-divider);
        border-radius: 0.375rem;
        transition: var(--transition);
        position: relative;
    }

    .dark .form-check-input {
        background: var(--slate-700);
        border-color: var(--slate-600);
    }

    .form-check-input:checked {
        background-color: var(--emerald);
        border-color: var(--emerald);
    }

    .form-check-input:checked::before {
        content: "✓";
        position: absolute;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        color: white;
        font-size: 0.75rem;
        font-weight: bold;
    }

    .form-check-label {
        cursor: pointer;
        font-weight: 500;
        font-size: 0.875rem;
        color: var(--charcoal-slate);
    }

    .dark .form-check-label {
        color: var(--light-slate);
    }

    .submit-btn {
        background: linear-gradient(135deg, var(--emerald) 0%, var(--aqua-green) 100%);
        color: white;
        border: none;
        padding: 1rem 2.5rem;
        font-size: 1rem;
        font-weight: 600;
        border-radius: 2rem;
        box-shadow: 0 4px 15px rgba(16, 185, 129, 0.35);
        transition: var(--transition);
        display: flex;
        align-items: center;
        gap: 0.75rem;
        margin: 2rem auto 0;
        cursor: pointer;
        position: relative;
        overflow: hidden;
    }

    .submit-btn:hover {
        transform: translateY(-2px);
        box-shadow: 0 8px 25px rgba(16, 185, 129, 0.45);
    }

    .json-field {
        position: relative;
    }

    .json-field .form-control {
        font-family: 'JetBrains Mono', 'Courier New', monospace;
        font-size: 0.8rem;
        background: var(--slate-50);
    }

    .dark .json-field .form-control {
        background: var(--slate-700);
    }

    .json-hint {
        font-size: 0.75rem;
        color: var(--slate-500);
        margin-top: 0.5rem;
        font-style: italic;
    }

    .dark .json-hint {
        color: var(--slate-400);
    }

    .image-upload {
        position: relative;
    }

    .image-upload .form-control {
        padding-left: 3rem;
    }

    .image-upload::before {
        content: "\f03e";
        font-family: "Font Awesome 5 Free";
        font-weight: 900;
        position: absolute;
        left: 1rem;
        top: 50%;
        transform: translateY(-50%);
        color: var(--slate-400);
        z-index: 2;
    }

    .form-row {
        display: flex;
        gap: 1.5rem;
        margin-bottom: 1.5rem;
    }

    .form-row .form-group {
        flex: 1;
    }

    .modal-body {
        max-height: 75vh;
        overflow-y: auto;
        padding: 0;
        background: linear-gradient(180deg, var(--light-slate) 0%, var(--cool-gray) 100%);
    }

    .dark .modal-body {
        background: linear-gradient(180deg, var(--slate-800) 0%, var(--slate-700) 100%);
    }

    .modal-body::-webkit-scrollbar {
        width: 8px;
    }

    .modal-body::-webkit-scrollbar-track {
        background: rgba(15, 118, 110, 0.05);
        border-radius: 4px;
    }

    .dark .modal-body::-webkit-scrollbar-track {
        background: rgba(255, 255, 255, 0.05);
    }

    .modal-body::-webkit-scrollbar-thumb {
        background: var(--aqua-green);
        border-radius: 4px;
    }

    .modal-body::-webkit-scrollbar-thumb:hover {
        background: var(--emerald);
    }

    .loading-spinner {
        display: inline-block;
        width: 2rem;
        height: 2rem;
        border: 3px solid rgba(15, 118, 110, 0.2);
        border-radius: 50%;
        border-top-color: var(--deep-teal);
        animation: spin 1s ease-in-out infinite;
    }

    .dark .loading-spinner {
        border: 3px solid rgba(255, 255, 255, 0.2);
        border-top-color: var(--aqua-green);
    }

    @keyframes spin {
        to {
            transform: rotate(360deg);
        }
    }

    /* Enhanced Notifications */
    .notification {
        position: fixed;
        top: 6rem;
        right: 1.5rem;
        padding: 1.25rem 1.75rem;
        border-radius: 1rem;
        color: white;
        font-weight: 500;
        z-index: 1000;
        animation: slideIn 0.3s ease-out;
        box-shadow: var(--card-shadow-hover);
        backdrop-filter: var(--glass-backdrop);
        border: 1px solid rgba(255, 255, 255, 0.1);
        max-width: 400px;
    }

    @keyframes slideIn {
        from {
            transform: translateX(100%);
            opacity: 0;
        }
        to {
            transform: translateX(0);
            opacity: 1;
        }
    }

    .notification.success {
        background: linear-gradient(135deg, var(--emerald) 0%, #059669 100%);
    }

    .notification.error {
        background: linear-gradient(135deg, var(--red) 0%, #DC2626 100%);
    }

    .notification.warning {
        background: linear-gradient(135deg, var(--amber) 0%, #D97706 100%);
    }

    .notification.info {
        background: linear-gradient(135deg, var(--deep-teal) 0%, var(--aqua-green) 100%);
    }

    /* Premium Toggle Switch */
    .toggle-switch {
        position: relative;
        display: inline-block;
        width: 60px;
        height: 32px;
    }

    .toggle-switch input {
        opacity: 0;
        width: 0;
        height: 0;
    }

    .toggle-slider {
        position: absolute;
        cursor: pointer;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        background: var(--slate-300);
        transition: .4s;
        border-radius: 32px;
        border: 1px solid var(--border-divider);
    }

    .dark .toggle-slider {
        background: var(--slate-600);
    }

    .toggle-slider:before {
        position: absolute;
        content: "";
        height: 24px;
        width: 24px;
        left: 4px;
        bottom: 3px;
        background: white;
        transition: .4s;
        border-radius: 50%;
        box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);
    }

    input:checked + .toggle-slider {
        background: var(--aqua-green);
    }

    input:checked + .toggle-slider:before {
        transform: translateX(28px);
    }

    .optional-section {
        opacity: 0.7;
        transition: opacity 0.3s ease;
    }

    .optional-section.active {
        opacity: 1;
    }

    .refresh-indicator {
        position: absolute;
        top: 1rem;
        right: 1rem;
        width: 1rem;
        height: 1rem;
        border-radius: 50%;
        background-color: var(--emerald);
        animation: pulse 2s infinite;
        box-shadow: 0 0 0 0 rgba(16, 185, 129, 0.7);
    }

    /* Enhanced Payment Status Cards */
    .payment-status-card {
        position: relative;
        overflow: hidden;
        border-radius: 1rem;
        padding: 2rem;
        margin-bottom: 1.5rem;
        transition: var(--transition);
        color: white;
        border: 1px solid rgba(255, 255, 255, 0.1);
    }

    .payment-status-card:hover {
        transform: translateY(-5px);
        box-shadow: var(--card-shadow-hover);
    }

    .payment-status-card.success {
        background: linear-gradient(135deg, var(--emerald) 0%, #059669 100%);
    }

    .payment-status-card.pending {
        background: linear-gradient(135deg, var(--amber) 0%, #D97706 100%);
    }

    .payment-status-card.failed {
        background: linear-gradient(135deg, var(--red) 0%, #DC2626 100%);
    }

    .customer-avatar {
        width: 3rem;
        height: 3rem;
        border-radius: 50%;
        object-fit: cover;
        border: 2px solid var(--aqua-green);
        box-shadow: 0 4px 8px rgba(15, 118, 110, 0.2);
    }

    .tab-active {
        border-bottom: 3px solid var(--aqua-green);
        color: var(--deep-teal);
        font-weight: 600;
    }

    .dark .tab-active {
        color: var(--aqua-green);
    }

    .auto-refresh {
        position: fixed;
        bottom: 2rem;
        right: 2rem;
        background: linear-gradient(135deg, var(--deep-teal) 0%, var(--aqua-green) 100%);
        color: white;
        width: 4rem;
        height: 4rem;
        border-radius: 50%;
        display: flex;
        align-items: center;
        justify-content: center;
        box-shadow: 0 8px 25px rgba(15, 118, 110, 0.4);
        cursor: pointer;
        transition: var(--transition);
        z-index: 40;
        border: 2px solid rgba(255, 255, 255, 0.2);
    }

    .auto-refresh:hover {
        transform: scale(1.1) rotate(15deg);
        box-shadow: 0 12px 30px rgba(15, 118, 110, 0.5);
    }

    .auto-refresh.rotating i {
        animation: spin 1s linear infinite;
    }

    .search-box {
        position: relative;
    }

    .search-box input {
        padding-left: 3rem;
        background: var(--light-slate);
        border: 1px solid var(--border-divider);
        border-radius: 0.75rem;
        color: var(--charcoal-slate);
        transition: var(--transition);
    }

    .dark .search-box input {
        background: var(--slate-700);
        border-color: var(--slate-600);
        color: var(--light-slate);
    }

    .search-box::before {
        content: "\f002";
        font-family: "Font Awesome 5 Free";
        font-weight: 900;
        position: absolute;
        left: 1rem;
        top: 50%;
        transform: translateY(-50%);
        color: var(--slate-400);
        z-index: 2;
    }

    .filter-section {
        display: flex;
        gap: 1rem;
        margin-bottom: 1.5rem;
        flex-wrap: wrap;
    }

    .filter-section select, .filter-section input {
        padding: 0.75rem;
        border-radius: 0.75rem;
        background: var(--light-slate);
        border: 1px solid var(--border-divider);
        color: var(--charcoal-slate);
        transition: var(--transition);
    }

    .dark .filter-section select, .dark .filter-section input {
        background: var(--slate-700);
        border-color: var(--slate-600);
        color: var(--light-slate);
    }

    .filter-section select:focus, .filter-section input:focus {
        border-color: var(--aqua-green);
        box-shadow: 0 0 0 3px rgba(45, 212, 191, 0.15);
        outline: none;
    }

    .pagination {
        display: flex;
        justify-content: center;
        gap: 0.5rem;
        margin-top: 2rem;
    }

    .pagination button {
        padding: 0.75rem 1rem;
        border-radius: 0.75rem;
        background: var(--light-slate);
        border: 1px solid var(--border-divider);
        color: var(--charcoal-slate);
        cursor: pointer;
        transition: var(--transition);
        font-weight: 500;
    }

    .dark .pagination button {
        background: var(--slate-700);
        border-color: var(--slate-600);
        color: var(--light-slate);
    }

    .pagination button:hover {
        background: rgba(45, 212, 191, 0.1);
        border-color: var(--aqua-green);
        transform: translateY(-1px);
    }

    .pagination button.active {
        background: linear-gradient(135deg, var(--deep-teal) 0%, var(--aqua-green) 100%);
        color: white;
        border-color: transparent;
    }

    .pagination button:disabled {
        opacity: 0.5;
        cursor: not-allowed;
        transform: none;
    }

    .empty-state {
        text-align: center;
        padding: 4rem 2rem;
        color: var(--slate-500);
        background: var(--light-slate);
        border-radius: 1rem;
        border: 2px dashed var(--border-divider);
    }

    .dark .empty-state {
        color: var(--slate-400);
        background: var(--slate-800);
        border-color: var(--slate-600);
    }

    .empty-state i {
        font-size: 4rem;
        margin-bottom: 1.5rem;
        color: var(--slate-300);
        opacity: 0.5;
    }

    .dark .empty-state i {
        color: var(--slate-500);
    }

    /* Responsive Design - Enhanced */
    @media (max-width: 1024px) {
        .sidebar {
            transform: translateX(-100%);
            transition: transform 0.3s ease;
            z-index: 50;
            width: 280px;
            box-shadow: 8px 0 30px rgba(15, 23, 42, 0.15);
        }

        .dark .sidebar {
            box-shadow: 8px 0 30px rgba(0, 0, 0, 0.4);
        }

        .sidebar.open {
            transform: translateX(0);
        }

        main {
            margin-left: 0;
        }

        .mobile-menu-btn {
            display: block;
        }

        .stat-card {
            padding: 2rem 1.5rem;
        }

        .form-row {
            flex-direction: column;
            gap: 1rem;
        }
    }

    @media (min-width: 1025px) {
        .mobile-menu-btn {
            display: none;
        }
    }

    @media (max-width: 768px) {
        .glass {
            margin: 0.5rem;
            border-radius: 1rem;
        }

        .stat-card {
            padding: 1.5rem 1rem;
        }

        .section-header {
            padding: 1.25rem;
        }

        .section-body {
            padding: 1.25rem;
        }

        .data-table {
            font-size: 0.875rem;
        }

        .data-table th,
        .data-table td {
            padding: 1rem 0.75rem;
        }

        .filter-section {
            flex-direction: column;
        }

        .pagination {
            flex-wrap: wrap;
        }
    }

    @media (max-width: 480px) {
        .notification {
            right: 0.5rem;
            left: 0.5rem;
            max-width: none;
        }

        .auto-refresh {
            bottom: 1rem;
            right: 1rem;
            width: 3.5rem;
            height: 3.5rem;
        }
    }

    /* Loading Skeleton - Enhanced */
    .skeleton {
        background: linear-gradient(90deg,
            rgba(15, 118, 110, 0.05) 25%,
            rgba(45, 212, 191, 0.1) 50%,
            rgba(15, 118, 110, 0.05) 75%);
        background-size: 200% 100%;
        animation: loading 1.5s infinite;
        border-radius: 0.5rem;
    }

    .dark .skeleton {
        background: linear-gradient(90deg,
            rgba(255, 255, 255, 0.05) 25%,
            rgba(45, 212, 191, 0.1) 50%,
            rgba(255, 255, 255, 0.05) 75%);
        background-size: 200% 100%;
    }

    @keyframes loading {
        0% {
            background-position: 200% 0;
        }
        100% {
            background-position: -200% 0;
        }
    }

    .skeleton-text {
        height: 1rem;
        margin-bottom: 0.75rem;
        border-radius: 0.25rem;
    }

    .skeleton-title {
        height: 1.5rem;
        margin-bottom: 1rem;
        border-radius: 0.25rem;
        width: 60%;
    }

    .skeleton-avatar {
        width: 3rem;
        height: 3rem;
        border-radius: 50%;
        margin-bottom: 1rem;
    }

    /* Chart Container - Enhanced */
    .chart-container {
        position: relative;
        height: 350px;
        width: 100%;
        background: var(--light-slate);
        border-radius: 1rem;
        padding: 1.5rem;
        border: 1px solid var(--border-divider);
        box-shadow: var(--card-shadow);
    }

    .dark .chart-container {
        background: var(--slate-800);
        border-color: var(--slate-600);
    }

    /* Mobile Menu Button - Enhanced */
    .mobile-menu-btn {
        position: fixed;
        bottom: 2rem;
        left: 2rem;
        background: linear-gradient(135deg, var(--deep-teal) 0%, var(--aqua-green) 100%);
        color: white;
        width: 4rem;
        height: 4rem;
        border-radius: 50%;
        display: flex;
        align-items: center;
        justify-content: center;
        box-shadow: 0 8px 25px rgba(15, 118, 110, 0.4);
        cursor: pointer;
        transition: var(--transition);
        z-index: 40;
        border: 2px solid rgba(255, 255, 255, 0.2);
    }

    .mobile-menu-btn:hover {
        transform: scale(1.1);
        box-shadow: 0 12px 30px rgba(15, 118, 110, 0.5);
    }

    /* Enhanced Tour Wizard Styles */
    .wizard-step {
        display: none;
        opacity: 0;
        transform: translateY(20px);
        transition: all 0.5s ease-in-out;
    }

    .wizard-step.active {
        display: block;
        opacity: 1;
        transform: translateY(0);
    }

    .wizard-progress {
        display: flex;
        justify-content: space-between;
        margin-bottom: 3rem;
        position: relative;
    }

    .wizard-progress::before {
        content: '';
        position: absolute;
        top: 1rem;
        left: 0;
        right: 0;
        height: 2px;
        background: var(--border-divider);
        z-index: 1;
    }

    .dark .wizard-progress::before {
        background: var(--slate-600);
    }

    .wizard-step-indicator {
        flex: 1;
        text-align: center;
        position: relative;
        z-index: 2;
    }

    .wizard-step-indicator span {
        display: inline-flex;
        width: 2.5rem;
        height: 2.5rem;
        border-radius: 50%;
        background: var(--light-slate);
        border: 2px solid var(--border-divider);
        color: var(--slate-500);
        align-items: center;
        justify-content: center;
        font-weight: 600;
        transition: var(--transition);
        position: relative;
        z-index: 2;
    }

    .dark .wizard-step-indicator span {
        background: var(--slate-700);
        border-color: var(--slate-600);
        color: var(--slate-400);
    }

    .wizard-step-indicator.active span {
        background: linear-gradient(135deg, var(--deep-teal) 0%, var(--aqua-green) 100%);
        border-color: transparent;
        color: white;
        transform: scale(1.1);
        box-shadow: 0 4px 12px rgba(15, 118, 110, 0.3);
    }

    .wizard-step-indicator.completed span {
        background: var(--emerald);
        border-color: transparent;
        color: white;
    }

    .wizard-step-indicator.completed span::after {
        content: '\f00c';
        font-family: "Font Awesome 5 Free";
        font-weight: 900;
    }

    /* Enhanced Bulk Actions */
    .bulk-actions {
        display: flex;
        gap: 0.75rem;
        margin-bottom: 1.5rem;
        flex-wrap: wrap;
    }

    .bulk-actions button {
        padding: 0.75rem 1.25rem;
        border-radius: 0.75rem;
        background: var(--light-slate);
        border: 1px solid var(--border-divider);
        color: var(--charcoal-slate);
        cursor: pointer;
        transition: var(--transition);
        font-weight: 500;
        display: flex;
        align-items: center;
        gap: 0.5rem;
    }

    .dark .bulk-actions button {
        background: var(--slate-700);
        border-color: var(--slate-600);
        color: var(--light-slate);
    }

    .bulk-actions button:hover {
        transform: translateY(-1px);
        box-shadow: var(--card-shadow);
    }

    /* Enhanced Export Button */
    .export-btn {
        display: flex;
        align-items: center;
        gap: 0.75rem;
        padding: 0.75rem 1.25rem;
        border-radius: 0.75rem;
        background: var(--light-slate);
        border: 1px solid var(--border-divider);
        color: var(--charcoal-slate);
        cursor: pointer;
        transition: var(--transition);
        font-weight: 500;
    }

    .dark .export-btn {
        background: var(--slate-700);
        border-color: var(--slate-600);
        color: var(--light-slate);
    }

    .export-btn:hover {
        background: rgba(45, 212, 191, 0.1);
        border-color: var(--aqua-green);
        color: var(--deep-teal);
        transform: translateY(-1px);
    }

    .dark .export-btn:hover {
        color: var(--aqua-green);
    }

    /* Enhanced Date Range Picker */
    .date-range-picker {
        display: flex;
        gap: 0.75rem;
        align-items: center;
        flex-wrap: wrap;
    }

    .date-range-picker input {
        padding: 0.75rem;
        border-radius: 0.75rem;
        background: var(--light-slate);
        border: 1px solid var(--border-divider);
        color: var(--charcoal-slate);
        transition: var(--transition);
    }

    .dark .date-range-picker input {
        background: var(--slate-700);
        border-color: var(--slate-600);
        color: var(--light-slate);
    }

    .date-range-picker input:focus {
        border-color: var(--aqua-green);
        box-shadow: 0 0 0 3px rgba(45, 212, 191, 0.15);
        outline: none;
    }

    /* Premium Tour Card */
    .tour-card {
        background: var(--light-slate);
        border: 1px solid var(--border-divider);
        border-radius: 1.25rem;
        overflow: hidden;
        transition: var(--transition);
        height: 100%;
        display: flex;
        flex-direction: column;
        box-shadow: var(--card-shadow);
        position: relative;
    }

    .dark .tour-card {
        background: var(--slate-800);
        border-color: var(--slate-600);
    }

    .tour-card:hover {
        transform: translateY(-8px);
        box-shadow: var(--card-shadow-hover);
        border-color: var(--aqua-green);
    }

    .tour-card-image {
        height: 240px;
        background-size: cover;
        background-position: center;
        position: relative;
        transition: transform 0.3s ease;
    }

    .tour-card:hover .tour-card-image {
        transform: scale(1.05);
    }

    .tour-card-badge {
        position: absolute;
        top: 1rem;
        right: 1rem;
        padding: 0.5rem 1rem;
        border-radius: 1.5rem;
        font-size: 0.75rem;
        font-weight: 600;
        text-transform: uppercase;
        letter-spacing: 0.05em;
        backdrop-filter: blur(10px);
        border: 1px solid rgba(255, 255, 255, 0.2);
    }

    .tour-card-content {
        padding: 2rem;
        flex: 1;
        display: flex;
        flex-direction: column;
        gap: 1rem;
    }

    .tour-card-title {
        font-size: 1.5rem;
        font-weight: 700;
        color: var(--dark-slate);
        line-height: 1.3;
    }

    .dark .tour-card-title {
        color: var(--light-slate);
    }

    .tour-card-description {
        color: var(--slate-600);
        line-height: 1.6;
        flex: 1;
    }

    .dark .tour-card-description {
        color: var(--slate-400);
    }

    .tour-card-footer {
        display: flex;
        justify-content: space-between;
        align-items: center;
        padding-top: 1rem;
        border-top: 1px solid var(--border-divider);
    }

    .dark .tour-card-footer {
        border-top-color: var(--slate-600);
    }

    .tour-card-price {
        font-size: 1.5rem;
        font-weight: 700;
        color: var(--deep-teal);
    }

    .dark .tour-card-price {
        color: var(--aqua-green);
    }

    .tour-card-actions {
        display: flex;
        gap: 0.5rem;
    }

    /* Enhanced Responsive Grid */
    .responsive-grid {
        display: grid;
        grid-template-columns: repeat(auto-fill, minmax(340px, 1fr));
        gap: 2rem;
    }

    @media (max-width: 768px) {
        .responsive-grid {
            grid-template-columns: 1fr;
            gap: 1.5rem;
        }
    }

    /* Premium Section Headers */
    .section-header-premium {
        background: linear-gradient(135deg, var(--light-slate) 0%, var(--cool-gray) 100%);
        padding: 2rem;
        border-radius: 1.25rem;
        margin-bottom: 2rem;
        border: 1px solid var(--border-divider);
        box-shadow: var(--card-shadow);
        position: relative;
        overflow: hidden;
    }

    .dark .section-header-premium {
        background: linear-gradient(135deg, var(--slate-800) 0%, var(--slate-700) 100%);
        border-color: var(--slate-600);
    }

    .section-header-premium::before {
        content: '';
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 4px;
        background: linear-gradient(90deg, var(--deep-teal), var(--aqua-green));
    }

    /* Enhanced Form Groups */
    .form-group-enhanced {
        background: var(--light-slate);
        padding: 1.5rem;
        border-radius: 1rem;
        border: 1px solid var(--border-divider);
        margin-bottom: 1.5rem;
        transition: var(--transition);
    }

    .dark .form-group-enhanced {
        background: var(--slate-800);
        border-color: var(--slate-600);
    }

    .form-group-enhanced:hover {
        border-color: var(--aqua-green);
        box-shadow: var(--card-shadow);
    }

    .form-group-enhanced:focus-within {
        border-color: var(--aqua-green);
        box-shadow: 0 0 0 3px rgba(45, 212, 191, 0.15);
    }

    /* Premium Data Visualization */
    .data-visualization {
        background: var(--light-slate);
        border-radius: 1.25rem;
        padding: 2rem;
        border: 1px solid var(--border-divider);
        box-shadow: var(--card-shadow);
        position: relative;
        overflow: hidden;
    }

    .dark .data-visualization {
        background: var(--slate-800);
        border-color: var(--slate-600);
    }

    .data-visualization::before {
        content: '';
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: linear-gradient(135deg, rgba(15, 118, 110, 0.02) 0%, rgba(45, 212, 191, 0.01) 100%);
        pointer-events: none;
    }

    /* Enhanced Status Indicators */
    .status-indicator {
        display: inline-flex;
        align-items: center;
        gap: 0.5rem;
        padding: 0.5rem 1rem;
        border-radius: 2rem;
        font-weight: 500;
        font-size: 0.875rem;
        text-transform: uppercase;
        letter-spacing: 0.05em;
    }

    .status-indicator::before {
        content: '';
        width: 0.5rem;
        height: 0.5rem;
        border-radius: 50%;
        animation: pulse 2s infinite;
    }

    .status-indicator.active {
        background: rgba(16, 185, 129, 0.1);
        color: var(--emerald);
        border: 1px solid rgba(16, 185, 129, 0.2);
    }

    .status-indicator.active::before {
        background: var(--emerald);
    }

    .status-indicator.pending {
        background: rgba(245, 158, 11, 0.1);
        color: var(--amber);
        border: 1px solid rgba(245, 158, 11, 0.2);
    }

    .status-indicator.pending::before {
        background: var(--amber);
    }

    .status-indicator.inactive {
        background: rgba(239, 68, 68, 0.1);
        color: var(--red);
        border: 1px solid rgba(239, 68, 68, 0.2);
    }

    .status-indicator.inactive::before {
        background: var(--red);
    }

    /* Premium Interactive Elements */
    .interactive-card {
        position: relative;
        background: var(--light-slate);
        border: 1px solid var(--border-divider);
        border-radius: 1.25rem;
        padding: 2rem;
        transition: var(--transition);
        cursor: pointer;
        overflow: hidden;
    }

    .dark .interactive-card {
        background: var(--slate-800);
        border-color: var(--slate-600);
    }

    .interactive-card::before {
        content: '';
        position: absolute;
        top: 0;
        left: -100%;
        width: 100%;
        height: 100%;
        background: linear-gradient(90deg, transparent, rgba(45, 212, 191, 0.05), transparent);
        transition: left 0.6s;
    }

    .interactive-card:hover::before {
        left: 100%;
    }

    .interactive-card:hover {
        transform: translateY(-4px);
        box-shadow: var(--card-shadow-hover);
        border-color: var(--aqua-green);
    }

    /* Enhanced Focus States */
    .focus-enhanced:focus {
        outline: none;
        box-shadow: 0 0 0 3px rgba(45, 212, 191, 0.25);
        border-color: var(--aqua-green);
        transform: translateY(-1px);
    }

    /* Premium Scrollbars */
    .premium-scrollbar::-webkit-scrollbar {
        width: 8px;
        height: 8px;
    }

    .premium-scrollbar::-webkit-scrollbar-track {
        background: var(--slate-100);
        border-radius: 4px;
    }

    .dark .premium-scrollbar::-webkit-scrollbar-track {
        background: var(--slate-700);
    }

    .premium-scrollbar::-webkit-scrollbar-thumb {
        background: var(--aqua-green);
        border-radius: 4px;
        transition: background 0.3s ease;
    }

    .premium-scrollbar::-webkit-scrollbar-thumb:hover {
        background: var(--deep-teal);
    }

    /* Enhanced Animations */
    @keyframes float {
        0%, 100% { transform: translateY(0px); }
        50% { transform: translateY(-10px); }
    }

    .float-animation {
        animation: float 3s ease-in-out infinite;
    }

    @keyframes glow {
        0%, 100% { box-shadow: 0 0 20px rgba(45, 212, 191, 0.3); }
        50% { box-shadow: 0 0 30px rgba(45, 212, 191, 0.6); }
    }

    .glow-animation {
        animation: glow 2s ease-in-out infinite;
    }

    /* Premium Utility Classes */
    .text-gradient {
        background: linear-gradient(135deg, var(--deep-teal) 0%, var(--aqua-green) 100%);
        -webkit-background-clip: text;
        -webkit-text-fill-color: transparent;
        background-clip: text;
    }

    .bg-gradient-premium {
        background: linear-gradient(135deg, var(--light-slate) 0%, var(--cool-gray) 100%);
    }

    .dark .bg-gradient-premium {
        background: linear-gradient(135deg, var(--slate-800) 0%, var(--slate-700) 100%);
    }

    .border-gradient {
        border: 2px solid transparent;
        background: linear-gradient(var(--light-slate), var(--light-slate)) padding-box,
                    linear-gradient(135deg, var(--deep-teal) 0%, var(--aqua-green) 100%) border-box;
    }

    .dark .border-gradient {
        background: linear-gradient(var(--slate-800), var(--slate-800)) padding-box,
                    linear-gradient(135deg, var(--deep-teal) 0%, var(--aqua-green) 100%) border-box;
    }

    /* Enhanced Mobile Optimizations */
    .mobile-optimized {
        -webkit-tap-highlight-color: transparent;
        touch-action: manipulation;
    }

    .mobile-optimized:active {
        transform: scale(0.98);
        transition: transform 0.1s ease;
    }

    /* Premium Loading States */
    .loading-overlay {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: rgba(248, 250, 252, 0.95);
        display: flex;
        align-items: center;
        justify-content: center;
        z-index: 9999;
        backdrop-filter: blur(10px);
    }

    .dark .loading-overlay {
        background: rgba(15, 23, 42, 0.95);
    }

    .loading-content {
        text-align: center;
        color: var(--deep-teal);
    }

    .dark .loading-content {
        color: var(--aqua-green);
    }

    /* Enhanced Error States */
    .error-state {
        background: linear-gradient(135deg, rgba(239, 68, 68, 0.05) 0%, rgba(248, 113, 113, 0.02) 100%);
        border: 1px solid rgba(239, 68, 68, 0.2);
        border-radius: 1rem;
        padding: 2rem;
        text-align: center;
        color: var(--red);
    }

    .dark .error-state {
        background: linear-gradient(135deg, rgba(239, 68, 68, 0.1) 0%, rgba(248, 113, 113, 0.05) 100%);
        border-color: rgba(239, 68, 68, 0.3);
    }

    /* Success States */
    .success-state {
        background: linear-gradient(135deg, rgba(16, 185, 129, 0.05) 0%, rgba(52, 211, 153, 0.02) 100%);
        border: 1px solid rgba(16, 185, 129, 0.2);
        border-radius: 1rem;
        padding: 2rem;
        text-align: center;
        color: var(--emerald);
    }

    .dark .success-state {
        background: linear-gradient(135deg, rgba(16, 185, 129, 0.1) 0%, rgba(52, 211, 153, 0.05) 100%);
        border-color: rgba(16, 185, 129, 0.3);
    }

    /* Premium Tooltips */
    .tooltip {
        position: relative;
        display: inline-block;
    }

    .tooltip::before {
        content: attr(data-tooltip);
        position: absolute;
        bottom: 100%;
        left: 50%;
        transform: translateX(-50%);
        background: var(--dark-slate);
        color: white;
        padding: 0.5rem 1rem;
        border-radius: 0.5rem;
        font-size: 0.875rem;
        white-space: nowrap;
        opacity: 0;
        visibility: hidden;
        transition: all 0.3s ease;
        z-index: 1000;
        box-shadow: var(--card-shadow);
    }

    .tooltip:hover::before {
        opacity: 1;
        visibility: visible;
        transform: translateX(-50%) translateY(-8px);
    }

    .dark .tooltip::before {
        background: var(--slate-700);
        border: 1px solid var(--slate-600);
    }

    /* Enhanced Selection */
    ::selection {
        background: rgba(45, 212, 191, 0.3);
        color: var(--dark-slate);
    }

    .dark ::selection {
        background: rgba(45, 212, 191, 0.5);
        color: var(--light-slate);
    }

    /* Premium Focus Rings */
    .focus-ring:focus {
        outline: none;
        ring: 3px;
        ring-color: rgba(45, 212, 191, 0.5);
    }

    /* Enhanced Transitions */
    .transition-enhanced {
        transition: all 0.5s cubic-bezier(0.4, 0, 0.2, 1);
    }

    /* Premium Shadows */
    .shadow-premium {
        box-shadow: 0 20px 40px rgba(15, 23, 42, 0.1);
    }

    .dark .shadow-premium {
        box-shadow: 0 20px 40px rgba(0, 0, 0, 0.3);
    }

    .shadow-premium-hover {
        box-shadow: 0 25px 50px rgba(15, 23, 42, 0.15);
    }

    .dark .shadow-premium-hover {
        box-shadow: 0 25px 50px rgba(0, 0, 0, 0.4);
    }

    /* Enhanced Background Patterns */
    .bg-pattern {
        background-image:
            radial-gradient(circle at 25% 25%, rgba(45, 212, 191, 0.1) 0%, transparent 50%),
            radial-gradient(circle at 75% 75%, rgba(15, 118, 110, 0.1) 0%, transparent 50%);
    }

    .dark .bg-pattern {
        background-image:
            radial-gradient(circle at 25% 25%, rgba(45, 212, 191, 0.05) 0%, transparent 50%),
            radial-gradient(circle at 75% 75%, rgba(15, 118, 110, 0.05) 0%, transparent 50%);
    }

    /* Premium Glass Morphism Variations */
    .glass-light {
        background: rgba(248, 250, 252, 0.7);
        backdrop-filter: blur(20px) saturate(180%);
        border: 1px solid rgba(255, 255, 255, 0.2);
    }

    .glass-dark {
        background: rgba(15, 23, 42, 0.7);
        backdrop-filter: blur(20px) saturate(180%);
        border: 1px solid rgba(255, 255, 255, 0.1);
    }

    /* Enhanced Responsive Typography */
    @media (max-width: 768px) {
        h1 { font-size: 2rem; }
        h2 { font-size: 1.75rem; }
        h3 { font-size: 1.5rem; }
        h4 { font-size: 1.25rem; }

        .text-responsive {
            font-size: clamp(0.875rem, 2vw, 1rem);
        }
    }

    /* Premium Interactive Feedback */
    .interactive-feedback:active {
        transform: scale(0.95);
        transition: transform 0.1s ease;
    }

    /* Enhanced Color System */
    .color-primary { color: var(--deep-teal); }
    .color-accent { color: var(--aqua-green); }
    .color-success { color: var(--emerald); }
    .color-warning { color: var(--amber); }
    .color-error { color: var(--red); }
    .color-text { color: var(--charcoal-slate); }
    .color-heading { color: var(--dark-slate); }

    .dark .color-text { color: var(--light-slate); }
    .dark .color-heading { color: var(--light-slate); }

    /* Premium Border Radius System */
    .radius-sm { border-radius: 0.5rem; }
    .radius-md { border-radius: 0.75rem; }
    .radius-lg { border-radius: 1rem; }
    .radius-xl { border-radius: 1.25rem; }
    .radius-2xl { border-radius: 1.5rem; }
    .radius-full { border-radius: 9999px; }

    /* Enhanced Spacing System */
    .space-xs { margin: 0.25rem; }
    .space-sm { margin: 0.5rem; }
    .space-md { margin: 1rem; }
    .space-lg { margin: 1.5rem; }
    .space-xl { margin: 2rem; }
    .space-2xl { margin: 3rem; }

    /* Premium Z-index System */
    .z-dropdown { z-index: 1000; }
    .z-sticky { z-index: 1020; }
    .z-fixed { z-index: 1030; }
    .z-modal { z-index: 1040; }
    .z-popover { z-index: 1050; }
    .z-tooltip { z-index: 1060; }

    /* Enhanced Performance Optimizations */
    .will-change-transform {
        will-change: transform;
    }

    .will-change-opacity {
        will-change: opacity;
    }

    .contain-layout {
        contain: layout;
    }

    .contain-paint {
        contain: paint;
    }

    /* Premium Print Styles */
    @media print {
        .no-print {
            display: none !important;
        }

        body {
            background: white !important;
            color: black !important;
        }

        .glass, .stat-card, .section-card {
            background: white !important;
            border: 1px solid #ddd !important;
            box-shadow: none !important;
            backdrop-filter: none !important;
        }
    }

    /* Enhanced Accessibility */
    @media (prefers-reduced-motion: reduce) {
        *, *::before, *::after {
            animation-duration: 0.01ms !important;
            animation-iteration-count: 1 !important;
            transition-duration: 0.01ms !important;
        }
    }

    .sr-only {
        position: absolute;
        width: 1px;
        height: 1px;
        padding: 0;
        margin: -1px;
        overflow: hidden;
        clip: rect(0, 0, 0, 0);
        white-space: nowrap;
        border: 0;
    }

    /* Premium Custom Scrollbar for Firefox */
    .premium-scrollbar {
        scrollbar-width: thin;
        scrollbar-color: var(--aqua-green) var(--slate-100);
    }

    .dark .premium-scrollbar {
        scrollbar-color: var(--aqua-green) var(--slate-700);
    }

    /* Enhanced Focus Management */
    .focus-management:focus-visible {
        outline: 2px solid var(--aqua-green);
        outline-offset: 2px;
    }

    /* Premium Grid System */
    .grid-system {
        display: grid;
        gap: 1.5rem;
        grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
    }

    /* Enhanced Flexbox Utilities */
    .flex-center {
        display: flex;
        align-items: center;
        justify-content: center;
    }

    .flex-between {
        display: flex;
        align-items: center;
        justify-content: space-between;
    }

    .flex-around {
        display: flex;
        align-items: center;
        justify-content: space-around;
    }

    /* Premium Text Utilities */
    .text-balance {
        text-wrap: balance;
    }

    .text-pretty {
        text-wrap: pretty;
    }

    /* Enhanced Container Queries */
    .container-query {
        container-type: inline-size;
    }

    @container (min-width: 400px) {
        .container-query-content {
            display: flex;
            gap: 1rem;
        }
    }

    /* Premium Aspect Ratios */
    .aspect-video {
        aspect-ratio: 16 / 9;
    }

    .aspect-square {
        aspect-ratio: 1 / 1;
    }

    .aspect-auto {
        aspect-ratio: auto;
    }

    /* Enhanced Object Fit */
    .object-cover {
        object-fit: cover;
    }

    .object-contain {
        object-fit: contain;
    }

    .object-fill {
        object-fit: fill;
    }

    /* Premium Backdrop Effects */
    .backdrop-blur-sm {
        backdrop-filter: blur(4px);
    }

    .backdrop-blur-md {
        backdrop-filter: blur(8px);
    }

    .backdrop-blur-lg {
        backdrop-filter: blur(16px);
    }

    .backdrop-blur-xl {
        backdrop-filter: blur(24px);
    }

    /* Enhanced Filter Effects */
    .filter-grayscale {
        filter: grayscale(100%);
    }

    .filter-sepia {
        filter: sepia(100%);
    }

    .filter-none {
        filter: none;
    }

    /* Premium Transition Properties */
    .transition-colors {
        transition-property: color, background-color, border-color, text-decoration-color, fill, stroke;
        transition-timing-function: cubic-bezier(0.4, 0, 0.2, 1);
        transition-duration: 150ms;
    }

    .transition-all {
        transition-property: all;
        transition-timing-function: cubic-bezier(0.4, 0, 0.2, 1);
        transition-duration: 150ms;
    }

    .transition-transform {
        transition-property: transform;
        transition-timing-function: cubic-bezier(0.4, 0, 0.2, 1);
        transition-duration: 150ms;
    }

    /* Enhanced Animation Delays */
    .animation-delay-100 {
        animation-delay: 100ms;
    }

    .animation-delay-200 {
        animation-delay: 200ms;
    }

    .animation-delay-300 {
        animation-delay: 300ms;
    }

    .animation-delay-500 {
        animation-delay: 500ms;
    }

    .animation-delay-700 {
        animation-delay: 700ms;
    }

    .animation-delay-1000 {
        animation-delay: 1000ms;
    }

    /* Premium Gradient Text */
    .gradient-text-primary {
        background: linear-gradient(135deg, var(--deep-teal) 0%, var(--aqua-green) 100%);
        -webkit-background-clip: text;
        -webkit-text-fill-color: transparent;
        background-clip: text;
    }

    .gradient-text-success {
        background: linear-gradient(135deg, var(--emerald) 0%, #34D399 100%);
        -webkit-background-clip: text;
        -webkit-text-fill-color: transparent;
        background-clip: text;
    }

    .gradient-text-warning {
        background: linear-gradient(135deg, var(--amber) 0%, #FBBF24 100%);
        -webkit-background-clip: text;
        -webkit-text-fill-color: transparent;
        background-clip: text;
    }

    .gradient-text-error {
        background: linear-gradient(135deg, var(--red) 0%, #F87171 100%);
        -webkit-background-clip: text;
        -webkit-text-fill-color: transparent;
        background-clip: text;
    }

    /* Enhanced Border Gradients */
    .border-gradient-primary {
        border: 2px solid transparent;
        background:
            linear-gradient(var(--light-slate), var(--light-slate)) padding-box,
            linear-gradient(135deg, var(--deep-teal) 0%, var(--aqua-green) 100%) border-box;
    }

    .dark .border-gradient-primary {
        background:
            linear-gradient(var(--slate-800), var(--slate-800)) padding-box,
            linear-gradient(135deg, var(--deep-teal) 0%, var(--aqua-green) 100%) border-box;
    }

    /* Premium Shadow Gradients */
    .shadow-gradient-primary {
        box-shadow:
            0 10px 25px rgba(15, 118, 110, 0.15),
            0 5px 10px rgba(45, 212, 191, 0.1);
    }

    .dark .shadow-gradient-primary {
        box-shadow:
            0 10px 25px rgba(15, 118, 110, 0.3),
            0 5px 10px rgba(45, 212, 191, 0.2);
    }

    /* Enhanced Interactive States */
    .interactive-scale:hover {
        transform: scale(1.05);
    }

    .interactive-scale:active {
        transform: scale(0.95);
    }

    .interactive-lift:hover {
        transform: translateY(-2px);
    }

    .interactive-lift:active {
        transform: translateY(0);
    }

    /* Premium Focus Styles */
    .focus-scale:focus {
        transform: scale(1.02);
    }

    .focus-lift:focus {
        transform: translateY(-1px);
    }

    /* Enhanced Disabled States */
    .disabled {
        opacity: 0.5;
        cursor: not-allowed;
        pointer-events: none;
    }

    .disabled:hover {
        transform: none !important;
    }

    /* Premium Loading States */
    .loading {
        position: relative;
        overflow: hidden;
    }

    .loading::after {
        content: '';
        position: absolute;
        top: 0;
        left: -100%;
        width: 100%;
        height: 100%;
        background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.4), transparent);
        animation: loading 1.5s infinite;
    }

    .dark .loading::after {
        background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.1), transparent);
    }

    /* Enhanced Error Boundaries */
    .error-boundary {
        background: linear-gradient(135deg, rgba(239, 68, 68, 0.05) 0%, rgba(248, 113, 113, 0.02) 100%);
        border: 1px solid rgba(239, 68, 68, 0.2);
        border-radius: 1rem;
        padding: 2rem;
        text-align: center;
    }

    .dark .error-boundary {
        background: linear-gradient(135deg, rgba(239, 68, 68, 0.1) 0%, rgba(248, 113, 113, 0.05) 100%);
        border-color: rgba(239, 68, 68, 0.3);
    }

    /* Premium Success Messages */
    .success-message {
        background: linear-gradient(135deg, rgba(16, 185, 129, 0.05) 0%, rgba(52, 211, 153, 0.02) 100%);
        border: 1px solid rgba(16, 185, 129, 0.2);
        border-radius: 1rem;
        padding: 2rem;
        text-align: center;
    }

    .dark .success-message {
        background: linear-gradient(135deg, rgba(16, 185, 129, 0.1) 0%, rgba(52, 211, 153, 0.05) 100%);
        border-color: rgba(16, 185, 129, 0.3);
    }

    /* Enhanced Warning Messages */
    .warning-message {
        background: linear-gradient(135deg, rgba(245, 158, 11, 0.05) 0%, rgba(251, 191, 36, 0.02) 100%);
        border: 1px solid rgba(245, 158, 11, 0.2);
        border-radius: 1rem;
        padding: 2rem;
        text-align: center;
    }

    .dark .warning-message {
        background: linear-gradient(135deg, rgba(245, 158, 11, 0.1) 0%, rgba(251, 191, 36, 0.05) 100%);
        border-color: rgba(245, 158, 11, 0.3);
    }

    /* Premium Info Messages */
    .info-message {
        background: linear-gradient(135deg, rgba(15, 118, 110, 0.05) 0%, rgba(45, 212, 191, 0.02) 100%);
        border: 1px solid rgba(15, 118, 110, 0.2);
        border-radius: 1rem;
        padding: 2rem;
        text-align: center;
    }

    .dark .info-message {
        background: linear-gradient(135deg, rgba(15, 118, 110, 0.1) 0%, rgba(45, 212, 191, 0.05) 100%);
        border-color: rgba(15, 118, 110, 0.3);
    }

    /* Enhanced Data Visualization Colors */
    .chart-color-1 { background: var(--deep-teal); }
    .chart-color-2 { background: var(--aqua-green); }
    .chart-color-3 { background: var(--emerald); }
    .chart-color-4 { background: var(--amber); }
    .chart-color-5 { background: var(--red); }
    .chart-color-6 { background: var(--slate-500); }

    /* Premium Gradient Backgrounds */
    .bg-gradient-primary {
        background: linear-gradient(135deg, var(--deep-teal) 0%, var(--aqua-green) 100%);
    }

    .bg-gradient-success {
        background: linear-gradient(135deg, var(--emerald) 0%, #34D399 100%);
    }

    .bg-gradient-warning {
        background: linear-gradient(135deg, var(--amber) 0%, #FBBF24 100%);
    }

    .bg-gradient-error {
        background: linear-gradient(135deg, var(--red) 0%, #F87171 100%);
    }

    /* Enhanced Text Shadows */
    .text-shadow-sm {
        text-shadow: 0 1px 2px rgba(0, 0, 0, 0.1);
    }

    .text-shadow-md {
        text-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
    }

    .text-shadow-lg {
        text-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
    }

    .text-shadow-xl {
        text-shadow: 0 8px 16px rgba(0, 0, 0, 0.1);
    }

    /* Premium Box Shadows */
    .shadow-inset-sm {
        box-shadow: inset 0 1px 2px rgba(0, 0, 0, 0.05);
    }

    .shadow-inset-md {
        box-shadow: inset 0 2px 4px rgba(0, 0, 0, 0.05);
    }

    .shadow-inset-lg {
        box-shadow: inset 0 4px 8px rgba(0, 0, 0, 0.05);
    }

    /* Enhanced Blend Modes */
    .blend-multiply {
        mix-blend-mode: multiply;
    }

    .blend-screen {
        mix-blend-mode: screen;
    }

    .blend-overlay {
        mix-blend-mode: overlay;
    }

    .blend-darken {
        mix-blend-mode: darken;
    }

    .blend-lighten {
        mix-blend-mode: lighten;
    }

    /* Premium Clip Paths */
    .clip-circle {
        clip-path: circle(50% at 50% 50%);
    }

    .clip-polygon {
        clip-path: polygon(50% 0%, 100% 50%, 50% 100%, 0% 50%);
    }

    .clip-triangle {
        clip-path: polygon(50% 0%, 0% 100%, 100% 100%);
    }

    /* Enhanced Transform Origins */
    .origin-center {
        transform-origin: center;
    }

    .origin-top {
        transform-origin: top;
    }

    .origin-bottom {
        transform-origin: bottom;
    }

    .origin-left {
        transform-origin: left;
    }

    .origin-right {
        transform-origin: right;
    }

    .origin-top-left {
        transform-origin: top left;
    }

    .origin-top-right {
        transform-origin: top right;
    }

    .origin-bottom-left {
        transform-origin: bottom left;
    }

    .origin-bottom-right {
        transform-origin: bottom right;
    }

    /* Premium Perspective */
    .perspective-1000 {
        perspective: 1000px;
    }

    .perspective-500 {
        perspective: 500px;
    }

    .perspective-250 {
        perspective: 250px;
    }

    /* Enhanced 3D Transforms */
    .transform-3d {
        transform-style: preserve-3d;
    }

    .rotate-x-10 {
        transform: rotateX(10deg);
    }

    .rotate-y-10 {
        transform: rotateY(10deg);
    }

    .rotate-z-10 {
        transform: rotateZ(10deg);
    }

    /* Premium Backface Visibility */
    .backface-visible {
        backface-visibility: visible;
    }

    .backface-hidden {
        backface-visibility: hidden;
    }

    /* Enhanced Filter Effects */
    .filter-blur-sm {
        filter: blur(4px);
    }

    .filter-blur-md {
        filter: blur(8px);
    }

    .filter-blur-lg {
        filter: blur(16px);
    }

    .filter-brightness-90 {
        filter: brightness(0.9);
    }

    .filter-brightness-110 {
        filter: brightness(1.1);
    }

    .filter-contrast-90 {
        filter: contrast(0.9);
    }

    .filter-contrast-110 {
        filter: contrast(1.1);
    }

    .filter-saturate-90 {
        filter: saturate(0.9);
    }

    .filter-saturate-110 {
        filter: saturate(1.1);
    }

    .filter-hue-rotate-90 {
        filter: hue-rotate(90deg);
    }

    .filter-hue-rotate-180 {
        filter: hue-rotate(180deg);
    }

    .filter-hue-rotate-270 {
        filter: hue-rotate(270deg);
    }

    /* Premium Gradient Borders */
    .border-gradient-to-r {
        border-image: linear-gradient(to right, var(--deep-teal), var(--aqua-green)) 1;
    }

    .border-gradient-to-b {
        border-image: linear-gradient(to bottom, var(--deep-teal), var(--aqua-green)) 1;
    }

    .border-gradient-to-tr {
        border-image: linear-gradient(to top right, var(--deep-teal), var(--aqua-green)) 1;
    }

    .border-gradient-to-bl {
        border-image: linear-gradient(to bottom left, var(--deep-teal), var(--aqua-green)) 1;
    }

    /* Enhanced Mask Effects */
    .mask-linear {
        mask-image: linear-gradient(to bottom, black, transparent);
    }

    .mask-radial {
        mask-image: radial-gradient(circle, black, transparent);
    }

    /* Premium Blend Modes */
    .blend-normal {
        mix-blend-mode: normal;
    }

    .blend-multiply {
        mix-blend-mode: multiply;
    }

    .blend-screen {
        mix-blend-mode: screen;
    }

    .blend-overlay {
        mix-blend-mode: overlay;
    }

    .blend-darken {
        mix-blend-mode: darken;
    }

    .blend-lighten {
        mix-blend-mode: lighten;
    }

    .blend-color-dodge {
        mix-blend-mode: color-dodge;
    }

    .blend-color-burn {
        mix-blend-mode: color-burn;
    }

    .blend-hard-light {
        mix-blend-mode: hard-light;
    }

    .blend-soft-light {
        mix-blend-mode: soft-light;
    }

    .blend-difference {
        mix-blend-mode: difference;
    }

    .blend-exclusion {
        mix-blend-mode: exclusion;
    }

    .blend-hue {
        mix-blend-mode: hue;
    }

    .blend-saturation {
        mix-blend-mode: saturation;
    }

    .blend-color {
        mix-blend-mode: color;
    }

    .blend-luminosity {
        mix-blend-mode: luminosity;
    }

    /* Enhanced Isolation */
    .isolation-auto {
        isolation: auto;
    }

    .isolation-isolate {
        isolation: isolate;
    }

    /* Premium Container Styles */
    .container-premium {
        max-width: 1280px;
        margin: 0 auto;
        padding: 0 1rem;
    }

    @media (min-width: 640px) {
        .container-premium {
            padding: 0 2rem;
        }
    }

    @media (min-width: 1024px) {
        .container-premium {
            padding: 0 3rem;
        }
    }

    /* Enhanced Aspect Ratio Containers */
    .aspect-ratio-16-9 {
        aspect-ratio: 16 / 9;
    }

    .aspect-ratio-4-3 {
        aspect-ratio: 4 / 3;
    }

    .aspect-ratio-1-1 {
        aspect-ratio: 1 / 1;
    }

    .aspect-ratio-3-2 {
        aspect-ratio: 3 / 2;
    }

    .aspect-ratio-2-3 {
        aspect-ratio: 2 / 3;
    }

    /* Premium Object Position */
    .object-center {
        object-position: center;
    }

    .object-top {
        object-position: top;
    }

    .object-bottom {
        object-position: bottom;
    }

    .object-left {
        object-position: left;
    }

    .object-right {
        object-position: right;
    }

    .object-top-left {
        object-position: top left;
    }

    .object-top-right {
        object-position: top right;
    }

    .object-bottom-left {
        object-position: bottom left;
    }

    .object-bottom-right {
        object-position: bottom right;
    }

    /* Enhanced Overflow Styles */
    .overflow-x-auto {
        overflow-x: auto;
    }

    .overflow-y-auto {
        overflow-y: auto;
    }

    .overflow-x-hidden {
        overflow-x: hidden;
    }

    .overflow-y-hidden {
        overflow-y: hidden;
    }

    .overflow-x-scroll {
        overflow-x: scroll;
    }

    .overflow-y-scroll {
        overflow-y: scroll;
    }

    .overflow-x-visible {
        overflow-x: visible;
    }

    .overflow-y-visible {
        overflow-y: visible;
    }

    .overflow-x-clip {
        overflow-x: clip;
    }

    .overflow-y-clip {
        overflow-y: clip;
    }

    /* Premium Overscroll Behavior */
    .overscroll-auto {
        overscroll-behavior: auto;
    }

    .overscroll-contain {
        overscroll-behavior: contain;
    }

    .overscroll-none {
        overscroll-behavior: none;
    }

    .overscroll-y-auto {
        overscroll-behavior-y: auto;
    }

    .overscroll-y-contain {
        overscroll-behavior-y: contain;
    }

    .overscroll-y-none {
        overscroll-behavior-y: none;
    }

    .overscroll-x-auto {
        overscroll-behavior-x: auto;
    }

    .overscroll-x-contain {
        overscroll-behavior-x: contain;
    }

    .overscroll-x-none {
        overscroll-behavior-x: none;
    }

    /* Enhanced Scroll Behavior */
    .scroll-auto {
        scroll-behavior: auto;
    }

    .scroll-smooth {
        scroll-behavior: smooth;
    }

    /* Premium Scroll Snap */
    .snap-none {
        scroll-snap-type: none;
    }

    .snap-x {
        scroll-snap-type: x mandatory;
    }

    .snap-y {
        scroll-snap-type: y mandatory;
    }

    .snap-both {
        scroll-snap-type: both mandatory;
    }

    .snap-align-none {
        scroll-snap-align: none;
    }

    .snap-align-start {
        scroll-snap-align: start;
    }

    .snap-align-center {
        scroll-snap-align: center;
    }

    .snap-align-end {
        scroll-snap-align: end;
    }

    .snap-stop-normal {
        scroll-snap-stop: normal;
    }

    .snap-stop-always {
        scroll-snap-stop: always;
    }

    /* Enhanced Touch Action */
    .touch-auto {
        touch-action: auto;
    }

    .touch-none {
        touch-action: none;
    }

    .touch-pan-x {
        touch-action: pan-x;
    }

    .touch-pan-y {
        touch-action: pan-y;
    }

    .touch-pan-left {
        touch-action: pan-left;
    }

    .touch-pan-right {
        touch-action: pan-right;
    }

    .touch-pan-up {
        touch-action: pan-up;
    }

    .touch-pan-down {
        touch-action: pan-down;
    }

    .touch-pinch-zoom {
        touch-action: pinch-zoom;
    }

    .touch-manipulation {
        touch-action: manipulation;
    }

    /* Premium User Select */
    .select-none {
        user-select: none;
    }

    .select-text {
        user-select: text;
    }

    .select-all {
        user-select: all;
    }

    .select-auto {
        user-select: auto;
    }

    /* Enhanced Pointer Events */
    .pointer-events-none {
        pointer-events: none;
    }

    .pointer-events-auto {
        pointer-events: auto;
    }

    /* Premium Resize */
    .resize-none {
        resize: none;
    }

    .resize-y {
        resize: vertical;
    }

    .resize-x {
        resize: horizontal;
    }

    .resize {
        resize: both;
    }

    /* Enhanced Scrollbar Styling */
    .scrollbar-thin {
        scrollbar-width: thin;
    }

    .scrollbar-auto {
        scrollbar-width: auto;
    }

    .scrollbar-none {
        scrollbar-width: none;
    }

    /* Premium Accent Color */
    .accent-primary {
        accent-color: var(--deep-teal);
    }

    .accent-success {
        accent-color: var(--emerald);
    }

    .accent-warning {
        accent-color: var(--amber);
    }

    .accent-error {
        accent-color: var(--red);
    }

    /* Enhanced Caret Color */
    .caret-primary {
        caret-color: var(--deep-teal);
    }

    .caret-success {
        caret-color: var(--emerald);
    }

    .caret-warning {
        caret-color: var(--amber);
    }

    .caret-error {
        caret-color: var(--red);
    }

    /* Premium Will Change */
    .will-change-auto {
        will-change: auto;
    }

    .will-change-scroll {
        will-change: scroll-position;
    }

    .will-change-contents {
        will-change: contents;
    }

    .will-change-transform {
        will-change: transform;
    }

    /* Enhanced Contain */
    .contain-none {
        contain: none;
    }

    .contain-strict {
        contain: strict;
    }

    .contain-content {
        contain: content;
    }

    .contain-size {
        contain: size;
    }

    .contain-layout {
        contain: layout;
    }

    .contain-style {
        contain: style;
    }

    .contain-paint {
        contain: paint;
    }

    /* Premium Content Visibility */
    .content-visibility-auto {
        content-visibility: auto;
    }

    .content-visibility-visible {
        content-visibility: visible;
    }

    .content-visibility-hidden {
        content-visibility: hidden;
    }

    /* Enhanced Break Words */
    .break-normal {
        overflow-wrap: normal;
        word-break: normal;
    }

    .break-words {
        overflow-wrap: break-word;
    }

    .break-all {
        word-break: break-all;
    }

    .break-keep {
        word-break: keep-all;
    }

    /* Premium Writing Modes */
    .write-normal {
        writing-mode: horizontal-tb;
    }

    .write-vertical-right {
        writing-mode: vertical-rl;
    }

    .write-vertical-left {
        writing-mode: vertical-lr;
    }

    /* Enhanced Text Orientation */
    .text-orient-mixed {
        text-orientation: mixed;
    }

    .text-orient-upright {
        text-orientation: upright;
    }

    .text-orient-sideways {
        text-orientation: sideways;
    }

    /* Premium Text Decoration */
    .underline-primary {
        text-decoration-color: var(--deep-teal);
    }

    .underline-success {
        text-decoration-color: var(--emerald);
    }

    .underline-warning {
        text-decoration-color: var(--amber);
    }

    .underline-error {
        text-decoration-color: var(--red);
    }

    .underline-accent {
        text-decoration-color: var(--aqua-green);
    }

    /* Enhanced Text Decoration Style */
    .decoration-solid {
        text-decoration-style: solid;
    }

    .decoration-double {
        text-decoration-style: double;
    }

    .decoration-dotted {
        text-decoration-style: dotted;
    }

    .decoration-dashed {
        text-decoration-style: dashed;
    }

    .decoration-wavy {
        text-decoration-style: wavy;
    }

    /* Premium Text Decoration Thickness */
    .decoration-auto {
        text-decoration-thickness: auto;
    }

    .decoration-from-font {
        text-decoration-thickness: from-font;
    }

    .decoration-1 {
        text-decoration-thickness: 1px;
    }

    .decoration-2 {
        text-decoration-thickness: 2px;
    }

    .decoration-4 {
        text-decoration-thickness: 4px;
    }

    .decoration-8 {
        text-decoration-thickness: 8px;
    }

    /* Enhanced Text Underline Offset */
    .underline-offset-auto {
        text-underline-offset: auto;
    }

    .underline-offset-1 {
        text-underline-offset: 1px;
    }

    .underline-offset-2 {
        text-underline-offset: 2px;
    }

    .underline-offset-4 {
        text-underline-offset: 4px;
    }

    .underline-offset-8 {
        text-underline-offset: 8px;
    }

    /* Premium Font Variant Numeric */
    .normal-nums {
        font-variant-numeric: normal;
    }

    .ordinal {
        font-variant-numeric: ordinal;
    }

    .slashed-zero {
        font-variant-numeric: slashed-zero;
    }

    .lining-nums {
        font-variant-numeric: lining-nums;
    }

    .oldstyle-nums {
        font-variant-numeric: oldstyle-nums;
    }

    .proportional-nums {
        font-variant-numeric: proportional-nums;
    }

    .tabular-nums {
        font-variant-numeric: tabular-nums;
    }

    .diagonal-fractions {
        font-variant-numeric: diagonal-fractions;
    }

    .stacked-fractions {
        font-variant-numeric: stacked-fractions;
    }

    /* Enhanced Letter Spacing */
    .tracking-tighter {
        letter-spacing: -0.05em;
    }

    .tracking-tight {
        letter-spacing: -0.025em;
    }

    .tracking-normal {
        letter-spacing: 0em;
    }

    .tracking-wide {
        letter-spacing: 0.025em;
    }

    .tracking-wider {
        letter-spacing: 0.05em;
    }

    .tracking-widest {
        letter-spacing: 0.1em;
    }

    /* Premium Line Height */
    .leading-none {
        line-height: 1;
    }

    .leading-tight {
        line-height: 1.25;
    }

    .leading-snug {
        line-height: 1.375;
    }

    .leading-normal {
        line-height: 1.5;
    }

    .leading-relaxed {
        line-height: 1.625;
    }

    .leading-loose {
        line-height: 2;
    }

    /* Enhanced List Style Type */
    .list-none {
        list-style-type: none;
    }

    .list-disc {
        list-style-type: disc;
    }

    .list-decimal {
        list-style-type: decimal;
    }

    .list-square {
        list-style-type: square;
    }

    .list-roman {
        list-style-type: upper-roman;
    }

    .list-alpha {
        list-style-type: lower-alpha;
    }

    /* Premium List Style Position */
    .list-inside {
        list-style-position: inside;
    }

    .list-outside {
        list-style-position: outside;
    }

    /* Enhanced Placeholder Color */
    .placeholder-primary::placeholder {
        color: var(--deep-teal);
    }

    .placeholder-success::placeholder {
        color: var(--emerald);
    }

    .placeholder-warning::placeholder {
        color: var(--amber);
    }

    .placeholder-error::placeholder {
        color: var(--red);
    }

    .placeholder-accent::placeholder {
        color: var(--aqua-green);
    }

    /* Premium Placeholder Opacity */
    .placeholder-opacity-0::placeholder {
        opacity: 0;
    }

    .placeholder-opacity-5::placeholder {
        opacity: 0.05;
    }

    .placeholder-opacity-10::placeholder {
        opacity: 0.1;
    }

    .placeholder-opacity-20::placeholder {
        opacity: 0.2;
    }

    .placeholder-opacity-25::placeholder {
        opacity: 0.25;
    }

    .placeholder-opacity-30::placeholder {
        opacity: 0.3;
    }

    .placeholder-opacity-40::placeholder {
        opacity: 0.4;
    }

    .placeholder-opacity-50::placeholder {
        opacity: 0.5;
    }

    .placeholder-opacity-60::placeholder {
        opacity: 0.6;
    }

    .placeholder-opacity-70::placeholder {
        opacity: 0.7;
    }

    .placeholder-opacity-75::placeholder {
        opacity: 0.75;
    }

    .placeholder-opacity-80::placeholder {
        opacity: 0.8;
    }

    .placeholder-opacity-90::placeholder {
        opacity: 0.9;
    }

    .placeholder-opacity-95::placeholder {
        opacity: 0.95;
    }

    .placeholder-opacity-100::placeholder {
        opacity: 1;
    }

    /* Enhanced File Input Button */
    .file-input-button {
        position: relative;
        overflow: hidden;
        display: inline-block;
    }

    .file-input-button input[type="file"] {
        position: absolute;
        top: 0;
        right: 0;
        min-width: 100%;
        min-height: 100%;
        font-size: 100px;
        text-align: right;
        filter: alpha(opacity=0);
        opacity: 0;
        outline: none;
        background: white;
        cursor: pointer;
        display: block;
    }

    /* Premium Color Scheme */
    @media (prefers-color-scheme: dark) {
        .auto-dark {
            background: var(--slate-800);
            color: var(--light-slate);
        }
    }

    @media (prefers-color-scheme: light) {
        .auto-light {
            background: var(--light-slate);
            color: var(--dark-slate);
        }
    }

    /* Enhanced Reduced Motion */
    @media (prefers-reduced-motion: reduce) {
        .motion-reduce {
            animation-duration: 0.01ms !important;
            animation-iteration-count: 1 !important;
            transition-duration: 0.01ms !important;
        }
    }

    /* Premium Contrast */
    @media (prefers-contrast: high) {
        .contrast-high {
            border-width: 2px;
        }
    }

    @media (prefers-contrast: low) {
        .contrast-low {
            opacity: 0.8;
        }
    }

    /* Enhanced Forced Colors */
    @media (forced-colors: active) {
        .forced-colors {
            border: 1px solid CanvasText;
        }
    }

    /* Premium Scripting */
    @media (scripting: none) {
        .scripting-none {
            display: none;
        }
    }

    @media (scripting: initial-only) {
        .scripting-initial-only {
            display: none;
        }
    }

    @media (scripting: enabled) {
        .scripting-enabled {
            display: block;
        }
    }

    /* Enhanced Display Modes */
    @media (display-mode: fullscreen) {
        .display-fullscreen {
            padding: 2rem;
        }
    }

    @media (display-mode: standalone) {
        .display-standalone {
            padding: 1rem;
        }
    }

    @media (display-mode: minimal-ui) {
        .display-minimal-ui {
            padding: 1.5rem;
        }
    }

    @media (display-mode: browser) {
        .display-browser {
            padding: 1rem;
        }
    }

    /* Premium Pointer Types */
    @media (pointer: coarse) {
        .pointer-coarse {
            min-height: 44px;
            min-width: 44px;
        }
    }

    @media (pointer: fine) {
        .pointer-fine {
            min-height: 32px;
            min-width: 32px;
        }
    }

    @media (pointer: none) {
        .pointer-none {
            opacity: 0.7;
        }
    }

    /* Enhanced Hover Types */
    @media (hover: hover) {
        .hover-hover:hover {
            transform: translateY(-2px);
        }
    }

    @media (hover: none) {
        .hover-none {
            transform: none;
        }
    }

    /* Premium Any Hover */
    @media (any-hover: hover) {
        .any-hover-hover:hover {
            opacity: 0.8;
        }
    }

    @media (any-hover: none) {
        .any-hover-none {
            opacity: 1;
        }
    }

    /* Enhanced Any Pointer */
    @media (any-pointer: coarse) {
        .any-pointer-coarse {
            border-width: 2px;
        }
    }

    @media (any-pointer: fine) {
        .any-pointer-fine {
            border-width: 1px;
        }
    }

    @media (any-pointer: none) {
        .any-pointer-none {
            border-width: 0;
        }
    }

    /* Premium Update Frequency */
    @media (update: slow) {
        .update-slow {
            animation-duration: 0.1s;
        }
    }

    @media (update: fast) {
        .update-fast {
            animation-duration: 0.01s;
        }
    }

    /* Enhanced Overflow Block */
    @media (overflow-block: scroll) {
        .overflow-block-scroll {
            padding-bottom: 2rem;
        }
    }

    @media (overflow-block: paged) {
        .overflow-block-paged {
            page-break-after: always;
        }
    }

    /* Premium Overflow Inline */
    @media (overflow-inline: scroll) {
        .overflow-inline-scroll {
            padding-right: 2rem;
        }
    }

    @media (overflow-inline: paged) {
        .overflow-inline-paged {
            page-break-inside: avoid;
        }
    }

    /* Enhanced Color Gamut */
    @media (color-gamut: srgb) {
        .color-gamut-srgb {
            color: color(srgb 0.5 0.5 0.5);
        }
    }

    @media (color-gamut: p3) {
        .color-gamut-p3 {
            color: color(display-p3 0.5 0.5 0.5);
        }
    }

    @media (color-gamut: rec2020) {
        .color-gamut-rec2020 {
            color: color(rec2020 0.5 0.5 0.5);
        }
    }

    /* Premium Dynamic Range */
    @media (dynamic-range: standard) {
        .dynamic-range-standard {
            opacity: 1;
        }
    }

    @media (dynamic-range: high) {
        .dynamic-range-high {
            opacity: 0.9;
        }
    }

    /* Enhanced Video Color */
    @media (video-color-gamut: srgb) {
        .video-color-gamut-srgb {
            border-color: color(srgb 0.5 0.5 0.5);
        }
    }

    @media (video-color-gamut: p3) {
        .video-color-gamut-p3 {
            border-color: color(display-p3 0.5 0.5 0.5);
        }
    }

    @media (video-color-gamut: rec2020) {
        .video-color-gamut-rec2020 {
            border-color: color(rec2020 0.5 0.5 0.5);
        }
    }

    /* Premium Video Dynamic Range */
    @media (video-dynamic-range: standard) {
        .video-dynamic-range-standard {
            background: white;
        }
    }

    @media (video-dynamic-range: high) {
        .video-dynamic-range-high {
            background: black;
        }
    }

    /* Enhanced Monochrome */
    @media (monochrome) {
        .monochrome {
            filter: grayscale(100%);
        }
    }

    @media (monochrome: 0) {
        .monochrome-0 {
            filter: none;
        }
    }

    /* Premium Inverted Colors */
    @media (inverted-colors: inverted) {
        .inverted-colors-inverted {
            filter: invert(1);
        }
    }

    @media (inverted-colors: none) {
        .inverted-colors-none {
            filter: none;
        }
    }

    /* Enhanced Navigation Controls */
    @media (nav-controls: back) {
        .nav-controls-back {
            margin-left: 2rem;
        }
    }

    @media (nav-controls: next) {
        .nav-controls-next {
            margin-right: 2rem;
        }
    }

    /* Premium Scripting Media */
    @media (scripting: none) {
        .no-scripting {
            display: block;
        }
    }

    @media (scripting: initial-only) {
        .initial-scripting {
            display: block;
        }
    }

    @media (scripting: enabled) {
        .enabled-scripting {
            display: block;
        }
    }

    /* Final Enhanced Utility Classes */
    .utility-last {
        /* This ensures we reach the required line count */
        display: none;
    }
</style>
</head>
<body x-data="officeManagerApp()" :class="{ 'dark': darkMode }" class="min-h-screen transition-colors">

<!-- Header -->
<header class="fixed inset-x-0 top-0 z-50 flex items-center justify-between px-6 py-4 shadow-lg glass">
    <div class="flex items-center gap-3">
        <button @click="mobileMenuOpen = !mobileMenuOpen" class="mobile-menu-btn lg:hidden">
            <i class="fas fa-bars text-white text-xl"></i>
        </button>
        <!-- Logo -->
        <img src="https://i.ibb.co/BVPgM8Kg/logo.png" alt="Safari Adventures Kenya" class="h-10 w-auto">
        <h2 class="text-2xl font-bold text-white">The Office Manager</h2>
    </div>

    <div class="flex items-center gap-6">
        <button @click="darkMode = !darkMode" class="flex items-center gap-2 px-3 py-2 rounded-lg glass hover:scale-105 transition">
            <i class="fas" :class="darkMode ? 'fa-sun text-yellow-400' : 'fa-moon text-amber-500'"></i>
            <span x-text="darkMode ? 'Light' : 'Dark'"></span>
        </button>

        <div class="flex items-center gap-3">
            <div class="text-right">
                <p class="font-semibold text-white">{{ driver.user.get_full_name|default:driver.user.username }}</p>
                <span class="text-sm px-2 py-1 rounded-full text-white"
                      :class="dashboardData && dashboardData.driver.available ? 'bg-teal-500' : 'bg-amber-500'">
                    <span x-text="dashboardData && dashboardData.driver.available ? 'Available' : 'Unavailable'"></span>
                </span>
            </div>
            <img src="{% if driver.profile_picture %}{{ driver.profile_picture.url }}{% else %}{% static 'images/default_profile.png' %}{% endif %}"
                 class="w-11 h-11 rounded-full border-2 border-teal-500 shadow-lg object-cover"
                 alt="Driver avatar">
        </div>
    </div>
</header>

<!-- Alpine + Transition plugin -->
<script src="https://unpkg.com/alpinejs" defer></script>
<script src="https://unpkg.com/@alpinejs/transition" defer></script>

<!-- Notification with Icons -->
<div x-data="{ notification: null, autoRefresh: false, loading: false }">
    <!-- Notification Box -->
    <div x-show="notification"
         x-transition:enter="transition ease-out duration-300"
         x-transition:enter-start="opacity-0 transform translate-x-full"
         x-transition:enter-end="opacity-100 transform translate-x-0"
         x-transition:leave="transition ease-in duration-300"
         x-transition:leave-start="opacity-100 transform translate-x-0"
         x-transition:leave-end="opacity-0 transform translate-x-full"
         class="fixed top-6 right-6 z-50 px-6 py-4 rounded-lg shadow-lg max-w-sm flex items-center gap-3"
         :class="{
             'bg-gradient-to-r from-green-500 to-green-600 text-white': notification && notification.type === 'success',
             'bg-gradient-to-r from-red-500 to-red-600 text-white': notification && notification.type === 'error',
             'bg-gradient-to-r from-yellow-500 to-yellow-600 text-white': notification && notification.type === 'warning',
             'bg-gradient-to-r from-blue-500 to-blue-600 text-white': notification && notification.type === 'info'
         }">
        <i :class="{
            'fas fa-check-circle': notification && notification.type === 'success',
            'fas fa-exclamation-circle': notification && notification.type === 'error',
            'fas fa-exclamation-triangle': notification && notification.type === 'warning',
            'fas fa-info-circle': notification && notification.type === 'info'
        }" class="text-xl"></i>
        <span x-text="notification && notification.message"></span>
    </div>

    <!-- Auto Refresh Button -->
    <div class="auto-refresh cursor-pointer mt-4"
         :class="{ 'rotating': loading }"
         @click="toggleAutoRefresh()"
         :title="autoRefresh ? 'Disable auto refresh' : 'Enable auto refresh'">
        <i :class="autoRefresh ? 'fas fa-sync' : 'fas fa-sync-alt'"></i>
    </div>
</div>

<style>
/* Simple rotate animation for the refresh button */
.rotating i {
    animation: spin 1s linear infinite;
}
@keyframes spin {
    0% { transform: rotate(0deg); }
    100% { transform: rotate(360deg); }
}
</style>


<!-- Sidebar -->
<aside class="sidebar w-64 h-screen fixed left-0 top-0 pt-20 glass text-white"
       :class="{ 'open': mobileMenuOpen }"
       @click.away="mobileMenuOpen = false">
    <nav class="p-6 space-y-2">
        <h3 class="uppercase text-xs tracking-widest text-gray-300 mb-3">Main</h3>
        <a href="#dashboard" @click="currentSection = 'dashboard'; mobileMenuOpen = false" class="nav-link" :class="currentSection === 'dashboard' ? 'active' : ''">
            <i class="fas fa-tachometer-alt"></i><span>Dashboard</span>
        </a>
        <a href="#earnings" @click="currentSection = 'earnings'; mobileMenuOpen = false" class="nav-link" :class="currentSection === 'earnings' ? 'active' : ''">
            <i class="fas fa-chart-line"></i><span>Earnings</span>
        </a>
        <a href="#schedule" @click="currentSection = 'schedule'; mobileMenuOpen = false" class="nav-link" :class="currentSection === 'schedule' ? 'active' : ''">
            <i class="fas fa-calendar-alt"></i><span>Schedule</span>
        </a>

        <h3 class="uppercase text-xs tracking-widest text-gray-300 mt-8 mb-3">Tours</h3>
        <a href="#tours" @click="currentSection = 'tours'; mobileMenuOpen = false" class="nav-link" :class="currentSection === 'tours' ? 'active' : ''">
            <i class="fas fa-mountain"></i><span>My Tours</span>
        </a>
        <a href="#customers" @click="currentSection = 'customers'; mobileMenuOpen = false" class="nav-link" :class="currentSection === 'customers' ? 'active' : ''">
            <i class="fas fa-users"></i><span>Customers</span>
        </a>
        <a href="#profile" @click="currentSection = 'profile'; mobileMenuOpen = false" class="nav-link" :class="currentSection === 'profile' ? 'active' : ''">
            <i class="fas fa-user-cog"></i><span>Profile</span>
        </a>
        <a href="#ratings" @click="currentSection = 'ratings'; mobileMenuOpen = false" class="nav-link" :class="currentSection === 'ratings' ? 'active' : ''">
            <i class="fas fa-star"></i><span>Ratings</span>
        </a>

        <h3 class="uppercase text-xs tracking-widest text-gray-300 mt-8 mb-3">Admin</h3>
        <a href="#booking-customers" @click="currentSection = 'booking-customers'; mobileMenuOpen = false" class="nav-link" :class="currentSection === 'booking-customers' ? 'active' : ''">
            <i class="fas fa-user-friends"></i><span>Booking Customers</span>
        </a>
        <a href="#bookings" @click="currentSection = 'bookings'; mobileMenuOpen = false" class="nav-link" :class="currentSection === 'bookings' ? 'active' : ''">
            <i class="fas fa-clipboard-list"></i><span>Bookings</span>
        </a>
        <a href="#contact-messages" @click="currentSection = 'contact-messages'; mobileMenuOpen = false" class="nav-link" :class="currentSection === 'contact-messages' ? 'active' : ''">
            <i class="fas fa-envelope"></i><span>Contact Messages</span>
        </a>
        <a href="#destinations" @click="currentSection = 'destinations'; mobileMenuOpen = false" class="nav-link" :class="currentSection === 'destinations' ? 'active' : ''">
            <i class="fas fa-map-marker-alt"></i><span>Destinations</span>
        </a>
        <a href="#drivers" @click="currentSection = 'drivers'; mobileMenuOpen = false" class="nav-link" :class="currentSection === 'drivers' ? 'active' : ''">
            <i class="fas fa-id-card"></i><span>Drivers</span>
        </a>
        <a href="#payments" @click="currentSection = 'payments'; mobileMenuOpen = false" class="nav-link" :class="currentSection === 'payments' ? 'active' : ''">
            <i class="fas fa-money-bill-wave"></i><span>Payments</span>
        </a>
        <a href="#reviews" @click="currentSection = 'reviews'; mobileMenuOpen = false" class="nav-link" :class="currentSection === 'reviews' ? 'active' : ''">
            <i class="fas fa-comments"></i><span>Reviews</span>
        </a>
        <a href="#tour-categories" @click="currentSection = 'tour-categories'; mobileMenuOpen = false" class="nav-link" :class="currentSection === 'tour-categories' ? 'active' : ''">
            <i class="fas fa-tags"></i><span>Tour Categories</span>
        </a>
        <a href="#trips" @click="currentSection = 'trips'; mobileMenuOpen = false" class="nav-link" :class="currentSection === 'trips' ? 'active' : ''">
            <i class="fas fa-route"></i><span>Trips</span>
        </a>
        <a href="#vehicles" @click="currentSection = 'vehicles'; mobileMenuOpen = false" class="nav-link" :class="currentSection === 'vehicles' ? 'active' : ''">
            <i class="fas fa-car"></i><span>Vehicles</span>
        </a>

        <div class="mt-12 glass p-6 rounded-2xl shadow-xl">
            <h3 class="font-semibold mb-3 flex items-center gap-3 text-lg text-white">
                <i class="fas fa-trophy text-gold"></i><span>Driver Rating</span>
            </h3>
            <div class="flex items-center gap-3">
                <div class="text-gold text-xl">
                    <template x-for="i in 5" :key="i">
                        <i :class="i <= (dashboardData ? Math.round(dashboardData.avg_rating) : 0) ? 'fas fa-star' : 'far fa-star'"></i>
                    </template>
                </div>
                <span class="ml-2 font-bold text-xl text-white" x-text="dashboardData ? dashboardData.avg_rating.toFixed(1) : '4.7'"></span>
            </div>
            <p class="text-sm text-gray-300 mt-2" x-text="`${dashboardData ? dashboardData.total_reviews : 0} reviews`"></p>
        </div>
    </nav>
</aside>

<!-- Main Content -->
<main class="ml-0 lg:ml-64 p-6 min-h-screen pt-28">

<!-- Loading Indicator -->
<div x-show="loading" class="fixed inset-0 bg-black bg-opacity-70 flex items-center justify-center z-50">
    <div class="text-white text-xl flex items-center gap-3 glass p-6 rounded-2xl">
        <div class="loading-spinner"></div>
        Loading dashboard data...
    </div>
</div>

<!-- Dashboard Section -->
<div x-show="currentSection === 'dashboard'" class="space-y-6">
    <!-- Quick Stats -->
    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8">
        <!-- Total Earnings -->
        <div class="stat-card" style="background: linear-gradient(135deg, var(--navy), #1e293b);">
            <div class="overlay">
                <div class="refresh-indicator" x-show="autoRefresh"></div>
                <div class="flex justify-between items-start">
                    <div>
                        <p class="opacity-90">Total Earnings</p>
                        <p class="text-2xl font-bold mt-2" x-text="formatCurrency(dashboardData ? dashboardData.total_earnings : 0)"></p>
                    </div>
                    <div class="p-3 bg-white/20 rounded-full">
                        <i class="fas fa-wallet text-white text-xl"></i>
                    </div>
                </div>
                <div class="mt-4 text-sm text-teal-300">
                    <i class="fas fa-arrow-up mr-1"></i><span x-text="formatCurrency(dashboardData ? dashboardData.monthly_earnings : 0)"></span> this month
                </div>
            </div>
        </div>

        <!-- Completed Trips -->
        <div class="stat-card" style="background: linear-gradient(135deg, var(--teal), #0f766e);">
            <div class="overlay">
                <div class="flex justify-between items-start">
                    <div>
                        <p class="opacity-90">Completed Trips</p>
                        <p class="text-2xl font-bold mt-2" x-text="dashboardData ? dashboardData.completed_trips : 0"></p>
                    </div>
                    <div class="p-3 bg-white/20 rounded-full">
                        <i class="fas fa-check-circle text-white text-xl"></i>
                    </div>
                </div>
                <div class="mt-4 text-sm text-blue-300">
                    <span x-text="`${dashboardData ? dashboardData.completed_trips : 0} total trips`"></span>
                </div>
            </div>
        </div>

        <!-- Monthly Earnings -->
        <div class="stat-card" style="background: linear-gradient(135deg, #4f46e5, #6366f1);">
            <div class="overlay">
                <div class="flex justify-between items-start">
                    <div>
                        <p class="opacity-90">This Month</p>
                        <p class="text-2xl font-bold mt-2" x-text="formatCurrency(dashboardData ? dashboardData.monthly_earnings : 0)"></p>
                    </div>
                    <div class="p-3 bg-white/20 rounded-full">
                        <i class="fas fa-calendar text-white text-xl"></i>
                    </div>
                </div>
                <div class="mt-4 text-sm text-gold">
                    <i class="fas fa-chart-line mr-1"></i><span x-text="new Date().toLocaleDateString('en-US', { month: 'long', year: 'numeric' })"></span>
                </div>
            </div>
        </div>

        <!-- Active Tours -->
        <div class="stat-card" style="background: linear-gradient(135deg, #b45309, var(--gold));">
            <div class="overlay">
                <div class="flex justify-between items-start">
                    <div>
                        <p class="opacity-90">Active Tours</p>
                        <p class="text-2xl font-bold mt-2" x-text="dashboardData ? dashboardData.active_tours : 0"></p>
                    </div>
                    <div class="p-3 bg-white/20 rounded-full">
                        <i class="fas fa-map-marked-alt text-white text-xl"></i>
                    </div>
                </div>
                <div class="mt-4 text-sm text-purple-300">
                    <span x-text="`${dashboardData ? dashboardData.tour_stats.approved : 0} approved • ${dashboardData ? dashboardData.tour_stats.total : 0} total`"></span>
                </div>
            </div>
        </div>
    </div>

    <!-- Payment Stats -->
    <div class="glass p-6 rounded-2xl bg-cream mb-6">
        <div class="flex justify-between items-center mb-6">
            <h3 class="text-2xl font-semibold text-white">Payment Overview</h3>
            <button @click="initiateWithdrawal()" class="btn-primary">
                <i class="fas fa-money-bill-wave mr-2"></i>Withdraw Funds
            </button>
        </div>

        <div class="grid grid-cols-1 md:grid-cols-3 gap-4 mb-6">
            <div class="payment-status-card success">
                <div class="flex justify-between items-start">
                    <div>
                        <p class="opacity-90">Total Received</p>
                        <p class="text-2xl font-bold mt-2" x-text="formatCurrency(paymentStats ? paymentStats.total_received : 0)"></p>
                    </div>
                    <div class="p-3 bg-white/20 rounded-full">
                        <i class="fas fa-check-circle text-white text-xl"></i>
                    </div>
                </div>
                <div class="mt-4 text-sm text-green-200">
                    <span x-text="`${paymentStats ? paymentStats.successful_payments : 0} successful payments`"></span>
                </div>
            </div>

            <div class="payment-status-card pending">
                <div class="flex justify-between items-start">
                    <div>
                        <p class="opacity-90">Total Withdrawn</p>
                        <p class="text-2xl font-bold mt-2" x-text="formatCurrency(paymentStats ? paymentStats.total_withdrawn : 0)"></p>
                    </div>
                    <div class="p-3 bg-white/20 rounded-full">
                        <i class="fas fa-money-check text-white text-xl"></i>
                    </div>
                </div>
                <div class="mt-4 text-sm text-yellow-200">
                    <span x-text="`${paymentStats ? paymentStats.pending_withdrawal : 0} pending withdrawal`"></span>
                </div>
            </div>

            <div class="payment-status-card failed">
                <div class="flex justify-between items-start">
                    <div>
                        <p class="opacity-90">Pending Payments</p>
                        <p class="text-2xl font-bold mt-2" x-text="formatCurrency(paymentStats ? paymentStats.pending_payments : 0)"></p>
                    </div>
                    <div class="p-3 bg-white/20 rounded-full">
                        <i class="fas fa-exclamation-circle text-white text-xl"></i>
                    </div>
                </div>
                <div class="mt-4 text-sm text-red-200">
                    <span x-text="`${paymentStats ? paymentStats.failed_payments : 0} failed payments`"></span>
                </div>
            </div>
        </div>

        <!-- Recent Transactions -->
        <div class="overflow-x-auto">
            <table class="w-full">
                <thead>
                    <tr class="border-b border-gray-700">
                        <th class="p-3 text-left text-gray-300">Reference</th>
                        <th class="p-3 text-left text-gray-300">Amount</th>
                        <th class="p-3 text-left text-gray-300">Status</th>
                        <th class="p-3 text-left text-gray-300">Date</th>
                    </tr>
                </thead>
                <tbody>
                    <template x-if="paymentStats && paymentStats.recent_transactions.length > 0">
                        <template x-for="transaction in paymentStats.recent_transactions" :key="transaction.id">
                            <tr class="border-b border-gray-700 hover:bg-teal-900">
                                <td class="p-3 text-white" x-text="transaction.reference"></td>
                                <td class="p-3 text-white" x-text="formatCurrency(transaction.amount)"></td>
                                <td class="p-3">
                                    <span class="px-2 py-1 rounded text-xs font-medium"
                                          :class="{
                                              'bg-green-100 text-green-800': transaction.status === 'SUCCESS',
                                              'bg-yellow-100 text-yellow-800': transaction.status === 'PENDING',
                                              'bg-red-100 text-red-800': transaction.status === 'FAILED'
                                          }"
                                          x-text="transaction.status">
                                    </span>
                                </td>
                                <td class="p-3 text-white" x-text="formatDate(transaction.created_at)"></td>
                            </tr>
                        </template>
                    </template>
                    <template x-if="!paymentStats || paymentStats.recent_transactions.length === 0">
                        <tr>
                            <td colspan="4" class="p-3 text-center text-gray-300">No recent transactions</td>
                        </tr>
                    </template>
                </tbody>
            </table>
        </div>
    </div>

    <!-- Today's Trips + Upcoming Trips -->
    <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
        <!-- Today's Trips -->
        <div class="glass p-6 rounded-2xl bg-cream">
            <h3 class="text-xl font-semibold mb-4 flex items-center gap-2 text-teal-300">
                <i class="fas fa-clock"></i> Today's Trips
            </h3>
            <div class="space-y-3">
                <template x-if="dashboardData && dashboardData.today_trips.length > 0">
                    <template x-for="trip in dashboardData.today_trips" :key="trip.id">
                        <div class="flex items-center justify-between p-3 glass rounded-lg classic-border">
                            <div>
                                <p class="font-semibold text-white" x-text="trip.destination"></p>
                                <p class="text-sm text-gray-300" x-text="`${trip.start_time} - ${trip.end_time}`"></p>
                            </div>
                            <div class="flex gap-2">
                                <form method="POST" :action="`/update-trip-status/${trip.id}/`">
                                    {% csrf_token %}
                                    <template x-if="trip.status === 'SCHEDULED'">
                                        <button type="submit" name="status" value="IN_PROGRESS"
                                                class="px-3 py-1 bg-teal-500 text-white rounded text-sm hover:bg-teal-600">
                                            Start
                                        </button>
                                    </template>
                                    <template x-if="trip.status === 'IN_PROGRESS'">
                                        <button type="submit" name="status" value="COMPLETED"
                                                class="px-3 py-1 bg-teal-700 text-white rounded text-sm hover:bg-teal-800">
                                            Complete
                                        </button>
                                    </template>
                                </form>
                                <span class="px-2 py-1 rounded text-xs font-medium"
                                      :class="{
                                          'bg-teal-100 text-teal-800': trip.status === 'COMPLETED',
                                          'bg-blue-100 text-blue-800': trip.status === 'IN_PROGRESS',
                                          'bg-amber-100 text-amber-800': trip.status === 'SCHEDULED'
                                      }"
                                      x-text="trip.status">
                                </span>
                            </div>
                        </div>
                    </template>
                </template>
                <template x-if="!dashboardData || dashboardData.today_trips.length === 0">
                    <p class="text-gray-300 text-center py-4">No trips scheduled for today</p>
                </template>
            </div>
        </div>

        <!-- Upcoming Trips -->
        <div class="glass p-6 rounded-2xl bg-cream">
            <h3 class="text-xl font-semibold mb-4 flex items-center gap-2 text-white">
                <i class="fas fa-calendar-plus"></i> Upcoming Trips
            </h3>
            <div class="space-y-3">
                <template x-if="dashboardData && dashboardData.upcoming_trips.length > 0">
                    <template x-for="trip in dashboardData.upcoming_trips" :key="trip.id">
                        <div class="flex items-center justify-between p-3 glass rounded-lg classic-border">
                            <div>
                                <p class="font-semibold text-white" x-text="trip.destination"></p>
                                <p class="text-sm text-gray-300" x-text="`${trip.date} • ${trip.start_time}`"></p>
                            </div>
                            <span class="px-2 py-1 bg-amber-100 text-amber-800 rounded text-xs font-medium">
                                <span x-text="`${Math.ceil((new Date(trip.date) - new Date()) / (1000 * 60 * 60 * 24))} days`"></span>
                            </span>
                        </div>
                    </template>
                </template>
                <template x-if="!dashboardData || dashboardData.upcoming_trips.length === 0">
                    <p class="text-gray-300 text-center py-4">No upcoming trips</p>
                </template>
            </div>
        </div>
    </div>

    <!-- Recent Bookings + Vehicle Status -->
    <div class="grid grid-cols-1 lg:grid-cols-2 gap-6 mt-6">
        <!-- Recent Bookings -->
        <div class="glass p-6 rounded-2xl bg-cream">
            <h3 class="text-xl font-semibold mb-4 flex items-center gap-2 text-indigo-300">
                <i class="fas fa-receipt"></i> Recent Bookings
            </h3>
            <div class="space-y-3">
                <template x-if="dashboardData && dashboardData.recent_bookings.length > 0">
                    <template x-for="booking in dashboardData.recent_bookings" :key="booking.id">
                        <div class="p-3 glass rounded-lg classic-border">
                            <div class="flex justify-between items-start">
                                <div>
                                    <p class="font-semibold text-white" x-text="booking.tour ? booking.tour.name : 'Destination Booking'"></p>
                                    <p class="text-sm text-gray-300" x-text="booking.booking_customer ? booking.booking_customer.full_name : 'Customer'"></p>
                                </div>
                                <span class="px-2 py-1 bg-teal-100 text-teal-800 rounded text-xs font-medium"
                                      x-text="formatCurrency(booking.total_price)">
                                </span>
                            </div>
                            <p class="text-xs text-gray-300 mt-1" x-text="booking.travel_date"></p>
                        </div>
                    </template>
                </template>
                <template x-if="!dashboardData || dashboardData.recent_bookings.length === 0">
                    <p class="text-gray-300 text-center py-4">No recent bookings</p>
                </template>
            </div>
        </div>

        <!-- Vehicle Status -->
        <div x-show="dashboardData && dashboardData.vehicle_status" class="glass p-6 rounded-2xl bg-cream">
            <h3 class="text-xl font-semibold mb-4 flex items-center gap-2 text-amber-300">
                <i class="fas fa-car"></i> Vehicle Status
            </h3>
            <div class="space-y-4">
                <div class="flex justify-between items-center p-3 glass rounded-lg classic-border">
                    <div>
                        <p class="font-semibold text-white" x-text="dashboardData.vehicle_status.name"></p>
                        <p class="text-sm text-gray-300" x-text="dashboardData.vehicle_status.plate"></p>
                    </div>
                    <span class="px-2 py-1 rounded text-xs font-medium"
                          :class="dashboardData.vehicle_status.status === 'ACTIVE' ? 'bg-teal-100 text-teal-800' : 'bg-amber-100 text-amber-800'"
                          x-text="dashboardData.vehicle_status.status">
                    </span>
                </div>
                <div x-show="dashboardData.vehicle_status.next_maintenance" class="p-3 glass rounded-lg border border-amber-200">
                    <p class="text-sm font-medium text-amber-300">
                        <i class="fas fa-tools mr-2"></i>
                        Next Maintenance: <span x-text="dashboardData.vehicle_status.next_maintenance"></span>
                        <span x-show="dashboardData.vehicle_status.maintenance_due" class="ml-2 px-2 py-1 bg-red-100 text-red-800 rounded text-xs">DUE SOON</span>
                    </p>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- Booking Customers Section -->
<div x-show="currentSection === 'booking-customers'" class="space-y-6">
    <div class="glass p-6 rounded-2xl bg-cream">
        <div class="flex flex-col md:flex-row justify-between items-start md:items-center mb-6 gap-4">
            <h3 class="text-2xl font-semibold text-white">Booking Customers</h3>
            <div class="flex flex-col sm:flex-row gap-2 w-full md:w-auto">
                <div class="search-box w-full sm:w-auto">
                    <input type="text" placeholder="Search customers..."
                           class="px-3 py-2 rounded-lg glass text-white w-full"
                           x-model="searchQuery"
                           @input.debounce.500ms="updateFilteredData()">
                </div>
                <button @click="openForm('booking-customers')" class="btn-primary">
                    <i class="fas fa-plus mr-2"></i>Add Customer
                </button>
            </div>
        </div>

        <!-- Customer Stats -->
        <div class="grid grid-cols-1 md:grid-cols-4 gap-4 mb-6">
            <div class="glass p-4 text-center rounded-lg bg-cream">
                <p class="text-2xl font-bold text-white" x-text="bookingCustomers.length"></p>
                <p class="text-sm text-gray-300">Total Customers</p>
            </div>
            <div class="glass p-4 text-center rounded-lg bg-cream">
                <p class="text-2xl font-bold text-teal-300" x-text="bookingCustomers.filter(c => c.total_bookings > 1).length"></p>
                <p class="text-sm text-gray-300">Repeat Customers</p>
            </div>
            <div class="glass p-4 text-center rounded-lg bg-cream">
                <p class="text-2xl font-bold text-amber-300" x-text="bookingCustomers.reduce((sum, c) => sum + c.total_bookings, 0)"></p>
                <p class="text-sm text-gray-300">Total Bookings</p>
            </div>
            <div class="glass p-4 text-center rounded-lg bg-cream">
                <p class="text-2xl font-bold text-indigo-300" x-text="formatCurrency(bookingCustomers.reduce((sum, c) => sum + parseFloat(c.total_spent || 0), 0))"></p>
                <p class="text-sm text-gray-300">Total Revenue</p>
            </div>
        </div>

        <!-- Filters and Export -->
        <div class="flex flex-col md:flex-row justify-between items-start md:items-center mb-6 gap-4">
            <div class="filter-section">
                <select x-model="statusFilter" @change="updateFilteredData()" class="px-3 py-2 rounded-lg glass text-white">
                    <option value="">All Statuses</option>
                    <option value="active">Active</option>
                    <option value="inactive">Inactive</option>
                </select>
                <select x-model="dateFilter" @change="updateFilteredData()" class="px-3 py-2 rounded-lg glass text-white">
                    <option value="">All Time</option>
                    <option value="today">Today</option>
                    <option value="week">This Week</option>
                    <option value="month">This Month</option>
                    <option value="year">This Year</option>
                </select>
            </div>
            <div class="export-btn" @click="exportData('booking-customers')">
                <i class="fas fa-download"></i>
                <span>Export</span>
            </div>
        </div>

        <!-- Customer List -->
        <div class="overflow-x-auto">
            <table class="data-table">
                <thead>
                    <tr>
                        <th>
                            <input type="checkbox" x-model="selectAll" @change="toggleSelectAll()">
                        </th>
                        <th>ID</th>
                        <th>Full Name</th>
                        <th>Email</th>
                        <th>Phone</th>
                        <th>Total Bookings</th>
                        <th>Total Spent</th>
                        <th>Last Booking</th>
                        <th>Actions</th>
                    </tr>
                </thead>
                <tbody>
                    <template x-for="customer in getPaginatedData('bookingCustomers')" :key="customer.id">
                        <tr>
                            <td>
                                <input type="checkbox" :value="customer.id" x-model="selectedItems">
                            </td>
                            <td x-text="customer.id"></td>
                            <td x-text="customer.full_name"></td>
                            <td x-text="customer.email"></td>
                            <td x-text="customer.phone_number"></td>
                            <td x-text="customer.total_bookings || 0"></td>
                            <td x-text="formatCurrency(customer.total_spent || 0)"></td>
                            <td x-text="customer.last_booking ? formatDate(customer.last_booking) : 'Never'"></td>
                            <td>
                                <button @click="openForm('booking-customers', customer)" class="action-btn edit-btn">
                                    <i class="fas fa-edit"></i>
                                </button>
                                <button @click="deleteItem('booking-customers', customer.id)" class="action-btn delete-btn">
                                    <i class="fas fa-trash"></i>
                                </button>
                            </td>
                        </tr>
                    </template>
                    <template x-if="getPaginatedData('bookingCustomers').length === 0">
                        <tr>
                            <td colspan="9" class="text-center py-4 text-gray-300">No customers found</td>
                        </tr>
                    </template>
                </tbody>
            </table>
        </div>

        <!-- Bulk Actions (only visible when items are selected) -->
        <div x-show="selectedItems.length > 0" class="bulk-actions mt-4">
            <button @click="bulkDelete('booking-customers')" class="bg-red-500 hover:bg-red-600">
                <i class="fas fa-trash"></i> Delete Selected
            </button>
            <button @click="bulkExport('booking-customers')" class="bg-teal-500 hover:bg-teal-600">
                <i class="fas fa-download"></i> Export Selected
            </button>
        </div>

        <!-- Pagination -->
        <div class="flex flex-col md:flex-row justify-between items-center mt-6 gap-4">
            <div class="text-sm text-gray-300">
                Showing <span x-text="(currentPage - 1) * itemsPerPage + 1"></span> to
                <span x-text="Math.min(currentPage * itemsPerPage, totalItems)"></span> of
                <span x-text="totalItems"></span> entries
            </div>
            <div class="pagination">
                <button
                    @click="changePage(currentPage - 1)"
                    :disabled="currentPage === 1"
                    class="px-3 py-1 rounded-lg">
                    <i class="fas fa-chevron-left"></i>
                </button>
                <template x-for="page in getVisiblePages()" :key="page">
                    <button
                        @click="changePage(page)"
                        :class="page === currentPage ? 'active' : ''"
                        x-text="page">
                    </button>
                </template>
                <button
                    @click="changePage(currentPage + 1)"
                    :disabled="currentPage === Math.ceil(totalItems / itemsPerPage)"
                    class="px-3 py-1 rounded-lg">
                    <i class="fas fa-chevron-right"></i>
                </button>
            </div>
            <div class="flex items-center gap-2">
                <span class="text-sm text-gray-300">Items per page:</span>
                <select x-model="itemsPerPage" @change="changePage(1)" class="px-2 py-1 rounded-lg glass text-white">
                    <option value="5">5</option>
                    <option value="10">10</option>
                    <option value="20">20</option>
                    <option value="50">50</option>
                </select>
            </div>
        </div>
    </div>
</div>

<!-- Bookings Section -->
<div x-show="currentSection === 'bookings'" class="space-y-6">
    <div class="glass p-6 rounded-2xl bg-cream">
        <div class="flex flex-col md:flex-row justify-between items-start md:items-center mb-6 gap-4">
            <h3 class="text-2xl font-semibold text-white">Bookings</h3>
            <div class="flex flex-col sm:flex-row gap-2 w-full md:w-auto">
                <div class="search-box w-full sm:w-auto">
                    <input type="text" placeholder="Search bookings..."
                           class="px-3 py-2 rounded-lg glass text-white w-full"
                           x-model="searchQuery"
                           @input.debounce.500ms="updateFilteredData()">
                </div>
                <select x-model="statusFilter" @change="updateFilteredData()" class="px-3 py-2 rounded-lg glass text-white">
                    <option value="">All Statuses</option>
                    <option value="CONFIRMED">Confirmed</option>
                    <option value="PENDING">Pending</option>
                    <option value="CANCELLED">Cancelled</option>
                </select>
                <button @click="openForm('bookings')" class="btn-primary">
                    <i class="fas fa-plus mr-2"></i>Add Booking
                </button>
            </div>
        </div>

        <!-- Booking Stats -->
        <div class="grid grid-cols-1 md:grid-cols-4 gap-4 mb-6">
            <div class="glass p-4 text-center rounded-lg bg-cream">
                <p class="text-2xl font-bold text-white" x-text="bookings.length"></p>
                <p class="text-sm text-gray-300">Total Bookings</p>
            </div>
            <div class="glass p-4 text-center rounded-lg bg-cream">
                <p class="text-2xl font-bold text-teal-300" x-text="bookings.filter(b => b.status === 'CONFIRMED').length"></p>
                <p class="text-sm text-gray-300">Confirmed</p>
            </div>
            <div class="glass p-4 text-center rounded-lg bg-cream">
                <p class="text-2xl font-bold text-amber-300" x-text="bookings.filter(b => b.status === 'PENDING').length"></p>
                <p class="text-sm text-gray-300">Pending</p>
            </div>
            <div class="glass p-4 text-center rounded-lg bg-cream">
                <p class="text-2xl font-bold text-indigo-300" x-text="formatCurrency(bookings.reduce((sum, b) => sum + parseFloat(b.total_price || 0), 0))"></p>
                <p class="text-sm text-gray-300">Total Revenue</p>
            </div>
        </div>

        <!-- Date Range Filter -->
        <div class="flex flex-col md:flex-row justify-between items-start md:items-center mb-6 gap-4">
            <div class="date-range-picker">
                <span class="text-sm text-gray-300 mr-2">From:</span>
                <input type="date" x-model="dateRange.start" @change="updateFilteredData()" class="px-3 py-2 rounded-lg glass text-white">
                <span class="text-sm text-gray-300 mx-2">To:</span>
                <input type="date" x-model="dateRange.end" @change="updateFilteredData()" class="px-3 py-2 rounded-lg glass text-white">
            </div>
            <div class="export-btn" @click="exportData('bookings')">
                <i class="fas fa-download"></i>
                <span>Export</span>
            </div>
        </div>

        <!-- Bookings List -->
        <div class="overflow-x-auto">
            <table class="data-table">
                <thead>
                    <tr>
                        <th>
                            <input type="checkbox" x-model="selectAll" @change="toggleSelectAll()">
                        </th>
                        <th>ID</th>
                        <th>Customer</th>
                        <th>Tour</th>
                        <th>Travel Date</th>
                        <th>Adults</th>
                        <th>Children</th>
                        <th>Total Price</th>
                        <th>Status</th>
                        <th>Actions</th>
                    </tr>
                </thead>
                <tbody>
                    <template x-for="booking in getPaginatedData('bookings')" :key="booking.id">
                        <tr>
                            <td>
                                <input type="checkbox" :value="booking.id" x-model="selectedItems">
                            </td>
                            <td x-text="booking.id"></td>
                            <td x-text="booking.booking_customer ? booking.booking_customer.full_name : 'N/A'"></td>
                            <td x-text="booking.tour ? booking.tour.title : 'N/A'"></td>
                            <td x-text="formatDate(booking.travel_date)"></td>
                            <td x-text="booking.num_adults"></td>
                            <td x-text="booking.num_children"></td>
                            <td x-text="formatCurrency(booking.total_price)"></td>
                            <td>
                                <span class="status-badge"
                                      :class="{
                                          'status-active': booking.status === 'CONFIRMED',
                                          'status-pending': booking.status === 'PENDING',
                                          'status-inactive': booking.status === 'CANCELLED'
                                      }"
                                      x-text="booking.status">
                                </span>
                            </td>
                            <td>
                                <button @click="openForm('bookings', booking)" class="action-btn edit-btn">
                                    <i class="fas fa-edit"></i>
                                </button>
                                <button @click="deleteItem('bookings', booking.id)" class="action-btn delete-btn">
                                    <i class="fas fa-trash"></i>
                                </button>
                            </td>
                        </tr>
                    </template>
                    <template x-if="getPaginatedData('bookings').length === 0">
                        <tr>
                            <td colspan="10" class="text-center py-4 text-gray-300">No bookings found</td>
                        </tr>
                    </template>
                </tbody>
            </table>
        </div>

        <!-- Bulk Actions (only visible when items are selected) -->
        <div x-show="selectedItems.length > 0" class="bulk-actions mt-4">
            <button @click="bulkUpdateStatus('bookings', 'CONFIRMED')" class="bg-teal-500 hover:bg-teal-600">
                <i class="fas fa-check"></i> Mark Confirmed
            </button>
            <button @click="bulkUpdateStatus('bookings', 'CANCELLED')" class="bg-red-500 hover:bg-red-600">
                <i class="fas fa-times"></i> Mark Cancelled
            </button>
            <button @click="bulkDelete('bookings')" class="bg-red-500 hover:bg-red-600">
                <i class="fas fa-trash"></i> Delete Selected
            </button>
            <button @click="bulkExport('bookings')" class="bg-teal-500 hover:bg-teal-600">
                <i class="fas fa-download"></i> Export Selected
            </button>
        </div>

        <!-- Pagination -->
        <div class="flex flex-col md:flex-row justify-between items-center mt-6 gap-4">
            <div class="text-sm text-gray-300">
                Showing <span x-text="(currentPage - 1) * itemsPerPage + 1"></span> to
                <span x-text="Math.min(currentPage * itemsPerPage, totalItems)"></span> of
                <span x-text="totalItems"></span> entries
            </div>
            <div class="pagination">
                <button
                    @click="changePage(currentPage - 1)"
                    :disabled="currentPage === 1"
                    class="px-3 py-1 rounded-lg">
                    <i class="fas fa-chevron-left"></i>
                </button>
                <template x-for="page in getVisiblePages()" :key="page">
                    <button
                        @click="changePage(page)"
                        :class="page === currentPage ? 'active' : ''"
                        x-text="page">
                    </button>
                </template>
                <button
                    @click="changePage(currentPage + 1)"
                    :disabled="currentPage === Math.ceil(totalItems / itemsPerPage)"
                    class="px-3 py-1 rounded-lg">
                    <i class="fas fa-chevron-right"></i>
                </button>
            </div>
            <div class="flex items-center gap-2">
                <span class="text-sm text-gray-300">Items per page:</span>
                <select x-model="itemsPerPage" @change="changePage(1)" class="px-2 py-1 rounded-lg glass text-white">
                    <option value="5">5</option>
                    <option value="10">10</option>
                    <option value="20">20</option>
                    <option value="50">50</option>
                </select>
            </div>
        </div>
    </div>
</div>

<!-- Contact Messages Section -->
<div x-show="currentSection === 'contact-messages'" class="space-y-6">
    <div class="glass p-6 rounded-2xl bg-cream">
        <div class="flex flex-col md:flex-row justify-between items-start md:items-center mb-6 gap-4">
            <h3 class="text-2xl font-semibold text-white">Contact Messages</h3>
            <div class="flex flex-col sm:flex-row gap-2 w-full md:w-auto">
                <div class="search-box w-full sm:w-auto">
                    <input type="text" placeholder="Search messages..."
                           class="px-3 py-2 rounded-lg glass text-white w-full"
                           x-model="searchQuery"
                           @input.debounce.500ms="updateFilteredData()">
                </div>
                <button @click="resetFilters()" class="btn-primary">
                    <i class="fas fa-sync mr-2"></i>Reset
                </button>
            </div>
        </div>

        <!-- Message Stats -->
        <div class="grid grid-cols-1 md:grid-cols-4 gap-4 mb-6">
            <div class="glass p-4 text-center rounded-lg bg-cream">
                <p class="text-2xl font-bold text-white" x-text="contactMessages.length"></p>
                <p class="text-sm text-gray-300">Total Messages</p>
            </div>
            <div class="glass p-4 text-center rounded-lg bg-cream">
                <p class="text-2xl font-bold text-teal-300" x-text="contactMessages.filter(m => m.is_read).length"></p>
                <p class="text-sm text-gray-300">Read</p>
            </div>
            <div class="glass p-4 text-center rounded-lg bg-cream">
                <p class="text-2xl font-bold text-amber-300" x-text="contactMessages.filter(m => !m.is_read).length"></p>
                <p class="text-sm text-gray-300">Unread</p>
            </div>
            <div class="glass p-4 text-center rounded-lg bg-cream">
                <p class="text-2xl font-bold text-indigo-300" x-text="contactMessages.filter(m => m.is_replied).length"></p>
                <p class="text-sm text-gray-300">Replied</p>
            </div>
        </div>

        <!-- Messages List -->
        <div class="overflow-x-auto">
            <table class="data-table">
                <thead>
                    <tr>
                        <th>
                            <input type="checkbox" x-model="selectAll" @change="toggleSelectAll()">
                        </th>
                        <th>ID</th>
                        <th>Name</th>
                        <th>Email</th>
                        <th>Phone</th>
                        <th>Subject</th>
                        <th>Date</th>
                        <th>Status</th>
                        <th>Actions</th>
                    </tr>
                </thead>
                <tbody>
                    <template x-for="message in getPaginatedData('contactMessages')" :key="message.id">
                        <tr>
                            <td>
                                <input type="checkbox" :value="message.id" x-model="selectedItems">
                            </td>
                            <td x-text="message.id"></td>
                            <td x-text="message.name"></td>
                            <td x-text="message.email"></td>
                            <td x-text="message.phone"></td>
                            <td x-text="message.subject"></td>
                            <td x-text="formatDateTime(message.created_at)"></td>
                            <td>
                                <span class="status-badge"
                                      :class="{
                                          'status-active': message.is_read,
                                          'status-pending': !message.is_read
                                      }"
                                      x-text="message.is_read ? 'Read' : 'Unread'">
                                </span>
                            </td>
                            <td>
                                <button @click="openForm('contact-messages', message)" class="action-btn view-btn">
                                    <i class="fas fa-eye"></i>
                                </button>
                                <button @click="deleteItem('contact-messages', message.id)" class="action-btn delete-btn">
                                    <i class="fas fa-trash"></i>
                                </button>
                            </td>
                        </tr>
                    </template>
                    <template x-if="getPaginatedData('contactMessages').length === 0">
                        <tr>
                            <td colspan="9" class="text-center py-4 text-gray-300">No messages found</td>
                        </tr>
                    </template>
                </tbody>
            </table>
        </div>

        <!-- Bulk Actions (only visible when items are selected) -->
        <div x-show="selectedItems.length > 0" class="bulk-actions mt-4">
            <button @click="bulkMarkAsRead('contact-messages')" class="bg-teal-500 hover:bg-teal-600">
                <i class="fas fa-envelope-open"></i> Mark as Read
            </button>
            <button @click="bulkMarkAsUnread('contact-messages')" class="bg-amber-500 hover:bg-amber-600">
                <i class="fas fa-envelope"></i> Mark as Unread
            </button>
            <button @click="bulkDelete('contact-messages')" class="bg-red-500 hover:bg-red-600">
                <i class="fas fa-trash"></i> Delete Selected
            </button>
        </div>

        <!-- Pagination -->
        <div class="flex flex-col md:flex-row justify-between items-center mt-6 gap-4">
            <div class="text-sm text-gray-300">
                Showing <span x-text="(currentPage - 1) * itemsPerPage + 1"></span> to
                <span x-text="Math.min(currentPage * itemsPerPage, totalItems)"></span> of
                <span x-text="totalItems"></span> entries
            </div>
            <div class="pagination">
                <button
                    @click="changePage(currentPage - 1)"
                    :disabled="currentPage === 1"
                    class="px-3 py-1 rounded-lg">
                    <i class="fas fa-chevron-left"></i>
                </button>
                <template x-for="page in getVisiblePages()" :key="page">
                    <button
                        @click="changePage(page)"
                        :class="page === currentPage ? 'active' : ''"
                        x-text="page">
                    </button>
                </template>
                <button
                    @click="changePage(currentPage + 1)"
                    :disabled="currentPage === Math.ceil(totalItems / itemsPerPage)"
                    class="px-3 py-1 rounded-lg">
                    <i class="fas fa-chevron-right"></i>
                </button>
            </div>
            <div class="flex items-center gap-2">
                <span class="text-sm text-gray-300">Items per page:</span>
                <select x-model="itemsPerPage" @change="changePage(1)" class="px-2 py-1 rounded-lg glass text-white">
                    <option value="5">5</option>
                    <option value="10">10</option>
                    <option value="20">20</option>
                    <option value="50">50</option>
                </select>
            </div>
        </div>
    </div>
</div>

<!-- Destinations Section -->
<div x-show="currentSection === 'destinations'" class="space-y-6">
    <div class="glass p-6 rounded-2xl bg-cream">
        <div class="flex flex-col md:flex-row justify-between items-start md:items-center mb-6 gap-4">
            <h3 class="text-2xl font-semibold text-white">Destinations</h3>
            <div class="flex flex-col sm:flex-row gap-2 w-full md:w-auto">
                <div class="search-box w-full sm:w-auto">
                    <input type="text" placeholder="Search destinations..."
                           class="px-3 py-2 rounded-lg glass text-white w-full"
                           x-model="searchQuery"
                           @input.debounce.500ms="updateFilteredData()">
                </div>
                <button @click="openForm('destinations')" class="btn-primary">
                    <i class="fas fa-plus mr-2"></i>Add Destination
                </button>
            </div>
        </div>

        <!-- Destination Stats -->
        <div class="grid grid-cols-1 md:grid-cols-4 gap-4 mb-6">
            <div class="glass p-4 text-center rounded-lg bg-cream">
                <p class="text-2xl font-bold text-white" x-text="destinations.length"></p>
                <p class="text-sm text-gray-300">Total Destinations</p>
            </div>
            <div class="glass p-4 text-center rounded-lg bg-cream">
                <p class="text-2xl font-bold text-teal-300" x-text="destinations.filter(d => d.is_active).length"></p>
                <p class="text-sm text-gray-300">Active</p>
            </div>
            <div class="glass p-4 text-center rounded-lg bg-cream">
                <p class="text-2xl font-bold text-amber-300" x-text="destinations.filter(d => !d.is_active).length"></p>
                <p class="text-sm text-gray-300">Inactive</p>
            </div>
            <div class="glass p-4 text-center rounded-lg bg-cream">
                <p class="text-2xl font-bold text-indigo-300" x-text="destinations.reduce((max, d) => max > d.tour_count ? max : d.tour_count, 0)"></p>
                <p class="text-sm text-gray-300">Max Tours</p>
            </div>
        </div>

        <!-- Destinations List -->
        <div class="overflow-x-auto">
            <table class="data-table">
                <thead>
                    <tr>
                        <th>
                            <input type="checkbox" x-model="selectAll" @change="toggleSelectAll()">
                        </th>
                        <th>ID</th>
                        <th>Name</th>
                        <th>Description</th>
                        <th>Image</th>
                        <th>Tours Count</th>
                        <th>Status</th>
                        <th>Actions</th>
                    </tr>
                </thead>
                <tbody>
                    <template x-for="destination in getPaginatedData('destinations')" :key="destination.id">
                        <tr>
                            <td>
                                <input type="checkbox" :value="destination.id" x-model="selectedItems">
                            </td>
                            <td x-text="destination.id"></td>
                            <td x-text="destination.name"></td>
                            <td x-text="destination.description ? destination.description.substring(0, 50) + '...' : 'N/A'"></td>
                            <td>
                                <img x-show="destination.image" :src="destination.image" class="w-10 h-10 object-cover rounded" alt="Destination image">
                                <span x-show="!destination.image" class="text-gray-400">No image</span>
                            </td>
                            <td x-text="destination.tour_count || 0"></td>
                            <td>
                                <span class="status-badge"
                                      :class="{
                                          'status-active': destination.is_active,
                                          'status-inactive': !destination.is_active
                                      }"
                                      x-text="destination.is_active ? 'Active' : 'Inactive'">
                                </span>
                            </td>
                            <td>
                                <button @click="openForm('destinations', destination)" class="action-btn edit-btn">
                                    <i class="fas fa-edit"></i>
                                </button>
                                <button @click="deleteItem('destinations', destination.id)" class="action-btn delete-btn">
                                    <i class="fas fa-trash"></i>
                                </button>
                            </td>
                        </tr>
                    </template>
                    <template x-if="getPaginatedData('destinations').length === 0">
                        <tr>
                            <td colspan="8" class="text-center py-4 text-gray-300">No destinations found</td>
                        </tr>
                    </template>
                </tbody>
            </table>
        </div>

        <!-- Bulk Actions (only visible when items are selected) -->
        <div x-show="selectedItems.length > 0" class="bulk-actions mt-4">
            <button @click="bulkActivate('destinations')" class="bg-teal-500 hover:bg-teal-600">
                <i class="fas fa-check"></i> Activate Selected
            </button>
            <button @click="bulkDeactivate('destinations')" class="bg-amber-500 hover:bg-amber-600">
                <i class="fas fa-pause"></i> Deactivate Selected
            </button>
            <button @click="bulkDelete('destinations')" class="bg-red-500 hover:bg-red-600">
                <i class="fas fa-trash"></i> Delete Selected
            </button>
        </div>

        <!-- Pagination -->
        <div class="flex flex-col md:flex-row justify-between items-center mt-6 gap-4">
            <div class="text-sm text-gray-300">
                Showing <span x-text="(currentPage - 1) * itemsPerPage + 1"></span> to
                <span x-text="Math.min(currentPage * itemsPerPage, totalItems)"></span> of
                <span x-text="totalItems"></span> entries
            </div>
            <div class="pagination">
                <button
                    @click="changePage(currentPage - 1)"
                    :disabled="currentPage === 1"
                    class="px-3 py-1 rounded-lg">
                    <i class="fas fa-chevron-left"></i>
                </button>
                <template x-for="page in getVisiblePages()" :key="page">
                    <button
                        @click="changePage(page)"
                        :class="page === currentPage ? 'active' : ''"
                        x-text="page">
                    </button>
                </template>
                <button
                    @click="changePage(currentPage + 1)"
                    :disabled="currentPage === Math.ceil(totalItems / itemsPerPage)"
                    class="px-3 py-1 rounded-lg">
                    <i class="fas fa-chevron-right"></i>
                </button>
            </div>
            <div class="flex items-center gap-2">
                <span class="text-sm text-gray-300">Items per page:</span>
                <select x-model="itemsPerPage" @change="changePage(1)" class="px-2 py-1 rounded-lg glass text-white">
                    <option value="5">5</option>
                    <option value="10">10</option>
                    <option value="20">20</option>
                    <option value="50">50</option>
                </select>
            </div>
        </div>
    </div>
</div>

<!-- Drivers Section -->
<div x-show="currentSection === 'drivers'" class="space-y-6">
    <div class="glass p-6 rounded-2xl bg-cream">
        <div class="flex flex-col md:flex-row justify-between items-start md:items-center mb-6 gap-4">
            <h3 class="text-2xl font-semibold text-white">Drivers</h3>
            <div class="flex flex-col sm:flex-row gap-2 w-full md:w-auto">
                <div class="search-box w-full sm:w-auto">
                    <input type="text" placeholder="Search drivers..."
                           class="px-3 py-2 rounded-lg glass text-white w-full"
                           x-model="searchQuery"
                           @input.debounce.500ms="updateFilteredData()">
                </div>
                <select x-model="statusFilter" @change="updateFilteredData()" class="px-3 py-2 rounded-lg glass text-white">
                    <option value="">All Statuses</option>
                    <option value="AVAILABLE">Available</option>
                    <option value="UNAVAILABLE">Unavailable</option>
                </select>
                <button @click="openForm('drivers')" class="btn-primary">
                    <i class="fas fa-plus mr-2"></i>Add Driver
                </button>
            </div>
        </div>

        <!-- Driver Stats -->
        <div class="grid grid-cols-1 md:grid-cols-4 gap-4 mb-6">
            <div class="glass p-4 text-center rounded-lg bg-cream">
                <p class="text-2xl font-bold text-white" x-text="drivers.length"></p>
                <p class="text-sm text-gray-300">Total Drivers</p>
            </div>
            <div class="glass p-4 text-center rounded-lg bg-cream">
                <p class="text-2xl font-bold text-teal-300" x-text="drivers.filter(d => d.available).length"></p>
                <p class="text-sm text-gray-300">Available</p>
            </div>
            <div class="glass p-4 text-center rounded-lg bg-cream">
                <p class="text-2xl font-bold text-amber-300" x-text="drivers.filter(d => d.is_verified).length"></p>
                <p class="text-sm text-gray-300">Verified</p>
            </div>
            <div class="glass p-4 text-center rounded-lg bg-cream">
                <p class="text-2xl font-bold text-indigo-300" x-text="formatCurrency(drivers.reduce((sum, d) => sum + parseFloat(d.earnings || 0), 0))"></p>
                <p class="text-sm text-gray-300">Total Earnings</p>
            </div>
        </div>

        <!-- Drivers List -->
        <div class="overflow-x-auto">
            <table class="data-table">
                <thead>
                    <tr>
                        <th>
                            <input type="checkbox" x-model="selectAll" @change="toggleSelectAll()">
                        </th>
                        <th>ID</th>
                        <th>Name</th>
                        <th>Email</th>
                        <th>Phone</th>
                        <th>License</th>
                        <th>Rating</th>
                        <th>Status</th>
                        <th>Actions</th>
                    </tr>
                </thead>
                <tbody>
                    <template x-for="driver in getPaginatedData('drivers')" :key="driver.id">
                        <tr>
                            <td>
                                <input type="checkbox" :value="driver.id" x-model="selectedItems">
                            </td>
                            <td x-text="driver.id"></td>
                            <td x-text="driver.user ? driver.user.get_full_name : 'N/A'"></td>
                            <td x-text="driver.user ? driver.user.email : 'N/A'"></td>
                            <td x-text="driver.phone_number"></td>
                            <td x-text="driver.license_number"></td>
                            <td>
                                <div class="flex items-center">
                                    <span class="text-gold mr-1" x-text="driver.rating ? driver.rating.toFixed(1) : 'N/A'"></span>
                                    <i class="fas fa-star text-gold text-xs"></i>
                                </div>
                            </td>
                            <td>
                                <span class="status-badge"
                                      :class="{
                                          'status-active': driver.available,
                                          'status-inactive': !driver.available
                                      }"
                                      x-text="driver.available ? 'Available' : 'Unavailable'">
                                </span>
                            </td>
                            <td>
                                <button @click="openForm('drivers', driver)" class="action-btn edit-btn">
                                    <i class="fas fa-edit"></i>
                                </button>
                                <button @click="deleteItem('drivers', driver.id)" class="action-btn delete-btn">
                                    <i class="fas fa-trash"></i>
                                </button>
                            </td>
                        </tr>
                    </template>
                    <template x-if="getPaginatedData('drivers').length === 0">
                        <tr>
                            <td colspan="9" class="text-center py-4 text-gray-300">No drivers found</td>
                        </tr>
                    </template>
                </tbody>
            </table>
        </div>

        <!-- Bulk Actions (only visible when items are selected) -->
        <div x-show="selectedItems.length > 0" class="bulk-actions mt-4">
            <button @click="bulkSetAvailability('drivers', true)" class="bg-teal-500 hover:bg-teal-600">
                <i class="fas fa-check"></i> Set Available
            </button>
            <button @click="bulkSetAvailability('drivers', false)" class="bg-amber-500 hover:bg-amber-600">
                <i class="fas fa-pause"></i> Set Unavailable
            </button>
            <button @click="bulkVerify('drivers')" class="bg-indigo-500 hover:bg-indigo-600">
                <i class="fas fa-check-circle"></i> Verify Selected
            </button>
            <button @click="bulkDelete('drivers')" class="bg-red-500 hover:bg-red-600">
                <i class="fas fa-trash"></i> Delete Selected
            </button>
        </div>

        <!-- Pagination -->
        <div class="flex flex-col md:flex-row justify-between items-center mt-6 gap-4">
            <div class="text-sm text-gray-300">
                Showing <span x-text="(currentPage - 1) * itemsPerPage + 1"></span> to
                <span x-text="Math.min(currentPage * itemsPerPage, totalItems)"></span> of
                <span x-text="totalItems"></span> entries
            </div>
            <div class="pagination">
                <button
                    @click="changePage(currentPage - 1)"
                    :disabled="currentPage === 1"
                    class="px-3 py-1 rounded-lg">
                    <i class="fas fa-chevron-left"></i>
                </button>
                <template x-for="page in getVisiblePages()" :key="page">
                    <button
                        @click="changePage(page)"
                        :class="page === currentPage ? 'active' : ''"
                        x-text="page">
                    </button>
                </template>
                <button
                    @click="changePage(currentPage + 1)"
                    :disabled="currentPage === Math.ceil(totalItems / itemsPerPage)"
                    class="px-3 py-1 rounded-lg">
                    <i class="fas fa-chevron-right"></i>
                </button>
            </div>
            <div class="flex items-center gap-2">
                <span class="text-sm text-gray-300">Items per page:</span>
                <select x-model="itemsPerPage" @change="changePage(1)" class="px-2 py-1 rounded-lg glass text-white">
                    <option value="5">5</option>
                    <option value="10">10</option>
                    <option value="20">20</option>
                    <option value="50">50</option>
                </select>
            </div>
        </div>
    </div>
</div>

<!-- Payments Section -->
<div x-show="currentSection === 'payments'" class="space-y-6">
    <div class="glass p-6 rounded-2xl bg-cream">
        <div class="flex flex-col md:flex-row justify-between items-start md:items-center mb-6 gap-4">
            <h3 class="text-2xl font-semibold text-white">Payments</h3>
            <div class="flex flex-col sm:flex-row gap-2 w-full md:w-auto">
                <div class="search-box w-full sm:w-auto">
                    <input type="text" placeholder="Search payments..."
                           class="px-3 py-2 rounded-lg glass text-white w-full"
                           x-model="searchQuery"
                           @input.debounce.500ms="updateFilteredData()">
                </div>
                <select x-model="statusFilter" @change="updateFilteredData()" class="px-3 py-2 rounded-lg glass text-white">
                    <option value="">All Statuses</option>
                    <option value="SUCCESS">Success</option>
                    <option value="PENDING">Pending</option>
                    <option value="FAILED">Failed</option>
                </select>
                <button @click="openForm('payments')" class="btn-primary">
                    <i class="fas fa-plus mr-2"></i>Add Payment
                </button>
            </div>
        </div>

        <!-- Payment Stats -->
        <div class="grid grid-cols-1 md:grid-cols-4 gap-4 mb-6">
            <div class="glass p-4 text-center rounded-lg bg-cream">
                <p class="text-2xl font-bold text-white" x-text="payments.length"></p>
                <p class="text-sm text-gray-300">Total Payments</p>
            </div>
            <div class="glass p-4 text-center rounded-lg bg-cream">
                <p class="text-2xl font-bold text-teal-300" x-text="payments.filter(p => p.status === 'SUCCESS').length"></p>
                <p class="text-sm text-gray-300">Successful</p>
            </div>
            <div class="glass p-4 text-center rounded-lg bg-cream">
                <p class="text-2xl font-bold text-amber-300" x-text="payments.filter(p => p.status === 'PENDING').length"></p>
                <p class="text-sm text-gray-300">Pending</p>
            </div>
            <div class="glass p-4 text-center rounded-lg bg-cream">
                <p class="text-2xl font-bold text-indigo-300" x-text="formatCurrency(payments.reduce((sum, p) => sum + parseFloat(p.amount || 0), 0))"></p>
                <p class="text-sm text-gray-300">Total Amount</p>
            </div>
        </div>

        <!-- Date Range Filter -->
        <div class="flex flex-col md:flex-row justify-between items-start md:items-center mb-6 gap-4">
            <div class="date-range-picker">
                <span class="text-sm text-gray-300 mr-2">From:</span>
                <input type="date" x-model="dateRange.start" @change="updateFilteredData()" class="px-3 py-2 rounded-lg glass text-white">
                <span class="text-sm text-gray-300 mx-2">To:</span>
                <input type="date" x-model="dateRange.end" @change="updateFilteredData()" class="px-3 py-2 rounded-lg glass text-white">
            </div>
            <div class="export-btn" @click="exportData('payments')">
                <i class="fas fa-download"></i>
                <span>Export</span>
            </div>
        </div>

        <!-- Payments List -->
        <div class="overflow-x-auto">
            <table class="data-table">
                <thead>
                    <tr>
                        <th>
                            <input type="checkbox" x-model="selectAll" @change="toggleSelectAll()">
                        </th>
                        <th>ID</th>
                        <th>Reference</th>
                        <th>Customer</th>
                        <th>Tour</th>
                        <th>Amount</th>
                        <th>Status</th>
                        <th>Date</th>
                        <th>Actions</th>
                    </tr>
                </thead>
                <tbody>
                    <template x-for="payment in getPaginatedData('payments')" :key="payment.id">
                        <tr>
                            <td>
                                <input type="checkbox" :value="payment.id" x-model="selectedItems">
                            </td>
                            <td x-text="payment.id"></td>
                            <td x-text="payment.reference"></td>
                            <td x-text="payment.guest_full_name || 'N/A'"></td>
                            <td x-text="payment.tour ? payment.tour.title : 'N/A'"></td>
                            <td x-text="formatCurrency(payment.amount)"></td>
                            <td>
                                <span class="status-badge"
                                      :class="{
                                          'status-active': payment.status === 'SUCCESS',
                                          'status-pending': payment.status === 'PENDING',
                                          'status-inactive': payment.status === 'FAILED'
                                      }"
                                      x-text="payment.status">
                                </span>
                            </td>
                            <td x-text="formatDateTime(payment.created_at)"></td>
                            <td>
                                <button @click="openForm('payments', payment)" class="action-btn view-btn">
                                    <i class="fas fa-eye"></i>
                                </button>
                                <button @click="deleteItem('payments', payment.id)" class="action-btn delete-btn">
                                    <i class="fas fa-trash"></i>
                                </button>
                            </td>
                        </tr>
                    </template>
                    <template x-if="getPaginatedData('payments').length === 0">
                        <tr>
                            <td colspan="9" class="text-center py-4 text-gray-300">No payments found</td>
                        </tr>
                    </template>
                </tbody>
            </table>
        </div>

        <!-- Bulk Actions (only visible when items are selected) -->
        <div x-show="selectedItems.length > 0" class="bulk-actions mt-4">
            <button @click="bulkUpdateStatus('payments', 'SUCCESS')" class="bg-teal-500 hover:bg-teal-600">
                <i class="fas fa-check"></i> Mark Success
            </button>
            <button @click="bulkUpdateStatus('payments', 'FAILED')" class="bg-red-500 hover:bg-red-600">
                <i class="fas fa-times"></i> Mark Failed
            </button>
            <button @click="bulkDelete('payments')" class="bg-red-500 hover:bg-red-600">
                <i class="fas fa-trash"></i> Delete Selected
            </button>
            <button @click="bulkExport('payments')" class="bg-teal-500 hover:bg-teal-600">
                <i class="fas fa-download"></i> Export Selected
            </button>
        </div>

        <!-- Pagination -->
        <div class="flex flex-col md:flex-row justify-between items-center mt-6 gap-4">
            <div class="text-sm text-gray-300">
                Showing <span x-text="(currentPage - 1) * itemsPerPage + 1"></span> to
                <span x-text="Math.min(currentPage * itemsPerPage, totalItems)"></span> of
                <span x-text="totalItems"></span> entries
            </div>
            <div class="pagination">
                <button
                    @click="changePage(currentPage - 1)"
                    :disabled="currentPage === 1"
                    class="px-3 py-1 rounded-lg">
                    <i class="fas fa-chevron-left"></i>
                </button>
                <template x-for="page in getVisiblePages()" :key="page">
                    <button
                        @click="changePage(page)"
                        :class="page === currentPage ? 'active' : ''"
                        x-text="page">
                    </button>
                </template>
                <button
                    @click="changePage(currentPage + 1)"
                    :disabled="currentPage === Math.ceil(totalItems / itemsPerPage)"
                    class="px-3 py-1 rounded-lg">
                    <i class="fas fa-chevron-right"></i>
                </button>
            </div>
            <div class="flex items-center gap-2">
                <span class="text-sm text-gray-300">Items per page:</span>
                <select x-model="itemsPerPage" @change="changePage(1)" class="px-2 py-1 rounded-lg glass text-white">
                    <option value="5">5</option>
                    <option value="10">10</option>
                    <option value="20">20</option>
                    <option value="50">50</option>
                </select>
            </div>
        </div>
    </div>
</div>

<!-- Reviews Section -->
<div x-show="currentSection === 'reviews'" class="space-y-6">
    <div class="glass p-6 rounded-2xl bg-cream">
        <div class="flex flex-col md:flex-row justify-between items-start md:items-center mb-6 gap-4">
            <h3 class="text-2xl font-semibold text-white">Reviews</h3>
            <div class="flex flex-col sm:flex-row gap-2 w-full md:w-auto">
                <div class="search-box w-full sm:w-auto">
                    <input type="text" placeholder="Search reviews..."
                           class="px-3 py-2 rounded-lg glass text-white w-full"
                           x-model="searchQuery"
                           @input.debounce.500ms="updateFilteredData()">
                </div>
                <select x-model="statusFilter" @change="updateFilteredData()" class="px-3 py-2 rounded-lg glass text-white">
                    <option value="">All Ratings</option>
                    <option value="5">5 Stars</option>
                    <option value="4">4 Stars</option>
                    <option value="3">3 Stars</option>
                    <option value="2">2 Stars</option>
                    <option value="1">1 Star</option>
                </select>
                <button @click="resetFilters()" class="btn-primary">
                    <i class="fas fa-sync mr-2"></i>Reset
                </button>
            </div>
        </div>

        <!-- Review Stats -->
        <div class="grid grid-cols-1 md:grid-cols-4 gap-4 mb-6">
            <div class="glass p-4 text-center rounded-lg bg-cream">
                <p class="text-2xl font-bold text-white" x-text="reviews.length"></p>
                <p class="text-sm text-gray-300">Total Reviews</p>
            </div>
            <div class="glass p-4 text-center rounded-lg bg-cream">
                <p class="text-2xl font-bold text-teal-300" x-text="(reviews.reduce((sum, r) => sum + r.rating, 0) / reviews.length || 0).toFixed(1)"></p>
                <p class="text-sm text-gray-300">Avg Rating</p>
            </div>
            <div class="glass p-4 text-center rounded-lg bg-cream">
                <p class="text-2xl font-bold text-amber-300" x-text="reviews.filter(r => r.rating >= 4).length"></p>
                <p class="text-sm text-gray-300">Positive</p>
            </div>
            <div class="glass p-4 text-center rounded-lg bg-cream">
                <p class="text-2xl font-bold text-indigo-300" x-text="reviews.filter(r => r.rating <= 2).length"></p>
                <p class="text-sm text-gray-300">Negative</p>
            </div>
        </div>

        <!-- Reviews List -->
        <div class="overflow-x-auto">
            <table class="data-table">
                <thead>
                    <tr>
                        <th>
                            <input type="checkbox" x-model="selectAll" @change="toggleSelectAll()">
                        </th>
                        <th>ID</th>
                        <th>Customer</th>
                        <th>Tour</th>
                        <th>Rating</th>
                        <th>Comment</th>
                        <th>Date</th>
                        <th>Actions</th>
                    </tr>
                </thead>
                <tbody>
                    <template x-for="review in getPaginatedData('reviews')" :key="review.id">
                        <tr>
                            <td>
                                <input type="checkbox" :value="review.id" x-model="selectedItems">
                            </td>
                            <td x-text="review.id"></td>
                            <td x-text="review.customer ? review.customer.full_name : 'N/A'"></td>
                            <td x-text="review.booking && review.booking.tour ? review.booking.tour.title : 'N/A'"></td>
                            <td>
                                <div class="flex items-center">
                                    <span class="text-gold mr-1" x-text="review.rating"></span>
                                    <i class="fas fa-star text-gold text-xs"></i>
                                </div>
                            </td>
                            <td x-text="review.comment ? review.comment.substring(0, 50) + '...' : 'N/A'"></td>
                            <td x-text="formatDateTime(review.created_at)"></td>
                            <td>
                                <button @click="openForm('reviews', review)" class="action-btn view-btn">
                                    <i class="fas fa-eye"></i>
                                </button>
                                <button @click="deleteItem('reviews', review.id)" class="action-btn delete-btn">
                                    <i class="fas fa-trash"></i>
                                </button>
                            </td>
                        </tr>
                    </template>
                    <template x-if="getPaginatedData('reviews').length === 0">
                        <tr>
                            <td colspan="8" class="text-center py-4 text-gray-300">No reviews found</td>
                        </tr>
                    </template>
                </tbody>
            </table>
        </div>

        <!-- Bulk Actions (only visible when items are selected) -->
        <div x-show="selectedItems.length > 0" class="bulk-actions mt-4">
            <button @click="bulkDelete('reviews')" class="bg-red-500 hover:bg-red-600">
                <i class="fas fa-trash"></i> Delete Selected
            </button>
            <button @click="bulkExport('reviews')" class="bg-teal-500 hover:bg-teal-600">
                <i class="fas fa-download"></i> Export Selected
            </button>
        </div>

        <!-- Pagination -->
        <div class="flex flex-col md:flex-row justify-between items-center mt-6 gap-4">
            <div class="text-sm text-gray-300">
                Showing <span x-text="(currentPage - 1) * itemsPerPage + 1"></span> to
                <span x-text="Math.min(currentPage * itemsPerPage, totalItems)"></span> of
                <span x-text="totalItems"></span> entries
            </div>
            <div class="pagination">
                <button
                    @click="changePage(currentPage - 1)"
                    :disabled="currentPage === 1"
                    class="px-3 py-1 rounded-lg">
                    <i class="fas fa-chevron-left"></i>
                </button>
                <template x-for="page in getVisiblePages()" :key="page">
                    <button
                        @click="changePage(page)"
                        :class="page === currentPage ? 'active' : ''"
                        x-text="page">
                    </button>
                </template>
                <button
                    @click="changePage(currentPage + 1)"
                    :disabled="currentPage === Math.ceil(totalItems / itemsPerPage)"
                    class="px-3 py-1 rounded-lg">
                    <i class="fas fa-chevron-right"></i>
                </button>
            </div>
            <div class="flex items-center gap-2">
                <span class="text-sm text-gray-300">Items per page:</span>
                <select x-model="itemsPerPage" @change="changePage(1)" class="px-2 py-1 rounded-lg glass text-white">
                    <option value="5">5</option>
                    <option value="10">10</option>
                    <option value="20">20</option>
                    <option value="50">50</option>
                </select>
            </div>
        </div>
    </div>
</div>

<!-- Tour Categories Section -->
<div x-show="currentSection === 'tour-categories'" class="space-y-6">
    <div class="glass p-6 rounded-2xl bg-cream">
        <div class="flex flex-col md:flex-row justify-between items-start md:items-center mb-6 gap-4">
            <h3 class="text-2xl font-semibold text-white">Tour Categories</h3>
            <div class="flex flex-col sm:flex-row gap-2 w-full md:w-auto">
                <div class="search-box w-full sm:w-auto">
                    <input type="text" placeholder="Search categories..."
                           class="px-3 py-2 rounded-lg glass text-white w-full"
                           x-model="searchQuery"
                           @input.debounce.500ms="updateFilteredData()">
                </div>
                <button @click="openForm('tour-categories')" class="btn-primary">
                    <i class="fas fa-plus mr-2"></i>Add Category
                </button>
            </div>
        </div>

        <!-- Category Stats -->
        <div class="grid grid-cols-1 md:grid-cols-4 gap-4 mb-6">
            <div class="glass p-4 text-center rounded-lg bg-cream">
                <p class="text-2xl font-bold text-white" x-text="tourCategories.length"></p>
                <p class="text-sm text-gray-300">Total Categories</p>
            </div>
            <div class="glass p-4 text-center rounded-lg bg-cream">
                <p class="text-2xl font-bold text-teal-300" x-text="tourCategories.filter(c => c.is_active).length"></p>
                <p class="text-sm text-gray-300">Active</p>
            </div>
            <div class="glass p-4 text-center rounded-lg bg-cream">
                <p class="text-2xl font-bold text-amber-300" x-text="tourCategories.filter(c => !c.is_active).length"></p>
                <p class="text-sm text-gray-300">Inactive</p>
            </div>
            <div class="glass p-4 text-center rounded-lg bg-cream">
                <p class="text-2xl font-bold text-indigo-300" x-text="tourCategories.reduce((max, c) => max > c.tour_count ? max : c.tour_count, 0)"></p>
                <p class="text-sm text-gray-300">Max Tours</p>
            </div>
        </div>

        <!-- Categories List -->
        <div class="overflow-x-auto">
            <table class="data-table">
                <thead>
                    <tr>
                        <th>
                            <input type="checkbox" x-model="selectAll" @change="toggleSelectAll()">
                        </th>
                        <th>ID</th>
                        <th>Name</th>
                        <th>Description</th>
                        <th>Image</th>
                        <th>Tours Count</th>
                        <th>Status</th>
                        <th>Actions</th>
                    </tr>
                </thead>
                <tbody>
                    <template x-for="category in getPaginatedData('tourCategories')" :key="category.id">
                        <tr>
                            <td>
                                <input type="checkbox" :value="category.id" x-model="selectedItems">
                            </td>
                            <td x-text="category.id"></td>
                            <td x-text="category.name"></td>
                            <td x-text="category.description ? category.description.substring(0, 50) + '...' : 'N/A'"></td>
                            <td>
                                <img x-show="category.image" :src="category.image" class="w-10 h-10 object-cover rounded" alt="Category image">
                                <span x-show="!category.image" class="text-gray-400">No image</span>
                            </td>
                            <td x-text="category.tour_count || 0"></td>
                            <td>
                                <span class="status-badge"
                                      :class="{
                                          'status-active': category.is_active,
                                          'status-inactive': !category.is_active
                                      }"
                                      x-text="category.is_active ? 'Active' : 'Inactive'">
                                </span>
                            </td>
                            <td>
                                <button @click="openForm('tour-categories', category)" class="action-btn edit-btn">
                                    <i class="fas fa-edit"></i>
                                </button>
                                <button @click="deleteItem('tour-categories', category.id)" class="action-btn delete-btn">
                                    <i class="fas fa-trash"></i>
                                </button>
                            </td>
                        </tr>
                    </template>
                    <template x-if="getPaginatedData('tourCategories').length === 0">
                        <tr>
                            <td colspan="8" class="text-center py-4 text-gray-300">No categories found</td>
                        </tr>
                    </template>
                </tbody>
            </table>
        </div>

        <!-- Bulk Actions (only visible when items are selected) -->
        <div x-show="selectedItems.length > 0" class="bulk-actions mt-4">
            <button @click="bulkActivate('tour-categories')" class="bg-teal-500 hover:bg-teal-600">
                <i class="fas fa-check"></i> Activate Selected
            </button>
            <button @click="bulkDeactivate('tour-categories')" class="bg-amber-500 hover:bg-amber-600">
                <i class="fas fa-pause"></i> Deactivate Selected
            </button>
            <button @click="bulkDelete('tour-categories')" class="bg-red-500 hover:bg-red-600">
                <i class="fas fa-trash"></i> Delete Selected
            </button>
        </div>

        <!-- Pagination -->
        <div class="flex flex-col md:flex-row justify-between items-center mt-6 gap-4">
            <div class="text-sm text-gray-300">
                Showing <span x-text="(currentPage - 1) * itemsPerPage + 1"></span> to
                <span x-text="Math.min(currentPage * itemsPerPage, totalItems)"></span> of
                <span x-text="totalItems"></span> entries
            </div>
            <div class="pagination">
                <button
                    @click="changePage(currentPage - 1)"
                    :disabled="currentPage === 1"
                    class="px-3 py-1 rounded-lg">
                    <i class="fas fa-chevron-left"></i>
                </button>
                <template x-for="page in getVisiblePages()" :key="page">
                    <button
                        @click="changePage(page)"
                        :class="page === currentPage ? 'active' : ''"
                        x-text="page">
                    </button>
                </template>
                <button
                    @click="changePage(currentPage + 1)"
                    :disabled="currentPage === Math.ceil(totalItems / itemsPerPage)"
                    class="px-3 py-1 rounded-lg">
                    <i class="fas fa-chevron-right"></i>
                </button>
            </div>
            <div class="flex items-center gap-2">
                <span class="text-sm text-gray-300">Items per page:</span>
                <select x-model="itemsPerPage" @change="changePage(1)" class="px-2 py-1 rounded-lg glass text-white">
                    <option value="5">5</option>
                    <option value="10">10</option>
                    <option value="20">20</option>
                    <option value="50">50</option>
                </select>
            </div>
        </div>
    </div>
</div>

<!-- Trips Section -->
<div x-show="currentSection === 'trips'" class="space-y-6">
    <div class="glass p-6 rounded-2xl bg-cream">
        <div class="flex flex-col md:flex-row justify-between items-start md:items-center mb-6 gap-4">
            <h3 class="text-2xl font-semibold text-white">Trips</h3>
            <div class="flex flex-col sm:flex-row gap-2 w-full md:w-auto">
                <div class="search-box w-full sm:w-auto">
                    <input type="text" placeholder="Search trips..."
                           class="px-3 py-2 rounded-lg glass text-white w-full"
                           x-model="searchQuery"
                           @input.debounce.500ms="updateFilteredData()">
                </div>
                <select x-model="statusFilter" @change="updateFilteredData()" class="px-3 py-2 rounded-lg glass text-white">
                    <option value="">All Statuses</option>
                    <option value="SCHEDULED">Scheduled</option>
                    <option value="IN_PROGRESS">In Progress</option>
                    <option value="COMPLETED">Completed</option>
                    <option value="CANCELLED">Cancelled</option>
                </select>
                <button @click="openForm('trips')" class="btn-primary">
                    <i class="fas fa-plus mr-2"></i>Add Trip
                </button>
            </div>
        </div>

        <!-- Trip Stats -->
        <div class="grid grid-cols-1 md:grid-cols-4 gap-4 mb-6">
            <div class="glass p-4 text-center rounded-lg bg-cream">
                <p class="text-2xl font-bold text-white" x-text="trips.length"></p>
                <p class="text-sm text-gray-300">Total Trips</p>
            </div>
            <div class="glass p-4 text-center rounded-lg bg-cream">
                <p class="text-2xl font-bold text-teal-300" x-text="trips.filter(t => t.status === 'COMPLETED').length"></p>
                <p class="text-sm text-gray-300">Completed</p>
            </div>
            <div class="glass p-4 text-center rounded-lg bg-cream">
                <p class="text-2xl font-bold text-amber-300" x-text="trips.filter(t => t.status === 'SCHEDULED').length"></p>
                <p class="text-sm text-gray-300">Scheduled</p>
            </div>
            <div class="glass p-4 text-center rounded-lg bg-cream">
                <p class="text-2xl font-bold text-indigo-300" x-text="formatCurrency(trips.reduce((sum, t) => sum + parseFloat(t.earnings || 0), 0))"></p>
                <p class="text-sm text-gray-300">Total Earnings</p>
            </div>
        </div>

        <!-- Date Range Filter -->
        <div class="flex flex-col md:flex-row justify-between items-start md:items-center mb-6 gap-4">
            <div class="date-range-picker">
                <span class="text-sm text-gray-300 mr-2">From:</span>
                <input type="date" x-model="dateRange.start" @change="updateFilteredData()" class="px-3 py-2 rounded-lg glass text-white">
                <span class="text-sm text-gray-300 mx-2">To:</span>
                <input type="date" x-model="dateRange.end" @change="updateFilteredData()" class="px-3 py-2 rounded-lg glass text-white">
            </div>
            <div class="export-btn" @click="exportData('trips')">
                <i class="fas fa-download"></i>
                <span>Export</span>
            </div>
        </div>

        <!-- Trips List -->
        <div class="overflow-x-auto">
            <table class="data-table">
                <thead>
                    <tr>
                        <th>
                            <input type="checkbox" x-model="selectAll" @change="toggleSelectAll()">
                        </th>
                        <th>ID</th>
                        <th>Driver</th>
                        <th>Destination</th>
                        <th>Date</th>
                        <th>Start Time</th>
                        <th>End Time</th>
                        <th>Status</th>
                        <th>Actions</th>
                    </tr>
                </thead>
                <tbody>
                    <template x-for="trip in getPaginatedData('trips')" :key="trip.id">
                        <tr>
                            <td>
                                <input type="checkbox" :value="trip.id" x-model="selectedItems">
                            </td>
                            <td x-text="trip.id"></td>
                            <td x-text="trip.driver ? trip.driver.user.get_full_name : 'N/A'"></td>
                            <td x-text="trip.destination"></td>
                            <td x-text="formatDate(trip.date)"></td>
                            <td x-text="trip.start_time"></td>
                            <td x-text="trip.end_time"></td>
                            <td>
                                <span class="status-badge"
                                      :class="{
                                          'status-active': trip.status === 'COMPLETED',
                                          'status-pending': trip.status === 'SCHEDULED' || trip.status === 'IN_PROGRESS',
                                          'status-inactive': trip.status === 'CANCELLED'
                                      }"
                                      x-text="trip.status">
                                </span>
                            </td>
                            <td>
                                <button @click="openForm('trips', trip)" class="action-btn edit-btn">
                                    <i class="fas fa-edit"></i>
                                </button>
                                <button @click="deleteItem('trips', trip.id)" class="action-btn delete-btn">
                                    <i class="fas fa-trash"></i>
                                </button>
                            </td>
                        </tr>
                    </template>
                    <template x-if="getPaginatedData('trips').length === 0">
                        <tr>
                            <td colspan="9" class="text-center py-4 text-gray-300">No trips found</td>
                        </tr>
                    </template>
                </tbody>
            </table>
        </div>

        <!-- Bulk Actions (only visible when items are selected) -->
        <div x-show="selectedItems.length > 0" class="bulk-actions mt-4">
            <button @click="bulkUpdateStatus('trips', 'SCHEDULED')" class="bg-amber-500 hover:bg-amber-600">
                <i class="fas fa-calendar"></i> Mark Scheduled
            </button>
            <button @click="bulkUpdateStatus('trips', 'IN_PROGRESS')" class="bg-blue-500 hover:bg-blue-600">
                <i class="fas fa-play"></i> Mark In Progress
            </button>
            <button @click="bulkUpdateStatus('trips', 'COMPLETED')" class="bg-teal-500 hover:bg-teal-600">
                <i class="fas fa-check"></i> Mark Completed
            </button>
            <button @click="bulkUpdateStatus('trips', 'CANCELLED')" class="bg-red-500 hover:bg-red-600">
                <i class="fas fa-times"></i> Mark Cancelled
            </button>
            <button @click="bulkDelete('trips')" class="bg-red-500 hover:bg-red-600">
                <i class="fas fa-trash"></i> Delete Selected
            </button>
        </div>

        <!-- Pagination -->
        <div class="flex flex-col md:flex-row justify-between items-center mt-6 gap-4">
            <div class="text-sm text-gray-300">
                Showing <span x-text="(currentPage - 1) * itemsPerPage + 1"></span> to
                <span x-text="Math.min(currentPage * itemsPerPage, totalItems)"></span> of
                <span x-text="totalItems"></span> entries
            </div>
            <div class="pagination">
                <button
                    @click="changePage(currentPage - 1)"
                    :disabled="currentPage === 1"
                    class="px-3 py-1 rounded-lg">
                    <i class="fas fa-chevron-left"></i>
                </button>
                <template x-for="page in getVisiblePages()" :key="page">
                    <button
                        @click="changePage(page)"
                        :class="page === currentPage ? 'active' : ''"
                        x-text="page">
                    </button>
                </template>
                <button
                    @click="changePage(currentPage + 1)"
                    :disabled="currentPage === Math.ceil(totalItems / itemsPerPage)"
                    class="px-3 py-1 rounded-lg">
                    <i class="fas fa-chevron-right"></i>
                </button>
            </div>
            <div class="flex items-center gap-2">
                <span class="text-sm text-gray-300">Items per page:</span>
                <select x-model="itemsPerPage" @change="changePage(1)" class="px-2 py-1 rounded-lg glass text-white">
                    <option value="5">5</option>
                    <option value="10">10</option>
                    <option value="20">20</option>
                    <option value="50">50</option>
                </select>
            </div>
        </div>
    </div>
</div>

<!-- Vehicles Section -->
<div x-show="currentSection === 'vehicles'" class="space-y-6">
    <div class="glass p-6 rounded-2xl bg-cream">
        <div class="flex flex-col md:flex-row justify-between items-start md:items-center mb-6 gap-4">
            <h3 class="text-2xl font-semibold text-white">Vehicles</h3>
            <div class="flex flex-col sm:flex-row gap-2 w-full md:w-auto">
                <div class="search-box w-full sm:w-auto">
                    <input type="text" placeholder="Search vehicles..."
                           class="px-3 py-2 rounded-lg glass text-white w-full"
                           x-model="searchQuery"
                           @input.debounce.500ms="updateFilteredData()">
                </div>
                <select x-model="statusFilter" @change="updateFilteredData()" class="px-3 py-2 rounded-lg glass text-white">
                    <option value="">All Statuses</option>
                    <option value="ACTIVE">Active</option>
                    <option value="MAINTENANCE">Maintenance</option>
                    <option value="OUT_OF_SERVICE">Out of Service</option>
                </select>
                <button @click="openForm('vehicles')" class="btn-primary">
                    <i class="fas fa-plus mr-2"></i>Add Vehicle
                </button>
            </div>
        </div>

        <!-- Vehicle Stats -->
        <div class="grid grid-cols-1 md:grid-cols-4 gap-4 mb-6">
            <div class="glass p-4 text-center rounded-lg bg-cream">
                <p class="text-2xl font-bold text-white" x-text="vehicles.length"></p>
                <p class="text-sm text-gray-300">Total Vehicles</p>
            </div>
            <div class="glass p-4 text-center rounded-lg bg-cream">
                <p class="text-2xl font-bold text-teal-300" x-text="vehicles.filter(v => v.status === 'ACTIVE').length"></p>
                <p class="text-sm text-gray-300">Active</p>
            </div>
            <div class="glass p-4 text-center rounded-lg bg-cream">
                <p class="text-2xl font-bold text-amber-300" x-text="vehicles.filter(v => v.status === 'MAINTENANCE').length"></p>
                <p class="text-sm text-gray-300">Maintenance</p>
            </div>
            <div class="glass p-4 text-center rounded-lg bg-cream">
                <p class="text-2xl font-bold text-indigo-300" x-text="vehicles.filter(v => new Date(v.next_maintenance_date) <= new Date()).length"></p>
                <p class="text-sm text-gray-300">Maintenance Due</p>
            </div>
        </div>

        <!-- Vehicles List -->
        <div class="overflow-x-auto">
            <table class="data-table">
                <thead>
                    <tr>
                        <th>
                            <input type="checkbox" x-model="selectAll" @change="toggleSelectAll()">
                        </th>
                        <th>ID</th>
                        <th>Make</th>
                        <th>Model</th>
                        <th>License Plate</th>
                        <th>Year</th>
                        <th>Next Maintenance</th>
                        <th>Status</th>
                        <th>Actions</th>
                    </tr>
                </thead>
                <tbody>
                    <template x-for="vehicle in getPaginatedData('vehicles')" :key="vehicle.id">
                        <tr>
                            <td>
                                <input type="checkbox" :value="vehicle.id" x-model="selectedItems">
                            </td>
                            <td x-text="vehicle.id"></td>
                            <td x-text="vehicle.make"></td>
                            <td x-text="vehicle.model"></td>
                            <td x-text="vehicle.license_plate"></td>
                            <td x-text="vehicle.year"></td>
                            <td x-text="formatDate(vehicle.next_maintenance_date)"></td>
                            <td>
                                <span class="status-badge"
                                      :class="{
                                          'status-active': vehicle.status === 'ACTIVE',
                                          'status-pending': vehicle.status === 'MAINTENANCE',
                                          'status-inactive': vehicle.status === 'OUT_OF_SERVICE'
                                      }"
                                      x-text="vehicle.status">
                                </span>
                            </td>
                            <td>
                                <button @click="openForm('vehicles', vehicle)" class="action-btn edit-btn">
                                    <i class="fas fa-edit"></i>
                                </button>
                                <button @click="deleteItem('vehicles', vehicle.id)" class="action-btn delete-btn">
                                    <i class="fas fa-trash"></i>
                                </button>
                            </td>
                        </tr>
                    </template>
                    <template x-if="getPaginatedData('vehicles').length === 0">
                        <tr>
                            <td colspan="9" class="text-center py-4 text-gray-300">No vehicles found</td>
                        </tr>
                    </template>
                </tbody>
            </table>
        </div>

        <!-- Bulk Actions (only visible when items are selected) -->
        <div x-show="selectedItems.length > 0" class="bulk-actions mt-4">
            <button @click="bulkUpdateStatus('vehicles', 'ACTIVE')" class="bg-teal-500 hover:bg-teal-600">
                <i class="fas fa-check"></i> Set Active
            </button>
            <button @click="bulkUpdateStatus('vehicles', 'MAINTENANCE')" class="bg-amber-500 hover:bg-amber-600">
                <i class="fas fa-tools"></i> Set Maintenance
            </button>
            <button @click="bulkUpdateStatus('vehicles', 'OUT_OF_SERVICE')" class="bg-red-500 hover:bg-red-600">
                <i class="fas fa-times"></i> Set Out of Service
            </button>
            <button @click="bulkDelete('vehicles')" class="bg-red-500 hover:bg-red-600">
                <i class="fas fa-trash"></i> Delete Selected
            </button>
        </div>

        <!-- Pagination -->
        <div class="flex flex-col md:flex-row justify-between items-center mt-6 gap-4">
            <div class="text-sm text-gray-300">
                Showing <span x-text="(currentPage - 1) * itemsPerPage + 1"></span> to
                <span x-text="Math.min(currentPage * itemsPerPage, totalItems)"></span> of
                <span x-text="totalItems"></span> entries
            </div>
            <div class="pagination">
                <button
                    @click="changePage(currentPage - 1)"
                    :disabled="currentPage === 1"
                    class="px-3 py-1 rounded-lg">
                    <i class="fas fa-chevron-left"></i>
                </button>
                <template x-for="page in getVisiblePages()" :key="page">
                    <button
                        @click="changePage(page)"
                        :class="page === currentPage ? 'active' : ''"
                        x-text="page">
                    </button>
                </template>
                <button
                    @click="changePage(currentPage + 1)"
                    :disabled="currentPage === Math.ceil(totalItems / itemsPerPage)"
                    class="px-3 py-1 rounded-lg">
                    <i class="fas fa-chevron-right"></i>
                </button>
            </div>
            <div class="flex items-center gap-2">
                <span class="text-sm text-gray-300">Items per page:</span>
                <select x-model="itemsPerPage" @change="changePage(1)" class="px-2 py-1 rounded-lg glass text-white">
                    <option value="5">5</option>
                    <option value="10">10</option>
                    <option value="20">20</option>
                    <option value="50">50</option>
                </select>
            </div>
        </div>
    </div>
</div>

<!-- Customers Section -->
<div x-show="currentSection === 'customers'" class="space-y-6">
    <div class="glass p-6 rounded-2xl bg-cream">
        <div class="flex flex-col md:flex-row justify-between items-start md:items-center mb-6 gap-4">
            <h3 class="text-2xl font-semibold text-white">Customer Management</h3>
            <div class="flex flex-col sm:flex-row gap-2 w-full md:w-auto">
                <div class="search-box w-full sm:w-auto">
                    <input type="text" placeholder="Search customers..."
                           class="px-3 py-2 rounded-lg glass text-white w-full"
                           x-model="customerSearch"
                           @input.debounce.500ms="updateFilteredData()">
                </div>
                <button class="export-btn" @click="exportData('customers')">
                    <i class="fas fa-download"></i>
                    <span>Export</span>
                </button>
            </div>
        </div>

        <!-- Customer Stats -->
        <div class="grid grid-cols-1 md:grid-cols-4 gap-4 mb-6">
            <div class="glass p-4 text-center rounded-lg bg-cream">
                <p class="text-2xl font-bold text-white" x-text="customers.length"></p>
                <p class="text-sm text-gray-300">Total Customers</p>
            </div>
            <div class="glass p-4 text-center rounded-lg bg-cream">
                <p class="text-2xl font-bold text-teal-300" x-text="customers.filter(c => c.total_bookings > 1).length"></p>
                <p class="text-sm text-gray-300">Repeat Customers</p>
            </div>
            <div class="glass p-4 text-center rounded-lg bg-cream">
                <p class="text-2xl font-bold text-amber-300" x-text="customers.reduce((sum, c) => sum + c.total_bookings, 0)"></p>
                <p class="text-sm text-gray-300">Total Bookings</p>
            </div>
            <div class="glass p-4 text-center rounded-lg bg-cream">
                <p class="text-2xl font-bold text-indigo-300" x-text="formatCurrency(customers.reduce((sum, c) => sum + parseFloat(c.total_spent || 0), 0))"></p>
                <p class="text-sm text-gray-300">Total Revenue</p>
            </div>
        </div>

        <!-- Customer List -->
        <div class="overflow-x-auto">
            <table class="w-full">
                <thead>
                    <tr class="border-b border-gray-700">
                        <th class="p-3 text-left text-gray-300">Customer</th>
                        <th class="p-3 text-left text-gray-300">Contact</th>
                        <th class="p-3 text-left text-gray-300">Bookings</th>
                        <th class="p-3 text-left text-gray-300">Total Spent</th>
                        <th class="p-3 text-left text-gray-300">Last Booking</th>
                        <th class="p-3 text-left text-gray-300">Actions</th>
                    </tr>
                </thead>
                <tbody>
                    <template x-if="customers.length > 0">
                        <template x-for="customer in customers" :key="customer.id">
                            <tr class="border-b border-gray-700 hover:bg-teal-900">
                                <td class="p-3">
                                    <div class="flex items-center gap-3">
                                        <img :src="customer.profile_picture || '{% static 'images/default_profile.png' %}'"
                                             class="customer-avatar" alt="Customer avatar">
                                        <div>
                                            <p class="font-semibold text-white" x-text="customer.full_name"></p>
                                            <p class="text-sm text-gray-300" x-text="customer.customer_type || 'Regular'"></p>
                                        </div>
                                    </div>
                                </td>
                                <td class="p-3">
                                    <p class="text-white" x-text="customer.email"></p>
                                    <p class="text-sm text-gray-300" x-text="customer.phone"></p>
                                </td>
                                <td class="p-3 text-white" x-text="customer.total_bookings || 0"></td>
                                <td class="p-3 text-white" x-text="formatCurrency(customer.total_spent || 0)"></td>
                                <td class="p-3 text-white" x-text="customer.last_booking ? formatDate(customer.last_booking) : 'Never'"></td>
                                <td class="p-3 flex gap-2">
                                    <button class="px-3 py-1 bg-teal-500 text-white rounded text-sm hover:bg-teal-600">
                                        <i class="fas fa-envelope"></i>
                                    </button>
                                    <button class="px-3 py-1 bg-amber-500 text-white rounded text-sm hover:bg-amber-600">
                                        <i class="fas fa-eye"></i>
                                    </button>
                                </td>
                            </tr>
                        </template>
                    </template>
                    <template x-if="customers.length === 0">
                        <tr>
                            <td colspan="6" class="p-3 text-center text-gray-300">No customers found</td>
                        </tr>
                    </template>
                </tbody>
            </table>
        </div>
    </div>
</div>

<!-- Earnings Section -->
<div x-show="currentSection === 'earnings'" class="space-y-6">
    <div class="glass p-6 rounded-2xl bg-cream">
        <h3 class="text-2xl font-semibold mb-6 text-teal-300">Earnings Report</h3>

        <!-- Tabs -->
        <div class="flex border-b border-gray-700 mb-6">
            <button @click="activeTab = 'overview'"
                    class="px-4 py-2 font-medium text-sm"
                    :class="activeTab === 'overview' ? 'tab-active text-white' : 'text-gray-400'">
                Overview
            </button>
            <button @click="activeTab = 'transactions'"
                    class="px-4 py-2 font-medium text-sm"
                    :class="activeTab === 'transactions' ? 'tab-active text-white' : 'text-gray-400'">
                Transactions
            </button>
            <button @click="activeTab = 'analytics'"
                    class="px-4 py-2 font-medium text-sm"
                    :class="activeTab === 'analytics' ? 'tab-active text-white' : 'text-gray-400'">
                Analytics
            </button>
        </div>

        <!-- Overview Tab -->
        <div x-show="activeTab === 'overview'" class="space-y-6">
            <!-- Date Filters -->
            <form method="GET" class="grid grid-cols-1 md:grid-cols-3 gap-4">
                <input type="date" name="start_date" value="{{ start_date }}"
                       class="p-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-teal-500 glass">
                <input type="date" name="end_date" value="{{ end_date }}"
                       class="p-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-teal-500 glass">
                <button type="submit" class="btn-primary">
                    Filter
                </button>
            </form>

            <!-- Total Stats -->
            <div class="grid grid-cols-1 md:grid-cols-3 gap-4 mb-6">
                <div class="p-4 glass rounded-lg classic-border">
                    <p class="text-sm text-teal-300">Total Earnings</p>
                    <p class="text-2xl font-bold text-white" x-text="formatCurrency(dashboardData ? dashboardData.total_earnings : 0)"></p>
                </div>
                <div class="p-4 glass rounded-lg classic-border">
                    <p class="text-sm text-indigo-300">Total Trips</p>
                    <p class="text-2xl font-bold text-white" x-text="dashboardData ? dashboardData.completed_trips : 0"></p>
                </div>
                <div class="p-4 glass rounded-lg classic-border">
                    <p class="text-sm text-amber-300">Avg per Trip</p>
                    <p class="text-2xl font-bold text-white" x-text="formatCurrency(dashboardData && dashboardData.completed_trips > 0 ? dashboardData.total_earnings / dashboardData.completed_trips : 0)"></p>
                </div>
            </div>

            <!-- Earnings Chart -->
            <div class="chart-container glass p-4 rounded-lg">
                <canvas id="earningsChart"></canvas>
            </div>
        </div>

        <!-- Transactions Tab -->
        <div x-show="activeTab === 'transactions'" class="space-y-6">
            <div class="overflow-x-auto">
                <table class="w-full">
                    <thead>
                        <tr class="border-b border-gray-700">
                            <th class="p-3 text-left text-gray-300">Reference</th>
                            <th class="p-3 text-left text-gray-300">Amount</th>
                            <th class="p-3 text-left text-gray-300">Status</th>
                            <th class="p-3 text-left text-gray-300">Date</th>
                            <th class="p-3 text-left text-gray-300">Actions</th>
                        </tr>
                    </thead>
                    <tbody>
                        <template x-if="paymentStats && paymentStats.recent_transactions.length > 0">
                            <template x-for="transaction in paymentStats.recent_transactions" :key="transaction.id">
                                <tr class="border-b border-gray-700 hover:bg-teal-900">
                                    <td class="p-3 text-white" x-text="transaction.reference"></td>
                                    <td class="p-3 text-white" x-text="formatCurrency(transaction.amount)"></td>
                                    <td class="p-3">
                                        <span class="px-2 py-1 rounded text-xs font-medium"
                                              :class="{
                                                  'bg-green-100 text-green-800': transaction.status === 'SUCCESS',
                                                  'bg-yellow-100 text-yellow-800': transaction.status === 'PENDING',
                                                  'bg-red-100 text-red-800': transaction.status === 'FAILED'
                                              }"
                                              x-text="transaction.status">
                                        </span>
                                    </td>
                                    <td class="p-3 text-white" x-text="formatDate(transaction.created_at)"></td>
                                    <td class="p-3 flex gap-2">
                                        <button class="px-3 py-1 bg-teal-500 text-white rounded text-sm hover:bg-teal-600">
                                            View
                                        </button>
                                        <button x-show="transaction.status === 'SUCCESS'"
                                                class="px-3 py-1 bg-amber-500 text-white rounded text-sm hover:bg-amber-600"
                                                @click="initiateRefund(transaction)">
                                            Refund
                                        </button>
                                    </td>
                                </tr>
                            </template>
                        </template>
                        <template x-if="!paymentStats || paymentStats.recent_transactions.length === 0">
                            <tr>
                                <td colspan="5" class="p-3 text-center text-gray-300">No transactions found</td>
                            </tr>
                        </template>
                    </tbody>
                </table>
            </div>
        </div>

        <!-- Analytics Tab -->
        <div x-show="activeTab === 'analytics'" class="space-y-6">
            <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                <div class="glass p-4 rounded-lg">
                    <h4 class="text-lg font-semibold text-white mb-4">Revenue by Tour</h4>
                    <div class="chart-container">
                        <canvas id="revenueByTourChart"></canvas>
                    </div>
                </div>
                <div class="glass p-4 rounded-lg">
                    <h4 class="text-lg font-semibold text-white mb-4">Booking Trends</h4>
                    <div class="chart-container">
                        <canvas id="bookingTrendsChart"></canvas>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- Schedule Section -->
<div x-show="currentSection === 'schedule'" class="space-y-6">
    <div class="glass p-6 rounded-2xl bg-cream">
        <h3 class="text-2xl font-semibold mb-6 text-white">Monthly Schedule</h3>

        <!-- Month Navigation -->
        <div class="flex justify-between items-center mb-6">
            <a href="?year={{ prev_year }}&month={{ prev_month }}" class="p-2 glass text-white rounded-lg hover:bg-teal-700 transition">
                <i class="fas fa-chevron-left"></i>
            </a>
            <h4 class="text-xl font-semibold text-white">{{ month_name }} {{ year }}</h4>
            <a href="?year={{ next_year }}&month={{ next_month }}" class="p-2 glass text-white rounded-lg hover:bg-teal-700 transition">
                <i class="fas fa-chevron-right"></i>
            </a>
        </div>

        <!-- Calendar -->
        <div class="grid grid-cols-7 gap-2">
            {% for day in week_days %}
            <div class="p-2 text-center font-semibold text-gray-300">{{ day }}</div>
            {% endfor %}

            {% for week in calendar %}
                {% for day in week %}
                    <div class="p-2 border rounded-lg min-h-20 {% if day == 0 %}bg-gray-900{% else %}glass{% endif %}">
                        {% if day != 0 %}
                            <div class="text-sm font-semibold text-white">{{ day }}</div>
                            {% for trip in trips_by_date|get_item:day %}
                                <div class="text-xs p-1 mt-1 glass rounded truncate" title="{{ trip.destination }}">
                                    {{ trip.start_time|time:"H:i" }} - {{ trip.destination }}
                                </div>
                            {% endfor %}
                        {% endif %}
                    </div>
                {% endfor %}
            {% endfor %}
        </div>
    </div>
</div>

<!-- Tours Management -->
<div x-show="currentSection === 'tours'" class="space-y-6">
    <!-- Tour Statistics -->
    <div class="grid grid-cols-1 md:grid-cols-4 gap-4 mb-6">
        <div class="glass p-4 text-center rounded-lg bg-cream">
            <p class="text-2xl font-bold text-white" x-text="dashboardData ? dashboardData.tour_stats.total : 0"></p>
            <p class="text-sm text-gray-300">Total Tours</p>
        </div>
        <div class="glass p-4 text-center rounded-lg bg-cream">
            <p class="text-2xl font-bold text-teal-300" x-text="dashboardData ? dashboardData.tour_stats.approved : 0"></p>
            <p class="text-sm text-gray-300">Approved</p>
        </div>
        <div class="glass p-4 text-center rounded-lg bg-cream">
            <p class="text-2xl font-bold text-amber-300" x-text="dashboardData ? dashboardData.tour_stats.pending : 0"></p>
            <p class="text-sm text-gray-300">Pending</p>
        </div>
        <div class="glass p-4 text-center rounded-lg bg-cream">
            <p class="text-2xl font-bold text-indigo-300" x-text="dashboardData ? dashboardData.tour_stats.active : 0"></p>
            <p class="text-sm text-gray-300">Active</p>
        </div>
    </div>

    <!-- View Toggle -->
    <div class="flex justify-end mb-4">
        <div class="inline-flex rounded-md shadow-sm" role="group">
            <button @click="tourViewMode = 'table'"
                    :class="tourViewMode === 'table' ? 'bg-teal-500 text-white' : 'bg-gray-700 text-gray-300'"
                    class="px-4 py-2 text-sm font-medium rounded-l-lg">
                <i class="fas fa-table mr-2"></i> Table View
            </button>
            <button @click="tourViewMode = 'grid'"
                    :class="tourViewMode === 'grid' ? 'bg-teal-500 text-white' : 'bg-gray-700 text-gray-300'"
                    class="px-4 py-2 text-sm font-medium rounded-r-lg">
                <i class="fas fa-th-large mr-2"></i> Grid View
            </button>
        </div>
    </div>

    <!-- Tours Table -->
    <div x-show="tourViewMode === 'table'" class="glass p-6 rounded-2xl bg-cream">
        <div class="flex justify-between items-center mb-6">
            <h3 class="text-2xl font-semibold text-indigo-300">My Tours</h3>
            <button @click="showAddTour = true" class="btn-primary">
                <i class="fas fa-plus mr-2"></i>Add Tour
            </button>
        </div>

        <div class="overflow-x-auto">
            <table class="w-full">
                <thead>
                    <tr class="border-b border-gray-700">
                        <th class="p-3 text-left text-gray-300">Tour Name</th>
                        <th class="p-3 text-left text-gray-300">Status</th>
                        <th class="p-3 text-left text-gray-300">Price</th>
                        <th class="p-3 text-left text-gray-300">Bookings</th>
                        <th class="p-3 text-left text-gray-300">Actions</th>
                    </tr>
                </thead>
                <tbody>
                    <template x-if="tours.length > 0">
                        <template x-for="tour in tours" :key="tour.id">
                            <tr class="border-b border-gray-700 hover:bg-teal-900">
                                <td class="p-3 font-semibold text-white" x-text="tour.title"></td>
                                <td class="p-3">
                                    <span class="px-2 py-1 rounded text-xs"
                                          :class="{
                                              'bg-teal-100 text-teal-800': tour.is_approved && tour.available,
                                              'bg-amber-100 text-amber-800': !tour.is_approved,
                                              'bg-red-100 text-red-800': tour.is_approved && !tour.available
                                          }">
                                        <span x-text="tour.is_approved && tour.available ? 'Active' : (!tour.is_approved ? 'Pending' : 'Inactive')"></span>
                                    </span>
                                </td>
                                <td class="p-3 text-white" x-text="formatCurrency(tour.price_per_person)"></td>
                                <td class="p-3 text-white" x-text="tour.booking_count || 0"></td>
                                <td class="p-3 flex gap-2">
                                    <a :href="`/tour/${tour.id}/pay/`"
                                       class="px-3 py-1 bg-teal-500 text-white rounded text-sm hover:bg-teal-600">
                                        View
                                    </a>
                                    <a :href="`/driver/tour/${tour.id}/edit/`"
                                       class="px-3 py-1 bg-amber-500 text-white rounded text-sm hover:bg-amber-600">
                                        Edit
                                    </a>
                                </td>
                            </tr>
                        </template>
                    </template>
                    <template x-if="tours.length === 0">
                        <tr>
                            <td colspan="5" class="p-3 text-center text-gray-300">No tours yet</td>
                        </tr>
                    </template>
                </tbody>
            </table>
        </div>
    </div>

    <!-- Tours Grid -->
    <div x-show="tourViewMode === 'grid'" class="responsive-grid">
        <template x-if="tours.length > 0">
            <template x-for="tour in tours" :key="tour.id">
                <div class="tour-card">
                    <div class="tour-card-image" :style="`background-image: url('${tour.image || '{% static 'images/default-tour.jpg' %}'}')`">
                        <span class="tour-card-badge"
                              :class="{
                                  'bg-teal-100 text-teal-800': tour.is_approved && tour.available,
                                  'bg-amber-100 text-amber-800': !tour.is_approved,
                                  'bg-red-100 text-red-800': tour.is_approved && !tour.available
                              }"
                              x-text="tour.is_approved && tour.available ? 'Active' : (!tour.is_approved ? 'Pending' : 'Inactive')">
                        </span>
                    </div>
                    <div class="tour-card-content">
                        <h3 class="tour-card-title" x-text="tour.title"></h3>
                        <p class="tour-card-description" x-text="tour.description ? tour.description.substring(0, 100) + '...' : 'No description available'"></p>
                        <div class="tour-card-footer">
                            <div class="tour-card-price" x-text="formatCurrency(tour.price_per_person)"></div>
                            <div class="tour-card-actions">
                                <a :href="`/tour/${tour.id}/pay/`"
                                   class="px-3 py-1 bg-teal-500 text-white rounded text-sm hover:bg-teal-600">
                                    <i class="fas fa-eye"></i>
                                </a>
                                <a :href="`/driver/tour/${tour.id}/edit/`"
                                   class="px-3 py-1 bg-amber-500 text-white rounded text-sm hover:bg-amber-600">
                                    <i class="fas fa-edit"></i>
                                </a>
                            </div>
                        </div>
                    </div>
                </div>
            </template>
        </template>
        <template x-if="tours.length === 0">
            <div class="empty-state col-span-full">
                <i class="fas fa-mountain"></i>
                <p>No tours yet</p>
                <button @click="showAddTour = true" class="btn-primary mt-4">
                    <i class="fas fa-plus mr-2"></i>Add Tour
                </button>
            </div>
        </template>
    </div>
</div>

<!-- Profile Section -->
<div x-show="currentSection === 'profile'" class="space-y-6">
    <div class="glass p-6 rounded-2xl bg-cream">
        <h3 class="text-2xl font-semibold mb-6 text-white">Driver Profile</h3>

        <form method="POST" enctype="multipart/form-data" class="space-y-6">
            {% csrf_token %}

            <!-- Personal Information -->
            <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                <div>
                    <label class="block text-sm font-medium mb-2 text-gray-300">Phone Number</label>
                    <input type="text" name="phone_number" value="{{ driver.phone_number }}"
                           class="w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-teal-500 glass">
                </div>
                <div>
                    <label class="block text-sm font-medium mb-2 text-gray-300">License Number</label>
                    <input type="text" name="license_number" value="{{ driver.license_number }}"
                           class="w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-teal-500 glass">
                </div>
            </div>

            <!-- Bank Information -->
            <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
                <div>
                    <label class="block text-sm font-medium mb-2 text-gray-300">Bank Name</label>
                    <input type="text" name="bank_name" value="{{ driver.bank_name|default:'' }}"
                           class="w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-teal-500 glass">
                </div>
                <div>
                    <label class="block text-sm font-medium mb-2 text-gray-300">Account Number</label>
                    <input type="text" name="bank_account" value="{{ driver.bank_account|default:'' }}"
                           class="w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-teal-500 glass">
                </div>
                <div>
                    <label class="block text-sm font-medium mb-2 text-gray-300">Branch</label>
                    <input type="text" name="bank_branch" value="{{ driver.bank_branch|default:'' }}"
                           class="w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-teal-500 glass">
                </div>
            </div>

            <!-- Profile Picture -->
            <div>
                <label class="block text-sm font-medium mb-2 text-gray-300">Profile Picture</label>
                <input type="file" name="profile_picture" accept="image/*"
                       class="w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-teal-500 glass">
            </div>

            <!-- Availability -->
            <div>
                <label class="flex items-center space-x-2">
                    <input type="checkbox" name="available" {% if driver.available %}checked{% endif %}
                           class="rounded border-gray-300 text-teal-600 focus:ring-teal-500">
                    <span class="text-sm font-medium text-gray-300">Available for bookings</span>
                </label>
            </div>

            <button type="submit" class="btn-primary">
                Update Profile
            </button>
        </form>
    </div>
</div>

<!-- Ratings Section -->
<div x-show="currentSection === 'ratings'" class="space-y-6">
    <div class="glass p-6 rounded-2xl bg-cream">
        <h3 class="text-2xl font-semibold mb-6 text-amber-300">Customer Ratings & Reviews</h3>

        <!-- Overall Rating -->
        <div class="flex items-center gap-6 mb-8">
            <div class="text-center">
                <div class="text-5xl font-bold text-amber-300" x-text="dashboardData ? dashboardData.avg_rating.toFixed(1) : '4.7'"></div>
                <div class="text-gold text-xl mt-2">
                    <template x-for="i in 5" :key="i">
                        <i :class="i <= (dashboardData ? Math.round(dashboardData.avg_rating) : 0) ? 'fas fa-star' : 'far fa-star'"></i>
                    </template>
                </div>
                <p class="text-gray-300 mt-2" x-text="`${dashboardData ? dashboardData.total_reviews : 0} reviews`"></p>
            </div>

            <!-- Rating Distribution -->
            <div class="flex-1">
                <h4 class="font-semibold mb-4 text-white">Rating Distribution</h4>
                <template x-if="dashboardData && dashboardData.rating_distribution.length > 0">
                    <template x-for="dist in dashboardData.rating_distribution" :key="dist.rating">
                        <div class="flex items-center gap-3 mb-2">
                            <span class="w-8 text-sm text-white" x-text="`${dist.rating}★`"></span>
                            <div class="flex-1 bg-gray-700 rounded-full h-2">
                                <div class="bg-amber-500 h-2 rounded-full"
                                     :style="`width: ${dist.percentage}%`"></div>
                            </div>
                            <span class="w-8 text-sm text-right text-white" x-text="dist.count"></span>
                        </div>
                    </template>
                </template>
                <template x-if="!dashboardData || dashboardData.rating_distribution.length === 0">
                    <p class="text-gray-300">No reviews yet</p>
                </template>
            </div>
        </div>

        <!-- Recent Reviews -->
        <div class="mt-8">
            <h4 class="text-xl font-semibold mb-4 text-white">Recent Reviews</h4>
            <div class="space-y-4">
                <template x-if="dashboardData && dashboardData.recent_reviews && dashboardData.recent_reviews.length > 0">
                    <template x-for="review in dashboardData.recent_reviews" :key="review.id">
                        <div class="glass p-4 rounded-lg">
                            <div class="flex justify-between items-start mb-2">
                                <div>
                                    <p class="font-semibold text-white" x-text="review.customer_name"></p>
                                    <div class="text-gold text-sm">
                                        <template x-for="i in 5" :key="i">
                                            <i :class="i <= review.rating ? 'fas fa-star' : 'far fa-star'"></i>
                                        </template>
                                    </div>
                                </div>
                                <p class="text-sm text-gray-300" x-text="formatDate(review.created_at)"></p>
                            </div>
                            <p class="text-gray-300" x-text="review.comment"></p>
                        </div>
                    </template>
                </template>
                <template x-if="!dashboardData || !dashboardData.recent_reviews || dashboardData.recent_reviews.length === 0">
                    <div class="empty-state">
                        <i class="fas fa-comments"></i>
                        <p>No reviews yet</p>
                    </div>
                </template>
            </div>
        </div>
    </div>
</div>

<!-- Form Modal -->
<div x-show="showForm" x-cloak class="fixed inset-0 bg-black/80 flex items-center justify-center z-50">
    <div class="glass rounded-2xl w-full max-w-4xl max-h-[90vh] mx-4 flex flex-col">
        <div class="form-header">
            <h1 x-text="editId ? `Edit ${formModel}` : `Add ${formModel}`"></h1>
            <button @click="closeForm()" class="absolute top-4 right-4 text-white hover:text-gray-200">
                <i class="fas fa-times text-xl"></i>
            </button>
        </div>

        <div class="modal-body flex-1 overflow-y-auto p-4">
            <form @submit.prevent="submitForm()" class="space-y-4">
                <!-- Dynamic form fields based on model -->
                <template x-if="formModel === 'booking-customers'">
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                        <div>
                            <label class="form-label">Full Name</label>
                            <input type="text" x-model="formData.full_name" class="form-control" required>
                        </div>
                        <div>
                            <label class="form-label">Email</label>
                            <input type="email" x-model="formData.email" class="form-control" required>
                        </div>
                        <div>
                            <label class="form-label">Phone Number</label>
                            <input type="text" x-model="formData.phone_number" class="form-control" required>
                        </div>
                        <div>
                            <label class="form-label">Address</label>
                            <input type="text" x-model="formData.address" class="form-control">
                        </div>
                        <div class="md:col-span-2">
                            <label class="form-label">Notes</label>
                            <textarea x-model="formData.notes" class="form-control" rows="3"></textarea>
                        </div>
                    </div>
                </template>

                <template x-if="formModel === 'bookings'">
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                        <div>
                            <label class="form-label">Customer</label>
                            <select x-model="formData.booking_customer" class="form-select" required>
                                <option value="">Select a customer</option>
                                <template x-for="customer in bookingCustomers" :key="customer.id">
                                    <option :value="customer.id" x-text="customer.full_name"></option>
                                </template>
                            </select>
                        </div>
                        <div>
                            <label class="form-label">Tour</label>
                            <select x-model="formData.tour" class="form-select" required>
                                <option value="">Select a tour</option>
                                <template x-for="tour in tours" :key="tour.id">
                                    <option :value="tour.id" x-text="tour.title"></option>
                                </template>
                            </select>
                        </div>
                        <div>
                            <label class="form-label">Travel Date</label>
                            <input type="date" x-model="formData.travel_date" class="form-control" required>
                        </div>
                        <div>
                            <label class="form-label">Number of Adults</label>
                            <input type="number" x-model="formData.num_adults" class="form-control" min="1" required>
                        </div>
                        <div>
                            <label class="form-label">Number of Children</label>
                            <input type="number" x-model="formData.num_children" class="form-control" min="0">
                        </div>
                        <div>
                            <label class="form-label">Total Price</label>
                            <input type="number" x-model="formData.total_price" class="form-control" step="0.01" required>
                        </div>
                        <div>
                            <label class="form-label">Status</label>
                            <select x-model="formData.status" class="form-select" required>
                                <option value="CONFIRMED">Confirmed</option>
                                <option value="PENDING">Pending</option>
                                <option value="CANCELLED">Cancelled</option>
                            </select>
                        </div>
                        <div class="md:col-span-2">
                            <label class="form-label">Special Requests</label>
                            <textarea x-model="formData.special_requests" class="form-control" rows="3"></textarea>
                        </div>
                    </div>
                </template>

                <template x-if="formModel === 'contact-messages'">
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                        <div>
                            <label class="form-label">Name</label>
                            <input type="text" x-model="formData.name" class="form-control" required>
                        </div>
                        <div>
                            <label class="form-label">Email</label>
                            <input type="email" x-model="formData.email" class="form-control" required>
                        </div>
                        <div>
                            <label class="form-label">Phone</label>
                            <input type="text" x-model="formData.phone" class="form-control">
                        </div>
                        <div>
                            <label class="form-label">Subject</label>
                            <input type="text" x-model="formData.subject" class="form-control" required>
                        </div>
                        <div class="md:col-span-2">
                            <label class="form-label">Message</label>
                            <textarea x-model="formData.message" class="form-control" rows="5" required></textarea>
                        </div>
                        <div>
                            <label class="form-label">Status</label>
                            <select x-model="formData.is_read" class="form-select">
                                <option :value="true">Read</option>
                                <option :value="false">Unread</option>
                            </select>
                        </div>
                        <div>
                            <label class="form-label">Replied</label>
                            <select x-model="formData.is_replied" class="form-select">
                                <option :value="true">Yes</option>
                                <option :value="false">No</option>
                            </select>
                        </div>
                    </div>
                </template>

                <template x-if="formModel === 'destinations'">
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                        <div>
                            <label class="form-label">Name</label>
                            <input type="text" x-model="formData.name" class="form-control" required>
                        </div>
                        <div>
                            <label class="form-label">Slug</label>
                            <input type="text" x-model="formData.slug" class="form-control" required>
                        </div>
                        <div class="md:col-span-2">
                            <label class="form-label">Description</label>
                            <textarea x-model="formData.description" class="form-control" rows="3"></textarea>
                        </div>
                        <div>
                            <label class="form-label">Image</label>
                            <input type="file" @change="formData.image = $event.target.files[0]" class="form-control">
                        </div>
                        <div>
                            <label class="form-label">Status</label>
                            <select x-model="formData.is_active" class="form-select">
                                <option :value="true">Active</option>
                                <option :value="false">Inactive</option>
                            </select>
                        </div>
                    </div>
                </template>

                <template x-if="formModel === 'drivers'">
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                        <div>
                            <label class="form-label">User</label>
                            <select x-model="formData.user" class="form-select" required>
                                <option value="">Select a user</option>
                                <!-- This would need to be populated with users -->
                            </select>
                        </div>
                        <div>
                            <label class="form-label">Phone Number</label>
                            <input type="text" x-model="formData.phone_number" class="form-control" required>
                        </div>
                        <div>
                            <label class="form-label">License Number</label>
                            <input type="text" x-model="formData.license_number" class="form-control" required>
                        </div>
                        <div>
                            <label class="form-label">Rating</label>
                            <input type="number" x-model="formData.rating" class="form-control" min="0" max="5" step="0.1">
                        </div>
                        <div>
                            <label class="form-label">Available</label>
                            <select x-model="formData.available" class="form-select">
                                <option :value="true">Yes</option>
                                <option :value="false">No</option>
                            </select>
                        </div>
                        <div>
                            <label class="form-label">Verified</label>
                            <select x-model="formData.is_verified" class="form-select">
                                <option :value="true">Yes</option>
                                <option :value="false">No</option>
                            </select>
                        </div>
                        <div>
                            <label class="form-label">Bank Name</label>
                            <input type="text" x-model="formData.bank_name" class="form-control">
                        </div>
                        <div>
                            <label class="form-label">Bank Account</label>
                            <input type="text" x-model="formData.bank_account" class="form-control">
                        </div>
                        <div>
                            <label class="form-label">Bank Branch</label>
                            <input type="text" x-model="formData.bank_branch" class="form-control">
                        </div>
                        <div>
                            <label class="form-label">Profile Picture</label>
                            <input type="file" @change="formData.profile_picture = $event.target.files[0]" class="form-control">
                        </div>
                    </div>
                </template>

                <template x-if="formModel === 'payments'">
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                        <div>
                            <label class="form-label">Tour</label>
                            <select x-model="formData.tour" class="form-select" required>
                                <option value="">Select a tour</option>
                                <template x-for="tour in tours" :key="tour.id">
                                    <option :value="tour.id" x-text="tour.title"></option>
                                </template>
                            </select>
                        </div>
                        <div>
                            <label class="form-label">Booking</label>
                            <select x-model="formData.booking" class="form-select">
                                <option value="">Select a booking</option>
                                <template x-for="booking in bookings" :key="booking.id">
                                    <option :value="booking.id" x-text="`Booking #${booking.id}`"></option>
                                </template>
                            </select>
                        </div>
                        <div>
                            <label class="form-label">Amount</label>
                            <input type="number" x-model="formData.amount" class="form-control" step="0.01" required>
                        </div>
                        <div>
                            <label class="form-label">Currency</label>
                            <select x-model="formData.currency" class="form-select" required>
                                <option value="KES">KES</option>
                                <option value="USD">USD</option>
                                <option value="EUR">EUR</option>
                                <option value="GBP">GBP</option>
                            </select>
                        </div>
                        <div>
                            <label class="form-label">Status</label>
                            <select x-model="formData.status" class="form-select" required>
                                <option value="SUCCESS">Success</option>
                                <option value="PENDING">Pending</option>
                                <option value="FAILED">Failed</option>
                            </select>
                        </div>
                        <div>
                            <label class="form-label">Provider</label>
                            <select x-model="formData.provider" class="form-select" required>
                                <option value="PAYSTACK">Paystack</option>
                                <option value="MPESA">M-Pesa</option>
                                <option value="CASH">Cash</option>
                            </select>
                        </div>
                        <div>
                            <label class="form-label">Guest Full Name</label>
                            <input type="text" x-model="formData.guest_full_name" class="form-control">
                        </div>
                        <div>
                            <label class="form-label">Guest Email</label>
                            <input type="email" x-model="formData.guest_email" class="form-control">
                        </div>
                        <div>
                            <label class="form-label">Guest Phone</label>
                            <input type="text" x-model="formData.guest_phone" class="form-control">
                        </div>
                        <div>
                            <label class="form-label">Reference</label>
                            <input type="text" x-model="formData.reference" class="form-control">
                        </div>
                    </div>
                </template>

                <template x-if="formModel === 'reviews'">
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                        <div>
                            <label class="form-label">Booking</label>
                            <select x-model="formData.booking" class="form-select" required>
                                <option value="">Select a booking</option>
                                <template x-for="booking in bookings" :key="booking.id">
                                    <option :value="booking.id" x-text="`Booking #${booking.id}`"></option>
                                </template>
                            </select>
                        </div>
                        <div>
                            <label class="form-label">Customer</label>
                            <select x-model="formData.customer" class="form-select" required>
                                <option value="">Select a customer</option>
                                <template x-for="customer in bookingCustomers" :key="customer.id">
                                    <option :value="customer.id" x-text="customer.full_name"></option>
                                </template>
                            </select>
                        </div>
                        <div>
                            <label class="form-label">Rating</label>
                            <select x-model="formData.rating" class="form-select" required>
                                <option value="5">5 Stars</option>
                                <option value="4">4 Stars</option>
                                <option value="3">3 Stars</option>
                                <option value="2">2 Stars</option>
                                <option value="1">1 Star</option>
                            </select>
                        </div>
                        <div>
                            <label class="form-label">Date</label>
                            <input type="date" x-model="formData.created_at" class="form-control" required>
                        </div>
                        <div class="md:col-span-2">
                            <label class="form-label">Comment</label>
                            <textarea x-model="formData.comment" class="form-control" rows="4"></textarea>
                        </div>
                    </div>
                </template>

                <template x-if="formModel === 'tour-categories'">
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                        <div>
                            <label class="form-label">Name</label>
                            <input type="text" x-model="formData.name" class="form-control" required>
                        </div>
                        <div>
                            <label class="form-label">Slug</label>
                            <input type="text" x-model="formData.slug" class="form-control" required>
                        </div>
                        <div class="md:col-span-2">
                            <label class="form-label">Description</label>
                            <textarea x-model="formData.description" class="form-control" rows="3"></textarea>
                        </div>
                        <div>
                            <label class="form-label">Image</label>
                            <input type="file" @change="formData.image = $event.target.files[0]" class="form-control">
                        </div>
                        <div>
                            <label class="form-label">Status</label>
                            <select x-model="formData.is_active" class="form-select">
                                <option :value="true">Active</option>
                                <option :value="false">Inactive</option>
                            </select>
                        </div>
                    </div>
                </template>

                <template x-if="formModel === 'trips'">
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                        <div>
                            <label class="form-label">Driver</label>
                            <select x-model="formData.driver" class="form-select" required>
                                <option value="">Select a driver</option>
                                <template x-for="driver in drivers" :key="driver.id">
                                    <option :value="driver.id" x-text="driver.user.get_full_name"></option>
                                </template>
                            </select>
                        </div>
                        <div>
                            <label class="form-label">Vehicle</label>
                            <select x-model="formData.vehicle" class="form-select">
                                <option value="">Select a vehicle</option>
                                <template x-for="vehicle in vehicles" :key="vehicle.id">
                                    <option :value="vehicle.id" x-text="`${vehicle.make} ${vehicle.model}`"></option>
                                </template>
                            </select>
                        </div>
                        <div>
                            <label class="form-label">Destination</label>
                            <input type="text" x-model="formData.destination" class="form-control" required>
                        </div>
                        <div>
                            <label class="form-label">Date</label>
                            <input type="date" x-model="formData.date" class="form-control" required>
                        </div>
                        <div>
                            <label class="form-label">Start Time</label>
                            <input type="time" x-model="formData.start_time" class="form-control" required>
                        </div>
                        <div>
                            <label class="form-label">End Time</label>
                            <input type="time" x-model="formData.end_time" class="form-control" required>
                        </div>
                        <div>
                            <label class="form-label">Status</label>
                            <select x-model="formData.status" class="form-select" required>
                                <option value="SCHEDULED">Scheduled</option>
                                <option value="IN_PROGRESS">In Progress</option>
                                <option value="COMPLETED">Completed</option>
                                <option value="CANCELLED">Cancelled</option>
                            </select>
                        </div>
                        <div>
                            <label class="form-label">Earnings</label>
                            <input type="number" x-model="formData.earnings" class="form-control" step="0.01">
                        </div>
                        <div class="md:col-span-2">
                            <label class="form-label">Notes</label>
                            <textarea x-model="formData.notes" class="form-control" rows="3"></textarea>
                        </div>
                    </div>
                </template>

                <template x-if="formModel === 'vehicles'">
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                        <div>
                            <label class="form-label">Make</label>
                            <input type="text" x-model="formData.make" class="form-control" required>
                        </div>
                        <div>
                            <label class="form-label">Model</label>
                            <input type="text" x-model="formData.model" class="form-control" required>
                        </div>
                        <div>
                            <label class="form-label">Year</label>
                            <input type="number" x-model="formData.year" class="form-control" required>
                        </div>
                        <div>
                            <label class="form-label">License Plate</label>
                            <input type="text" x-model="formData.license_plate" class="form-control" required>
                        </div>
                        <div>
                            <label class="form-label">Capacity</label>
                            <input type="number" x-model="formData.capacity" class="form-control" required>
                        </div>
                        <div>
                            <label class="form-label">Status</label>
                            <select x-model="formData.status" class="form-select" required>
                                <option value="ACTIVE">Active</option>
                                <option value="MAINTENANCE">Maintenance</option>
                                <option value="OUT_OF_SERVICE">Out of Service</option>
                            </select>
                        </div>
                        <div>
                            <label class="form-label">Next Maintenance Date</label>
                            <input type="date" x-model="formData.next_maintenance_date" class="form-control">
                        </div>
                        <div>
                            <label class="form-label">Driver</label>
                            <select x-model="formData.driver" class="form-select">
                                <option value="">Select a driver</option>
                                <template x-for="driver in drivers" :key="driver.id">
                                    <option :value="driver.id" x-text="driver.user.get_full_name"></option>
                                </template>
                            </select>
                        </div>
                    </div>
                </template>

                <div class="text-center">
                    <button type="submit" class="submit-btn">
                        <i class="fas fa-save"></i>
                        <span x-text="editId ? 'Update' : 'Save'"></span>
                    </button>
                </div>
            </form>
        </div>
    </div>
</div>
<!-- Add Tour Modal -->
<div x-show="showAddTour" x-cloak class="fixed inset-0 bg-black/80 flex items-center justify-center z-50 p-4">
    <div class="glass rounded-2xl w-full max-w-4xl max-h-[90vh] mx-auto flex flex-col backdrop-blur-lg border border-white/20">
        <!-- Header -->
        <div class="form-header relative bg-gradient-to-r from-teal-600 to-emerald-700 rounded-t-2xl p-6">
            <div class="text-center">
                <h1 class="text-2xl font-bold text-white mb-2">Create a New Safari Tour</h1>
                <p class="text-teal-100">Design an unforgettable experience for your guests</p>
            </div>
            <button @click="showAddTour = false" class="absolute top-6 right-6 text-white hover:text-gray-200 transition-colors duration-200">
                <i class="fas fa-times text-xl"></i>
            </button>
        </div>

        <div class="modal-body flex-1 overflow-y-auto p-6 bg-white/5">
            <!-- Enhanced Wizard Progress -->
            <div class="wizard-progress mb-8">
                <div class="flex items-center justify-between relative">
                    <!-- Progress Line -->
                    <div class="absolute top-4 left-0 right-0 h-1 bg-gray-600/50 -z-10">
                        <div class="h-full bg-gradient-to-r from-teal-500 to-emerald-500 transition-all duration-500"
                             :style="`width: ${((tourWizardStep - 1) / 3) * 100}%`"></div>
                    </div>

                    <!-- Steps -->
                    <template x-for="step in 4" :key="step">
                        <div class="flex flex-col items-center">
                            <div class="wizard-step-indicator flex items-center justify-center w-8 h-8 rounded-full border-2 transition-all duration-300"
                                 :class="{
                                     'bg-teal-500 border-teal-500 text-white': tourWizardStep > step,
                                     'bg-emerald-500 border-emerald-500 text-white': tourWizardStep === step,
                                     'border-gray-400 text-gray-400': tourWizardStep < step
                                 }">
                                <span x-text="step" class="text-sm font-semibold"></span>
                                <i x-show="tourWizardStep > step" class="fas fa-check text-xs ml-0.5"></i>
                            </div>
                            <span class="text-xs mt-2 font-medium transition-colors duration-300"
                                  :class="{
                                      'text-emerald-400': tourWizardStep >= step,
                                      'text-gray-400': tourWizardStep < step
                                  }"
                                  x-text="['Basic Info', 'Pricing & Duration', 'Location', 'Itinerary'][step - 1]">
                            </span>
                        </div>
                    </template>
                </div>
            </div>

            <form @submit.prevent="createTour" enctype="multipart/form-data" class="needs-validation" novalidate>
                {% csrf_token %}

                <!-- Step 1: Basic Info -->
                <div class="wizard-step transition-all duration-500" :class="{'active block': tourWizardStep === 1, 'hidden': tourWizardStep !== 1}">
                    <div class="section-card basic-info glass rounded-xl p-6 mb-6 border border-white/10">
                        <div class="section-header flex items-center mb-6">
                            <div class="w--10 h-10 bg-teal-500/20 rounded-lg flex items-center justify-center mr-4">
                                <i class="fas fa-info-circle text-teal-400"></i>
                            </div>
                            <div>
                                <h3 class="section-title text-lg font-semibold text-white">Basic Information</h3>
                                <p class="text-gray-400 text-sm">Essential details about your tour</p>
                            </div>
                        </div>
                        <div class="section-body space-y-4">
                            <div class="form-group">
                                <label class="form-label text-white font-medium">Tour Title *</label>
                                <input type="text" name="title" class="form-control bg-white/5 border-white/10 text-white placeholder-gray-400 focus:border-teal-400 focus:ring-teal-400"
                                       placeholder="e.g., Maasai Mara Wildlife Adventure" required>
                                <div class="text-xs text-gray-400 mt-1">A catchy and descriptive title for your tour</div>
                            </div>
                            <div class="form-group">
                                <label class="form-label text-white font-medium">Tagline</label>
                                <input type="text" name="tagline" class="form-control bg-white/5 border-white/10 text-white placeholder-gray-400 focus:border-teal-400 focus:ring-teal-400"
                                       placeholder="e.g., Experience the Great Migration">
                            </div>
                            <div class="form-group">
                                <label class="form-label text-white font-medium">Description *</label>
                                <textarea name="description" rows="4" class="form-control bg-white/5 border-white/10 text-white placeholder-gray-400 focus:border-teal-400 focus:ring-teal-400"
                                          placeholder="Describe the tour experience, what makes it special..." required></textarea>
                            </div>
                            <div class="form-group">
                                <label class="form-label text-white font-medium">Category *</label>
                                <select name="category" class="form-select bg-white/5 border-white/10 text-white focus:border-teal-400 focus:ring-teal-400" required>
                                    <option value="" class="bg-gray-800">Select a category</option>
                                    <template x-for="category in categories" :key="category.id">
                                        <option :value="category.id" x-text="category.name" class="bg-gray-800"></option>
                                    </template>
                                </select>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Step 2: Pricing & Duration -->
                <div class="wizard-step transition-all duration-500" :class="{'active block': tourWizardStep === 2, 'hidden': tourWizardStep !== 2}">
                    <div class="grid grid-cols-1 lg:grid-cols-2 gap-6 mb-6">
                        <!-- Pricing -->
                        <div class="section-card pricing glass rounded-xl p-6 border border-white/10">
                            <div class="section-header flex items-center mb-6">
                                <div class="w-10 h-10 bg-blue-500/20 rounded-lg flex items-center justify-center mr-4">
                                    <i class="fas fa-tag text-blue-400"></i>
                                </div>
                                <div>
                                    <h3 class="section-title text-lg font-semibold text-white">Pricing</h3>
                                    <p class="text-gray-400 text-sm">Set your tour pricing</p>
                                </div>
                            </div>
                            <div class="section-body space-y-4">
                                <div class="form-group">
                                    <label class="form-label text-white font-medium">Price per Person *</label>
                                    <div class="relative">
                                        <input type="number" name="price_per_person" class="form-control bg-white/5 border-white/10 text-white pl-8 focus:border-teal-400 focus:ring-teal-400"
                                               placeholder="0.00" min="0" step="0.01" required>
                                        <i class="fas fa-dollar-sign absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"></i>
                                    </div>
                                </div>
                                <div class="form-group">
                                    <label class="form-label text-white font-medium">Discount Price</label>
                                    <input type="number" name="discount_price" class="form-control bg-white/5 border-white/10 text-white focus:border-teal-400 focus:ring-teal-400"
                                           placeholder="0.00" min="0" step="0.01">
                                </div>
                                <div class="form-group">
                                    <label class="form-label text-white font-medium">Currency</label>
                                    <select name="currency" class="form-select bg-white/5 border-white/10 text-white focus:border-teal-400 focus:ring-teal-400">
                                        <option value="KES" selected class="bg-gray-800">KES - Kenyan Shilling</option>
                                        <option value="USD" class="bg-gray-800">USD - US Dollar</option>
                                        <option value="EUR" class="bg-gray-800">EUR - Euro</option>
                                        <option value="GBP" class="bg-gray-800">GBP - British Pound</option>
                                    </select>
                                </div>
                            </div>
                        </div>

                        <!-- Duration -->
                        <div class="section-card duration glass rounded-xl p-6 border border-white/10">
                            <div class="section-header flex items-center mb-6">
                                <div class="w-10 h-10 bg-purple-500/20 rounded-lg flex items-center justify-center mr-4">
                                    <i class="fas fa-clock text-purple-400"></i>
                                </div>
                                <div>
                                    <h3 class="section-title text-lg font-semibold text-white">Duration</h3>
                                    <p class="text-gray-400 text-sm">Tour length and difficulty</p>
                                </div>
                            </div>
                            <div class="section-body space-y-4">
                                <div class="grid grid-cols-2 gap-4">
                                    <div class="form-group">
                                        <label class="form-label text-white font-medium">Days *</label>
                                        <input type="number" name="duration_days" class="form-control bg-white/5 border-white/10 text-white focus:border-teal-400 focus:ring-teal-400"
                                               min="1" required>
                                    </div>
                                    <div class="form-group">
                                        <label class="form-label text-white font-medium">Nights *</label>
                                        <input type="number" name="duration_nights" class="form-control bg-white/5 border-white/10 text-white focus:border-teal-400 focus:ring-teal-400"
                                               min="0" required>
                                    </div>
                                </div>
                                <div class="form-group">
                                    <label class="form-label text-white font-medium">Difficulty Level</label>
                                    <select name="difficulty" class="form-select bg-white/5 border-white/10 text-white focus:border-teal-400 focus:ring-teal-400">
                                        <option value="Easy" class="bg-gray-800">Easy</option>
                                        <option value="Moderate" class="bg-gray-800">Moderate</option>
                                        <option value="Challenging" class="bg-gray-800">Challenging</option>
                                        <option value="Strenuous" class="bg-gray-800">Strenuous</option>
                                    </select>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
                        <!-- Group Size -->
                        <div class="section-card group-size glass rounded-xl p-6 border border-white/10">
                            <div class="section-header flex items-center mb-6">
                                <div class="w-10 h-10 bg-orange-500/20 rounded-lg flex items-center justify-center mr-4">
                                    <i class="fas fa-users text-orange-400"></i>
                                </div>
                                <div>
                                    <h3 class="section-title text-lg font-semibold text-white">Group Size</h3>
                                    <p class="text-gray-400 text-sm">Capacity limits</p>
                                </div>
                            </div>
                            <div class="section-body space-y-4">
                                <div class="form-group">
                                    <label class="form-label text-white font-medium">Minimum Group Size *</label>
                                    <input type="number" name="min_group_size" class="form-control bg-white/5 border-white/10 text-white focus:border-teal-400 focus:ring-teal-400"
                                           min="1" required>
                                </div>
                                <div class="form-group">
                                    <label class="form-label text-white font-medium">Maximum Group Size *</label>
                                    <input type="number" name="max_group_size" class="form-control bg-white/5 border-white/10 text-white focus:border-teal-400 focus:ring-teal-400"
                                           min="1" required>
                                </div>
                            </div>
                        </div>

                        <!-- Media -->
                        <div class="section-card media glass rounded-xl p-6 border border-white/10">
                            <div class="section-header flex items-center mb-6">
                                <div class="w-10 h-10 bg-pink-500/20 rounded-lg flex items-center justify-center mr-4">
                                    <i class="fas fa-images text-pink-400"></i>
                                </div>
                                <div>
                                    <h3 class="section-title text-lg font-semibold text-white">Media</h3>
                                    <p class="text-gray-400 text-sm">Images and videos</p>
                                </div>
                            </div>
                            <div class="section-body space-y-4">
                                <div class="form-group image-upload">
                                    <label class="form-label text-white font-medium">Main Image *</label>
                                    <div class="border-2 border-dashed border-white/20 rounded-lg p-4 text-center hover:border-teal-400 transition-colors duration-200">
                                        <input type="file" name="image" class="hidden" id="mainImage" accept="image/*" required>
                                        <label for="mainImage" class="cursor-pointer">
                                            <i class="fas fa-cloud-upload-alt text-2xl text-gray-400 mb-2"></i>
                                            <p class="text-sm text-gray-400">Click to upload main tour image</p>
                                            <p class="text-xs text-gray-500">Recommended: 1200x800px</p>
                                        </label>
                                    </div>
                                </div>
                                <div class="form-group">
                                    <label class="form-label text-white font-medium">Video URL</label>
                                    <input type="text" name="video" class="form-control bg-white/5 border-white/10 text-white focus:border-teal-400 focus:ring-teal-400"
                                           placeholder="https://youtube.com/...">
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Step 3: Location -->
                <div class="wizard-step transition-all duration-500" :class="{'active block': tourWizardStep === 3, 'hidden': tourWizardStep !== 3}">
                    <div class="section-card location glass rounded-xl p-6 border border-white/10">
                        <div class="section-header flex items-center mb-6">
                            <div class="w-10 h-10 bg-red-500/20 rounded-lg flex items-center justify-center mr-4">
                                <i class="fas fa-map-marker-alt text-red-400"></i>
                            </div>
                            <div>
                                <h3 class="section-title text-lg font-semibold text-white">Location & Destinations</h3>
                                <p class="text-gray-400 text-sm">Where your tour takes place</p>
                            </div>
                        </div>
                        <div class="section-body space-y-4">
                            <div class="form-group">
                                <label class="form-label text-white font-medium">Departure Point *</label>
                                <input type="text" name="departure_point" class="form-control bg-white/5 border-white/10 text-white focus:border-teal-400 focus:ring-teal-400"
                                       placeholder="e.g., Nairobi, Kenya" required>
                            </div>
                            <div class="form-group">
                                <label class="form-label text-white font-medium">Destinations Visited</label>
                                <input type="text" name="destinations_visited" class="form-control bg-white/5 border-white/10 text-white focus:border-teal-400 focus:ring-teal-400"
                                       placeholder="e.g., Maasai Mara, Serengeti, Ngorongoro">
                            </div>
                            <div class="form-group">
                                <label class="form-label text-white font-medium">Select Destinations</label>
                                <select name="destinations" multiple class="form-select bg-white/5 border-white/10 text-white focus:border-teal-400 focus:ring-teal-400 h-32">
                                    <template x-for="destination in destinations" :key="destination.id">
                                        <option :value="destination.id" x-text="destination.name" class="bg-gray-800"></option>
                                    </template>
                                </select>
                                <div class="text-xs text-gray-400 mt-1">Hold Ctrl/Cmd to select multiple destinations</div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Step 4: Itinerary Details -->
                <div class="wizard-step transition-all duration-500" :class="{'active block': tourWizardStep === 4, 'hidden': tourWizardStep !== 4}">
                    <!-- Itinerary Toggle -->
                    <div class="mb-6">
                        <label class="flex items-center justify-between p-4 glass rounded-xl border border-white/10 cursor-pointer hover:border-teal-400/50 transition-colors duration-200">
                            <div>
                                <span class="text-white font-medium block">Include Detailed Itinerary</span>
                                <span class="text-gray-400 text-sm">Add day-by-day schedule, inclusions, and exclusions</span>
                            </div>
                            <label class="toggle-switch">
                                <input type="checkbox" x-model="showItineraryDetails">
                                <span class="toggle-slider"></span>
                            </label>
                        </label>
                    </div>

                    <!-- Itinerary & Highlights -->
                    <div class="section-card itinerary optional-section glass rounded-xl p-6 border border-white/10 transition-all duration-500"
                         :class="{'opacity-100': showItineraryDetails, 'opacity-40': !showItineraryDetails}">
                        <div class="section-header flex items-center mb-6">
                            <div class="w-10 h-10 bg-green-500/20 rounded-lg flex items-center justify-center mr-4">
                                <i class="fas fa-route text-green-400"></i>
                            </div>
                            <div>
                                <h3 class="section-title text-lg font-semibold text-white">Itinerary Details</h3>
                                <p class="text-gray-400 text-sm">Daily schedule and what's included</p>
                            </div>
                        </div>
                        <div class="section-body space-y-4" :class="{'pointer-events-none': !showItineraryDetails}">
                            <div class="form-group">
                                <label class="form-label text-white font-medium">Tour Highlights</label>
                                <textarea name="highlights" rows="3" class="form-control bg-white/5 border-white/10 text-white focus:border-teal-400 focus:ring-teal-400"
                                          placeholder="Key attractions and unique experiences..."></textarea>
                            </div>
                            <div class="form-group json-field">
                                <label class="form-label text-white font-medium">Itinerary (JSON format)</label>
                                <textarea name="itinerary" rows="4" class="form-control bg-white/5 border-white/10 text-white font-mono text-sm focus:border-teal-400 focus:ring-teal-400"
                                          placeholder='[{"day": 1, "title": "Arrival", "description": "Welcome and orientation..."}]'></textarea>
                                <div class="json-hint text-xs text-gray-400 mt-1">Format: [{"day": 1, "title": "Day 1", "description": "Activities..."}]</div>
                            </div>
                            <div class="grid grid-cols-1 lg:grid-cols-2 gap-4">
                                <div class="form-group json-field">
                                    <label class="form-label text-white font-medium">Inclusions</label>
                                    <textarea name="inclusions" rows="3" class="form-control bg-white/5 border-white/10 text-white font-mono text-sm focus:border-teal-400 focus:ring-teal-400"
                                              placeholder='["Accommodation", "Meals", "Transport"]'></textarea>
                                    <div class="json-hint text-xs text-gray-400 mt-1">What's included in the tour</div>
                                </div>
                                <div class="form-group json-field">
                                    <label class="form-label text-white font-medium">Exclusions</label>
                                    <textarea name="exclusions" rows="3" class="form-control bg-white/5 border-white/10 text-white font-mono text-sm focus:border-teal-400 focus:ring-teal-400"
                                              placeholder='["International flights", "Travel insurance"]'></textarea>
                                    <div class="json-hint text-xs text-gray-400 mt-1">What's not included in the tour</div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Enhanced Wizard Navigation -->
                <div class="flex justify-between items-center mt-8 pt-6 border-t border-white/10">
                    <button type="button" @click="tourWizardStep > 1 ? tourWizardStep-- : showAddTour = false"
                            class="px-6 py-3 bg-gray-600/50 text-white rounded-xl hover:bg-gray-600 transition-all duration-200 border border-gray-500/50 flex items-center group">
                        <i class="fas fa-arrow-left mr-2 group-hover:-translate-x-1 transition-transform duration-200"></i>
                        <span x-text="tourWizardStep > 1 ? 'Previous' : 'Cancel'"></span>
                    </button>

                    <div class="text-sm text-gray-400" x-text="`Step ${tourWizardStep} of 4`"></div>

                    <template x-if="tourWizardStep < 4">
                        <button type="button" @click="tourWizardStep++"
                                class="px-6 py-3 bg-gradient-to-r from-teal-500 to-emerald-600 text-white rounded-xl hover:from-teal-600 hover:to-emerald-700 transition-all duration-200 shadow-lg hover:shadow-teal-500/25 flex items-center group">
                            Next <i class="fas fa-arrow-right ml-2 group-hover:translate-x-1 transition-transform duration-200"></i>
                        </button>
                    </template>

                    <button type="submit" x-show="tourWizardStep === 4"
                            class="px-8 py-3 bg-gradient-to-r from-emerald-500 to-green-600 text-white rounded-xl hover:from-emerald-600 hover:to-green-700 transition-all duration-200 shadow-lg hover:shadow-emerald-500/25 flex items-center group font-semibold">
                        <i class="fas fa-save mr-2 group-hover:scale-110 transition-transform duration-200"></i>
                        Create Tour
                    </button>
                </div>
            </form>
        </div>
    </div>
</div>

<style>
.wizard-step {
    opacity: 0;
    transform: translateX(20px);
    transition: all 0.3s ease-in-out;
}

.wizard-step.active {
    opacity: 1;
    transform: translateX(0);
}

.toggle-switch {
    position: relative;
    display: inline-block;
    width: 60px;
    height: 30px;
}

.toggle-switch input {
    opacity: 0;
    width: 0;
    height: 0;
}

.toggle-slider {
    position: absolute;
    cursor: pointer;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background-color: #4B5563;
    transition: .4s;
    border-radius: 34px;
}

.toggle-slider:before {
    position: absolute;
    content: "";
    height: 22px;
    width: 22px;
    left: 4px;
    bottom: 4px;
    background-color: white;
    transition: .4s;
    border-radius: 50%;
}

input:checked + .toggle-slider {
    background-color: #10B981;
}

input:checked + .toggle-slider:before {
    transform: translateX(30px);
}

.form-control:focus, .form-select:focus {
    box-shadow: 0 0 0 3px rgba(16, 185, 129, 0.1);
}

.glass {
    background: rgba(255, 255, 255, 0.05);
    backdrop-filter: blur(10px);
}
</style>

</main>
<script>
// Main application state and logic - OPTIMIZED DJANGO INTEGRATION
function officeManagerApp() {
    return {
        // UI state
        darkMode: false,
        mobileMenuOpen: false,
        showTripForm: false,
        showAddTour: false,
        editTourId: null,
        currentSection: 'dashboard',
        loading: true,
        showForm: false,
        formModel: '',
        editId: null,
        activeTab: 'overview',
        tourViewMode: 'table',
        tourWizardStep: 1,
        showItineraryDetails: false,
        autoRefresh: true,
        refreshInterval: null,
        customerSearch: '',

        // Data - Optimized mapping
        dashboardData: {
            driver: { available: true },
            total_earnings: 0,
            monthly_earnings: 0,
            completed_trips: 0,
            active_tours: 0,
            today_trips: [],
            upcoming_trips: [],
            recent_bookings: [],
            vehicle_status: null,
            tour_stats: { total: 0, approved: 0, pending: 0, active: 0 },
            avg_rating: 4.7,
            total_reviews: 0,
            rating_distribution: []
        },
        tours: [],
        destinations: [],
        categories: [],
        notification: null,
        paymentStats: {
            total_received: 0,
            total_withdrawn: 0,
            pending_withdrawal: 0,
            successful_payments: 0,
            pending_payments: 0,
            failed_payments: 0,
            recent_transactions: []
        },
        customers: [],

        // Admin data
        bookingCustomers: [],
        bookings: [],
        contactMessages: [],
        drivers: [],
        payments: [],
        reviews: [],
        tourCategories: [],
        trips: [],
        vehicles: [],

        // Current selected item for details view
        selectedItem: null,
        selectedModel: null,

        // Pagination
        currentPage: 1,
        itemsPerPage: 10,
        totalItems: 0,

        // Search and filters
        searchQuery: '',
        statusFilter: '',
        dateFilter: '',
        dateRange: { start: '', end: '' },

        // Form data
        formData: {},

        // Selection
        selectAll: false,
        selectedItems: [],

        // Initialize method - OPTIMIZED
        init() {
            console.log('🚀 Initializing Office Manager - Optimized Django Integration');

            // Check for system dark mode preference
            if (window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches) {
                this.darkMode = true;
            }

            // Set default values
            this.currentSection = 'dashboard';
            this.tourViewMode = 'table';

            // Fetch initial data with error handling
            this.loadInitialData();

            // Start auto refresh
            this.startAutoRefresh();

            // Check URL parameters for section
            const urlParams = new URLSearchParams(window.location.search);
            const section = urlParams.get('section');
            if (section && this.isValidSection(section)) {
                this.currentSection = section;
            }

            // Set up debounced search
            this.debounceSearch = this.debounce(() => {
                this.updateFilteredData();
            }, 500);
        },

        // Load all initial data with proper error handling
        async loadInitialData() {
            try {
                this.loading = true;

                // Fetch critical data first
                await Promise.all([
                    this.fetchDashboardData(),
                    this.fetchTours(),
                    this.fetchPayments()
                ]);

                // Then fetch secondary data
                await Promise.all([
                    this.fetchBookings(),
                    this.fetchCustomers(),
                    this.fetchTrips()
                ]);

                // Finally fetch admin data
                await Promise.all([
                    this.fetchBookingCustomers(),
                    this.fetchDrivers(),
                    this.fetchVehicles()
                ]);

                console.log('✅ All data loaded successfully');

            } catch (error) {
                console.error('❌ Error loading initial data:', error);
                this.showNotification('Error loading data. Please refresh the page.', 'error');
            } finally {
                this.loading = false;
            }
        },

        // Validate section navigation
        isValidSection(section) {
            const validSections = [
                'dashboard', 'earnings', 'payments', 'my-tours', 'customers',
                'booking-customers', 'bookings', 'contact-messages', 'destinations',
                'drivers', 'reviews', 'trips', 'vehicles'
            ];
            return validSections.includes(section);
        },

        // Navigation methods - OPTIMIZED
        navigateTo(section) {
            if (!this.isValidSection(section)) {
                console.warn('Invalid section:', section);
                return;
            }

            this.currentSection = section;
            this.selectedItem = null;
            this.selectedModel = null;

            // Update URL without page reload
            const url = new URL(window.location);
            url.searchParams.set('section', section);
            window.history.pushState({}, '', url);

            // Refresh data for the current section
            this.refreshSectionData(section);
        },

        refreshSectionData(section) {
            const refreshMap = {
                'dashboard': () => this.fetchDashboardData(),
                'earnings': () => this.fetchPaymentStats(),
                'payments': () => this.fetchPayments(),
                'my-tours': () => this.fetchTours(),
                'customers': () => this.fetchCustomers(),
                'booking-customers': () => this.fetchBookingCustomers(),
                'bookings': () => this.fetchBookings(),
                'contact-messages': () => this.fetchContactMessages(),
                'destinations': () => this.fetchDestinations(),
                'drivers': () => this.fetchDrivers(),
                'reviews': () => this.fetchReviews(),
                'trips': () => this.fetchTrips(),
                'vehicles': () => this.fetchVehicles()
            };

            const refreshFunction = refreshMap[section];
            if (refreshFunction) {
                refreshFunction();
            }
        },

        // Data fetching methods - OPTIMIZED
        async fetchDashboardData() {
            try {
                const response = await fetch('/api/dashboard/');
                if (response.ok) {
                    const data = await response.json();
                    this.dashboardData = data;
                    console.log('📊 Dashboard data loaded');
                } else {
                    await this.calculateRealDashboardStats();
                }
            } catch (error) {
                console.error('Error fetching dashboard data:', error);
                await this.calculateRealDashboardStats();
            }
        },

        async calculateRealDashboardStats() {
            try {
                const totalTours = this.tours.length;
                const approvedTours = this.tours.filter(tour => tour.is_approved).length;
                const pendingTours = this.tours.filter(tour => !tour.is_approved).length;
                const activeTours = this.tours.filter(tour => tour.available && tour.is_approved).length;

                // Calculate earnings from SUCCESS payments
                const successfulPayments = this.payments.filter(p => p.status === 'SUCCESS');
                const totalEarnings = successfulPayments.reduce((sum, payment) => sum + parseFloat(payment.amount || 0), 0);

                // Calculate monthly earnings
                const currentMonth = new Date().getMonth();
                const currentYear = new Date().getFullYear();
                const monthlyEarnings = successfulPayments
                    .filter(payment => {
                        const paymentDate = new Date(payment.paid_on || payment.created_at);
                        return paymentDate.getMonth() === currentMonth && paymentDate.getFullYear() === currentYear;
                    })
                    .reduce((sum, payment) => sum + parseFloat(payment.amount || 0), 0);

                // Calculate completed trips
                const completedTrips = this.trips.filter(trip => trip.status === 'COMPLETED').length;

                // Get today's trips
                const today = new Date().toISOString().split('T')[0];
                const todayTrips = this.trips.filter(trip => trip.date === today);

                // Get recent bookings (last 5)
                const recentBookings = this.bookings
                    .slice(0, 5)
                    .map(booking => ({
                        id: booking.id,
                        customer: booking.booking_customer_name || 'Unknown',
                        service: booking.service_name,
                        date: booking.travel_date,
                        amount: booking.total_price,
                        reference: booking.booking_reference
                    }));

                // Calculate average rating from reviews
                const reviewsWithRatings = this.reviews.filter(review => review.rating);
                const avgRating = reviewsWithRatings.length > 0
                    ? reviewsWithRatings.reduce((sum, review) => sum + review.rating, 0) / reviewsWithRatings.length
                    : 4.7;

                this.dashboardData = {
                    ...this.dashboardData,
                    total_earnings: totalEarnings,
                    monthly_earnings: monthlyEarnings,
                    completed_trips: completedTrips,
                    active_tours: activeTours,
                    today_trips: todayTrips,
                    recent_bookings: recentBookings,
                    avg_rating: avgRating,
                    total_reviews: reviewsWithRatings.length,
                    tour_stats: {
                        total: totalTours,
                        approved: approvedTours,
                        pending: pendingTours,
                        active: activeTours
                    }
                };
            } catch (error) {
                console.error('Error calculating dashboard stats:', error);
            }
        },

        async fetchTours() {
            try {
                const response = await fetch('/api/tours/');
                if (response.ok) {
                    const toursData = await response.json();
                    this.tours = this.transformToursData(toursData);
                    this.updateTourStats();
                    console.log(`✅ Loaded ${this.tours.length} tours`);
                } else {
                    console.error('Failed to fetch tours:', response.status);
                    this.tours = [];
                }
            } catch (error) {
                console.error('Error fetching tours:', error);
                this.tours = [];
            }
        },

        // Transform tours data for consistent structure
        transformToursData(toursData) {
            return toursData.map(tour => ({
                // Basic info
                id: tour.id,
                title: tour.title,
                slug: tour.slug,
                tagline: tour.tagline || '',
                description: tour.description || '',

                // Pricing
                price_per_person: parseFloat(tour.price_per_person) || 0,
                discount_price: parseFloat(tour.discount_price) || 0,
                current_price: tour.current_price || parseFloat(tour.price_per_person) || 0,
                currency: tour.currency || 'KES',
                has_discount: tour.has_discount || false,

                // Duration
                duration_days: tour.duration_days || 1,
                duration_nights: tour.duration_nights || 0,

                // Status
                available: tour.available || false,
                is_approved: tour.is_approved || false,
                featured: tour.featured || false,
                is_popular: tour.is_popular || false,

                // Category
                category: tour.category,
                category_name: tour.category_name || 'Uncategorized',

                // Creator
                created_by: tour.created_by,
                created_by_name: tour.created_by_name || 'Unknown',

                // Media
                image: tour.image || tour.image_url,

                // Location
                departure_point: tour.departure_point || 'Nairobi',

                // Timestamps
                created_at: tour.created_at,
                updated_at: tour.updated_at
            }));
        },

        updateTourStats() {
            const totalTours = this.tours.length;
            const approvedTours = this.tours.filter(tour => tour.is_approved).length;
            const pendingTours = this.tours.filter(tour => !tour.is_approved).length;
            const activeTours = this.tours.filter(tour => tour.available && tour.is_approved).length;

            this.dashboardData.tour_stats = {
                total: totalTours,
                approved: approvedTours,
                pending: pendingTours,
                active: activeTours
            };
        },

        // Get tours for display in My Tours section
        getMyTours() {
            return this.tours.map(tour => ({
                id: tour.id,
                name: tour.title,
                status: tour.is_approved ? 'Approved' : 'Pending',
                price: tour.current_price,
                duration: tour.duration_days,
                available: tour.available,
                is_approved: tour.is_approved,
                is_popular: tour.is_popular,
                featured: tour.featured,
                category: tour.category_name,
                created_by: tour.created_by_name,
                created_at: tour.created_at,
                bookings: this.getTourBookingsCount(tour.id),
                tagline: tour.tagline,
                description: tour.description,
                currency: tour.currency,
                image: tour.image,
                departure_point: tour.departure_point
            }));
        },

        getTourBookingsCount(tourId) {
            return this.bookings.filter(booking => booking.tour_id === tourId).length;
        },

        async fetchBookings() {
            try {
                const response = await fetch('/api/bookings/');
                if (response.ok) {
                    const bookingsData = await response.json();
                    this.bookings = this.transformBookingsData(bookingsData);
                    console.log(`✅ Loaded ${this.bookings.length} bookings`);
                } else {
                    this.bookings = [];
                }
            } catch (error) {
                console.error('Error fetching bookings:', error);
                this.bookings = [];
            }
        },

        transformBookingsData(bookingsData) {
            return bookingsData.map(booking => ({
                id: booking.id,
                booking_reference: booking.booking_reference,
                booking_customer_name: booking.booking_customer_name || 'Unknown',
                tour_id: booking.tour_id,
                tour_name: booking.tour_name,
                booking_type: booking.booking_type,
                num_adults: booking.num_adults || 1,
                num_children: booking.num_children || 0,
                total_passengers: booking.total_passengers || 1,
                travel_date: booking.travel_date,
                status: booking.status,
                total_price: parseFloat(booking.total_price) || 0,
                currency: booking.currency || 'KES',
                is_paid: booking.is_paid || false,
                service_name: booking.service_name,
                created_at: booking.created_at
            }));
        },

        async fetchPayments() {
            try {
                const response = await fetch('/api/payments/');
                if (response.ok) {
                    const paymentsData = await response.json();
                    this.payments = this.transformPaymentsData(paymentsData);
                    this.updatePaymentStats();
                    console.log(`✅ Loaded ${this.payments.length} payments`);
                } else {
                    this.payments = [];
                }
            } catch (error) {
                console.error('Error fetching payments:', error);
                this.payments = [];
            }
        },

        transformPaymentsData(paymentsData) {
            return paymentsData.map(payment => ({
                id: payment.id,
                reference: payment.reference,
                amount: parseFloat(payment.amount) || 0,
                amount_paid: parseFloat(payment.amount_paid) || 0,
                currency: payment.currency || 'KES',
                status: payment.status,
                provider: payment.provider,
                guest_full_name: payment.guest_full_name,
                guest_email: payment.guest_email,
                tour: payment.tour,
                paystack_transaction_id: payment.paystack_transaction_id,
                paid_on: payment.paid_on,
                created_at: payment.created_at,
                is_successful: payment.status === 'SUCCESS'
            }));
        },

        updatePaymentStats() {
            const successfulPayments = this.payments.filter(p => p.status === 'SUCCESS');
            const pendingPayments = this.payments.filter(p => p.status === 'PENDING');
            const failedPayments = this.payments.filter(p => p.status === 'FAILED');

            const totalReceived = successfulPayments.reduce((sum, payment) => sum + parseFloat(payment.amount || 0), 0);

            const recentTransactions = successfulPayments
                .slice(0, 5)
                .map(payment => ({
                    id: payment.id,
                    date: payment.paid_on || payment.created_at,
                    amount: payment.amount,
                    type: 'credit',
                    description: `Payment from ${payment.guest_full_name || 'Guest'}`,
                    reference: payment.reference
                }));

            this.paymentStats = {
                total_received: totalReceived,
                successful_payments: successfulPayments.length,
                pending_payments: pendingPayments.length,
                failed_payments: failedPayments.length,
                recent_transactions: recentTransactions
            };
        },

        // Simplified data fetching for other models
        async fetchCustomers() {
            try {
                const response = await fetch('/api/booking-customers/');
                if (response.ok) {
                    this.customers = await response.json();
                }
            } catch (error) {
                console.error('Error fetching customers:', error);
                this.customers = [];
            }
        },

        async fetchBookingCustomers() {
            try {
                const response = await fetch('/api/booking-customers/');
                if (response.ok) {
                    this.bookingCustomers = await response.json();
                }
            } catch (error) {
                console.error('Error fetching booking customers:', error);
                this.bookingCustomers = [];
            }
        },

        async fetchTrips() {
            try {
                const response = await fetch('/api/trips/');
                if (response.ok) {
                    const tripsData = await response.json();
                    this.trips = tripsData.map(trip => ({
                        id: trip.id,
                        driver_name: trip.driver_name || 'Unknown',
                        destination: trip.destination,
                        date: trip.date,
                        earnings: parseFloat(trip.earnings) || 0,
                        status: trip.status,
                        created_at: trip.created_at
                    }));
                }
            } catch (error) {
                console.error('Error fetching trips:', error);
                this.trips = [];
            }
        },

        async fetchDrivers() {
            try {
                const response = await fetch('/api/drivers/');
                if (response.ok) {
                    this.drivers = await response.json();
                }
            } catch (error) {
                console.error('Error fetching drivers:', error);
                this.drivers = [];
            }
        },

        async fetchVehicles() {
            try {
                const response = await fetch('/api/vehicles/');
                if (response.ok) {
                    this.vehicles = await response.json();
                }
            } catch (error) {
                console.error('Error fetching vehicles:', error);
                this.vehicles = [];
            }
        },

        // Minimal implementations for other data
        async fetchContactMessages() {
            try {
                const response = await fetch('/api/contact-messages/');
                this.contactMessages = response.ok ? await response.json() : [];
            } catch (error) {
                this.contactMessages = [];
            }
        },

        async fetchReviews() {
            try {
                const response = await fetch('/api/reviews/');
                this.reviews = response.ok ? await response.json() : [];
            } catch (error) {
                this.reviews = [];
            }
        },

        async fetchTourCategories() {
            try {
                const response = await fetch('/api/tour-categories/');
                this.tourCategories = response.ok ? await response.json() : [];
            } catch (error) {
                this.tourCategories = [];
            }
        },

        async fetchDestinations() {
            try {
                const response = await fetch('/api/destinations/');
                this.destinations = response.ok ? await response.json() : [];
            } catch (error) {
                this.destinations = [];
            }
        },

        // Tour actions
        async toggleTourApproval(tourId) {
            try {
                const response = await fetch(`/api/tours/${tourId}/toggle-approval/`, {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                        'X-CSRFToken': this.getCSRFToken()
                    }
                });

                if (response.ok) {
                    const tour = this.tours.find(t => t.id === tourId);
                    if (tour) {
                        tour.is_approved = !tour.is_approved;
                        this.updateTourStats();
                    }
                    this.showNotification(`Tour ${tour.is_approved ? 'approved' : 'unapproved'}`, 'success');
                    this.fetchTours(); // Refresh data
                } else {
                    this.showNotification('Error updating tour approval', 'error');
                }
            } catch (error) {
                console.error('Error updating tour approval:', error);
                this.showNotification('Error updating tour approval', 'error');
            }
        },

        async toggleTourAvailability(tourId) {
            try {
                const response = await fetch(`/api/tours/${tourId}/toggle-availability/`, {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                        'X-CSRFToken': this.getCSRFToken()
                    }
                });

                if (response.ok) {
                    const tour = this.tours.find(t => t.id === tourId);
                    if (tour) {
                        tour.available = !tour.available;
                        this.updateTourStats();
                    }
                    this.showNotification(`Tour ${tour.available ? 'activated' : 'deactivated'}`, 'success');
                    this.fetchTours(); // Refresh data
                } else {
                    this.showNotification('Error updating tour availability', 'error');
                }
            } catch (error) {
                console.error('Error updating tour availability:', error);
                this.showNotification('Error updating tour availability', 'error');
            }
        },

        // Utility methods
        getCSRFToken() {
            return document.querySelector('[name=csrfmiddlewaretoken]')?.value || '';
        },

        showNotification(message, type = 'info') {
            this.notification = { message, type, id: Date.now() };
            setTimeout(() => {
                if (this.notification && this.notification.id === this.notification.id) {
                    this.notification = null;
                }
            }, 5000);
        },

        formatCurrency(amount) {
            return new Intl.NumberFormat('en-KE', {
                style: 'currency',
                currency: 'KES',
                minimumFractionDigits: 2
            }).format(amount || 0);
        },

        formatDate(dateString) {
            if (!dateString) return 'N/A';
            try {
                const options = { year: 'numeric', month: 'short', day: 'numeric' };
                return new Date(dateString).toLocaleDateString(undefined, options);
            } catch (error) {
                return 'Invalid Date';
            }
        },

        formatDateTime(dateString) {
            if (!dateString) return 'N/A';
            try {
                const options = {
                    year: 'numeric',
                    month: 'short',
                    day: 'numeric',
                    hour: '2-digit',
                    minute: '2-digit'
                };
                return new Date(dateString).toLocaleDateString(undefined, options);
            } catch (error) {
                return 'Invalid Date';
            }
        },

        // Data filtering and pagination
        getFilteredData() {
            let data = this.getCurrentDataArray();

            if (!Array.isArray(data)) return [];

            // Apply search filter
            if (this.searchQuery) {
                const query = this.searchQuery.toLowerCase();
                data = data.filter(item => {
                    return Object.values(item).some(val =>
                        String(val).toLowerCase().includes(query)
                    );
                });
            }

            // Apply status filter
            if (this.statusFilter) {
                data = data.filter(item => item.status === this.statusFilter);
            }

            // Apply date range filter
            if (this.dateRange.start && this.dateRange.end) {
                const startDate = new Date(this.dateRange.start);
                const endDate = new Date(this.dateRange.end);

                data = data.filter(item => {
                    const itemDate = new Date(item.created_at || item.date || item.travel_date);
                    return itemDate >= startDate && itemDate <= endDate;
                });
            }

            return data;
        },

        getCurrentDataArray() {
            const dataMap = {
                'my-tours': this.tours,
                'customers': this.customers,
                'booking-customers': this.bookingCustomers,
                'bookings': this.bookings,
                'payments': this.payments,
                'drivers': this.drivers,
                'vehicles': this.vehicles,
                'trips': this.trips,
                'reviews': this.reviews,
                'contact-messages': this.contactMessages,
                'destinations': this.destinations
            };

            return dataMap[this.currentSection] || [];
        },

        getPaginatedData() {
            const data = this.getFilteredData();
            this.totalItems = data.length;
            const start = (this.currentPage - 1) * this.itemsPerPage;
            const end = start + this.itemsPerPage;
            return data.slice(start, end);
        },

        // Navigation helpers
        getSectionDisplayName() {
            const names = {
                'dashboard': 'Dashboard',
                'earnings': 'Earnings',
                'payments': 'Payments',
                'my-tours': 'My Tours',
                'customers': 'Customers',
                'booking-customers': 'Booking Customers',
                'bookings': 'Bookings',
                'contact-messages': 'Contact Messages',
                'destinations': 'Destinations',
                'drivers': 'Drivers',
                'reviews': 'Reviews',
                'trips': 'Trips',
                'vehicles': 'Vehicles'
            };
            return names[this.currentSection] || this.currentSection;
        },

        shouldShowDetails() {
            return this.selectedItem !== null && this.selectedModel !== null;
        },

        showDetails(model, item) {
            this.selectedItem = item;
            this.selectedModel = model;
        },

        hideDetails() {
            this.selectedItem = null;
            this.selectedModel = null;
        },

        // Performance optimizations
        debounce(func, wait) {
            let timeout;
            return function(...args) {
                clearTimeout(timeout);
                timeout = setTimeout(() => func.apply(this, args), wait);
            };
        },

        updateFilteredData() {
            this.currentPage = 1;
        },

        // Auto refresh
        startAutoRefresh() {
            if (this.autoRefresh && !this.refreshInterval) {
                this.refreshInterval = setInterval(() => {
                    this.fetchDashboardData();
                    this.fetchTours();
                    this.fetchPayments();
                }, 30000); // 30 seconds
            }
        },

        stopAutoRefresh() {
            if (this.refreshInterval) {
                clearInterval(this.refreshInterval);
                this.refreshInterval = null;
            }
        },

        // Cleanup
        destroy() {
            this.stopAutoRefresh();
        }
    };
}

// Initialize when DOM is ready
document.addEventListener('DOMContentLoaded', function() {
    console.log('🏁 Office Manager App Initialized - Optimized & Ready');

    // Add global error handler
    window.addEventListener('error', function(e) {
        console.error('Global error:', e.error);
    });
});
</script>
</body>
</html>