<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="description" content="Premium 24/7 AIRPORT AND DESTINATION TRANSFERS - Fast, reliable international airport transportation available anytime">
  <title>24/7 AIRPORT AND DESTINATION TRANSFERS</title>

  <!-- Performance Optimizations -->
  <link rel="preconnect" href="https://cdnjs.cloudflare.com" crossorigin>
  <link rel="preload" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" as="style" onload="this.onload=null;this.rel='stylesheet'">
  <noscript><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"></noscript>

  <!-- Google Fonts -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800;900&display=swap" rel="stylesheet">

  <!-- Inline Critical CSS -->
 <style>
/* ================================
   Root Variables
================================ */
:root {
  /* Core palette */
  --primary: #111827;        /* Modern dark gray (text / headings) */
  --secondary: #06b6d4;      /* Bright teal (accent / CTAs) */
  --accent: #3b82f6;         /* Vivid blue (secondary accent / highlights) */
  --muted: #6b7280;          /* Neutral muted text */
  --surface: #f8fafc;        /* Light surface / cards */
  --bg: #ffffff;             /* Page background */
  --glass: rgba(255,255,255,0.6);

  /* Semantic colors */
  --success: #10b981;
  --warning: #f59e0b;
  --danger:  #ef4444;

  /* Gradients */
  --gradient-primary: linear-gradient(90deg, var(--secondary), var(--accent));
  --gradient-soft: linear-gradient(180deg, rgba(59,130,246,0.08), rgba(6,182,212,0.04));

  /* Text */
  --text: var(--primary);
  --text-light: var(--muted);
  --muted-bg: #eef2f7;

  /* Radii */
  --radius: 14px;
  --radius-sm: 10px;
  --radius-pill: 999px;

  /* Elevation / shadow */
  --shadow-sm: 0 4px 12px rgba(17,24,39,0.06);
  --shadow: 0 10px 30px rgba(17,24,39,0.08);
  --shadow-lg: 0 20px 50px rgba(17,24,39,0.12);

  /* Motion */
  --transition: all 0.28s cubic-bezier(.2,.9,.2,1);

  /* Sizing helpers */
  --container-max: 1200px;
  --gutter: 1.25rem;

  /* Button defaults */
  --button-bg: var(--secondary);
  --button-hover: var(--accent);
  --button-text: #ffffff;
  --button-shadow: 0 8px 20px rgba(6,182,212,0.12);

  /* Form / border */
  --border: 1px solid rgba(17,24,39,0.06);
  --input-bg: #ffffff;
}


/* Dark Mode Variables */
body.dark-mode {
  --primary: #edf2f7;
  --secondary: #63b3ed;     /* lighter teal for dark backgrounds */
  --accent: #f6ad55;
  --surface: #1a202c;
  --text: #edf2f7;
  --text-light: #a0aec0;
  background: #121212;
  color: var(--text);

  /* Button overrides for dark mode */
  --button-bg: var(--secondary);
  --button-hover: var(--accent);
  --button-text: #fff;
}

/* ================================
   Global Reset
================================ */
* {
  margin: 0;
  padding: 0;
  box-sizing: border-box;
}

body {
  font-family: 'Inter', sans-serif;
  background: #fff;
  color: var(--text);
  line-height: 1.7;
  transition: background 0.3s ease, color 0.3s ease;
}

.container {
  width: 95%;
  max-width: 100%;
  margin: 0 auto;
  padding: 0 1rem;
}


/* ================================ Header ================================ */ .header { position: sticky; top: 0; z-index: 1100; width: 100%; background: linear-gradient(180deg, rgba(255,255,255,0.72), rgba(255,255,255,0.60)); backdrop-filter: blur(10px); border-bottom: 1px solid rgba(17,24,39,0.04); box-shadow: var(--shadow-sm); padding: clamp(0.5rem, 2vw, 1rem) 0; transition: background 0.32s var(--transition), box-shadow 0.32s var(--transition), transform 0.28s ease; } /* Compact header when scrolled */ .header.scrolled { background: linear-gradient(180deg, rgba(248,250,252,0.95), rgba(248,250,252,0.9)); box-shadow: var(--shadow); transform: translateY(-1px); } /* Container layout */ .header .container { max-width: var(--container-max); margin: 0 auto; padding: 0 var(--gutter); display: flex; align-items: center; justify-content: space-between; gap: clamp(0.5rem, 2vw, 1.5rem); } /* Logo group */ .logo { display: flex; align-items: center; gap: clamp(0.5rem, 1.5vw, 0.9rem); text-decoration: none; color: var(--text); -webkit-tap-highlight-color: transparent; } .logo img { height: clamp(34px, 4.5vw, 48px); width: auto; display: block; transition: transform 0.28s var(--transition), filter 0.28s var(--transition); border-radius: 8px; box-shadow: var(--shadow-sm); } .logo:hover img { transform: translateY(-3px) scale(1.02); filter: saturate(1.05); } .logo-text { font-weight: 700; color: var(--text); font-size: clamp(0.95rem, 1.6vw, 1.15rem); letter-spacing: 0.4px; line-height: 1; }
/* Navigation */
.nav {
  display: flex;
  gap: 2rem;
  align-items: center;
}

.nav a {
  color: var(--primary);
  font-weight: 500;
  text-decoration: none;
  position: relative;
  transition: var(--transition);
  padding: 0.5rem 0;
}

.nav a::after {
  content: '';
  position: absolute;
  bottom: -4px;
  left: 0;
  width: 0;
  height: 2px;
  background: var(--secondary);
  transition: width 0.3s ease;
}

.nav a:hover {
  color: var(--secondary);
}

.nav a:hover::after {
  width: 100%;
}

/* WhatsApp Button */
.nav a[target="_blank"] {
  background: #25D366;
  color: #fff !important;
  padding: 0.5rem 1rem;
  border-radius: var(--radius-sm);
  display: flex;
  align-items: center;
  gap: 0.5rem;
  transition: var(--transition);
}

.nav a[target="_blank"]:hover {
  background: #1DA851;
  color: #fff !important;
}

/* ================================
   Global Button Styles
================================ */
button,
.cta-button,
.dark-mode-toggle,
.nav a.button {
  background: var(--button-bg);
  color: var(--button-text);
  border: none;
  border-radius: var(--radius-sm);
  padding: 0.6rem 1.5rem;
  font-weight: 600;
  text-decoration: none;
  display: inline-flex;
  align-items: center;
  justify-content: center;
  gap: 0.5rem;
  cursor: pointer;
  transition: var(--transition);
}

button:hover,
.cta-button:hover,
.dark-mode-toggle:hover,
.nav a.button:hover {
  background: var(--button-hover);
  color: #fff;
  transform: translateY(-2px);
}

/* ================================
   Responsive Navbar
================================ */
@media (max-width: 768px) {
  .nav {
    display: none;
    flex-direction: column;
    background: var(--surface);
    position: absolute;
    top: 100%;
    right: 0;
    width: 220px;
    box-shadow: var(--shadow);
    border-radius: var(--radius);
    padding: 1rem;
  }

  .nav.active {
    display: flex;
  }

  .nav a {
    padding: 0.8rem 0;
    width: 100%;
  }

  .menu-toggle {
    display: block;
    cursor: pointer;
    font-size: 1.5rem;
    color: var(--primary);
  }
}

@media (min-width: 769px) {
  .menu-toggle {
    display: none;
  }
}

/* ================================
   DYNAMIC HERO SECTION
================================ */
.hero {
  min-height: 30vh;
  display: flex;
  align-items: center;
  justify-content: center;
  background: url('your-car-image.jpg') center/cover no-repeat;
  position: relative;
  color: #fff;
  isolation: isolate;
  background-size: 120%; /* shrink image slightly */
  background-position: center center;
}

.hero-overlay {
  position: absolute;
  inset: 0;
  background: rgba(0,0,0,0.6); /* slightly darker for readability */
  z-index: 0;
}

.hero-container {
  display: grid;
  grid-template-columns: 1fr 2fr 1fr;
  gap: 3rem; /* increased spacing between panels */
  align-items: center;
  width: 100%;
  max-width: 1300px;
  z-index: 1;
  padding: 2rem 3rem; /* wider horizontal padding */
}

/* Center Content */
.hero-content {
  text-align: center;
  backdrop-filter: blur(2px);
  padding: 1rem;
}

.hero h1 {
  font-family: 'Playfair Display', serif;
  font-size: clamp(3rem, 6vw, 4.5rem); /* expanded heading */
  margin-bottom: 1rem;
  line-height: 1.2;
  letter-spacing: 0.5px;
}

.hero p {
  font-size: 1.1rem;
  margin-bottom: 1.5rem;
  opacity: 0.9;
}

.cta-button {
  background: var(--secondary);
  color: #fff;
  padding: 0.75rem 2rem;
  border-radius: var(--radius);
  font-weight: 600;
  text-decoration: none;
  display: inline-flex;
  align-items: center;
  gap: 0.5rem;
  transition: var(--transition);
}

.cta-button:hover {
  background: var(--accent);
  transform: translateY(-2px);
}

.hero-vehicle-meta {
  margin-top: 0.75rem;
  font-size: 0.95rem;
  font-weight: 600;
  color: var(--accent);
}

/* Side Panels */
.hero-panel {
  background: rgba(0,0,0,0.4);
  padding: 1rem;
  border-radius: var(--radius);
  box-shadow: var(--shadow);
  min-width: 200px;
}

.hero-panel h3 {
  margin-bottom: 0.5rem;
  font-size: 1.1rem;
  color: var(--secondary);
  text-align: center;
}

.hero-panel ul {
  list-style: none;
  padding: 0;
  margin: 0;
}

.hero-panel li {
  display: flex;
  justify-content: space-between;
  margin-bottom: 0.4rem;
  font-size: 0.95rem;
}

.hero-panel .destination {
  font-weight: 500;
}

.hero-panel .price {
  font-weight: 700;
  color: var(--accent);
}

/* Responsive Tweaks */
@media (max-width: 992px) {
  .hero-container {
    grid-template-columns: 1fr;
    text-align: center;
    gap: 1.5rem;
  }

  .hero-panel {
    margin-top: 1rem;
    max-width: 400px;
    margin-left: auto;
    margin-right: auto;
  }

  .hero-panel li {
    justify-content: center;
    gap: 1rem;
  }
}

/* Stats */
.stats {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(220px, 1fr));
  gap: 1.5rem;
}

.stat {
  position: relative;
  border-radius: var(--radius);
  overflow: hidden;
  text-align: center;
  color: #fff;
  padding: 2rem;
  font-weight: 600;
  box-shadow: var(--shadow);
}

.stat .overlay {
  position: absolute;
  inset: 0;
  background: rgba(0,0,0,0.45); /* dark overlay for readability */
}

.stat-number {
  font-size: 2rem;
  font-weight: 700;
  position: relative;
  z-index: 1;
}

.stat div:last-child {
  position: relative;
  z-index: 1;
  font-size: 1.1rem;
}

/* Background images per card */
.stat-countries {
  background: url('https://images.unsplash.com/photo-1523531294919-4bcd7c65e216?w=800&auto=format&fit=crop&q=80') center/cover no-repeat;
}

.stat-service {
  background: url('https://images.unsplash.com/photo-1503376780353-7e6692767b70?w=800&auto=format&fit=crop&q=80') center/cover no-repeat;
}

.stat-ontime {
  background: url('https://images.unsplash.com/photo-1549399542-7e3f8b79c341?w=800&auto=format&fit=crop&q=80') center/cover no-repeat;
}

.stat-clients {
  background: url('https://images.unsplash.com/photo-1552664730-d307ca884978?w=800&auto=format&fit=crop&q=80') center/cover no-repeat;
}

/* Booking Section */
.booking-section {
  margin-top: 4rem;
}

.booking-card {
  background: var(--surface);
  border-radius: var(--radius);
  box-shadow: var(--shadow);
  padding: 2.5rem;
  transition: var(--transition);
}

/* Step Indicator */
.step-indicator {
  display: flex;
  justify-content: space-between;
  margin-bottom: 2rem;
  position: relative;
}

.step {
  text-align: center;
  flex: 1;
  position: relative;
}

.step-number {
  background: linear-gradient(135deg, var(--secondary), var(--accent));
  color: #fff;
  border-radius: 50%;
  width: clamp(36px, 4vw, 48px);
  height: clamp(36px, 4vw, 48px);
  display: flex;
  align-items: center;
  justify-content: center;
  margin: 0 auto 0.5rem;
  font-weight: 600;
  transition: var(--transition);
  box-shadow: 0 4px 12px rgba(0,0,0,0.15);
}

.step.active .step-number {
  background: linear-gradient(135deg, #06b6d4, #3b82f6);
}


.step div {
  font-size: 0.95rem;
  color: var(--text-light);
}

.step.active div {
  color: var(--primary);
  font-weight: 600;
}
/* Step Titles */
.step-title {
  margin-bottom: 1.8rem;
  font-size: 1.8rem;
  color: var(--primary);
}

.step-subtitle {
  margin-bottom: 1.5rem;
  color: var(--text-light);
}

/* Vehicle Carousel */
.vehicle-carousel {
  position: relative;
  overflow: hidden;
  width: 100%;
  margin-bottom: 2rem;
}

.vehicle-track {
  display: flex;
  transition: transform 0.5s ease;
  will-change: transform;
}

/* Vehicle Card */
.vehicle-card {
  flex: 0 0 calc(25% - 1rem); /* 4 per page desktop */
  margin: 0.5rem;
  background: #fff;
  border-radius: var(--radius);
  box-shadow: var(--shadow);
  padding: 1.5rem;
  text-align: center;
  transition: var(--transition);
  cursor: pointer;
  display: flex;
  flex-direction: column;
  align-items: center;
}

.vehicle-card img {
  width: 100%;
  max-width: 220px;
  height: 150px;
  object-fit: contain;
  margin-bottom: 1rem;
}

/* Skeleton Loader */
.vehicle-card.skeleton {
  background: linear-gradient(90deg, #e2e8f0 25%, #f7fafc 50%, #e2e8f0 75%);
  background-size: 200% 100%;
  animation: shimmer 1.5s infinite;
  height: 350px;
  border-radius: var(--radius);
}

@keyframes shimmer {
  0% { background-position: -200% 0; }
  100% { background-position: 200% 0; }
}

/* Carousel Navigation */
.carousel-nav {
  position: absolute;
  top: 50%;
  transform: translateY(-50%);
  background: var(--secondary);
  color: #fff;
  border: none;
  border-radius: 50%;
  width: 40px;
  height: 40px;
  cursor: pointer;
  transition: var(--transition);
  display: flex;
  align-items: center;
  justify-content: center;
  z-index: 10;
}

.carousel-nav:hover {
  background: var(--accent);
}

.carousel-nav.prev { left: -20px; }
.carousel-nav.next { right: -20px; }

/* Responsive */
@media (max-width: 992px) {
  .vehicle-card { flex: 0 0 calc(50% - 1rem); } /* 2 per page */
}

@media (max-width: 600px) {
  .vehicle-card {
    flex: 0 0 auto;       /* allow JS to calculate width dynamically */
    width: 100%;          /* visually still 1 per page */
    max-width: 100%;      /* prevent overflow */
  }

  .vehicle-track {
    scroll-snap-type: x mandatory; /* optional: smooth snap scrolling */
    overflow-x: auto;
  }

  .vehicle-card {
    scroll-snap-align: start;      /* optional: snap to start */
  }
}


@media (max-width: 600px) {
  .vehicle-card {
    flex: 0 0 100%; /* 1 per page on mobile */
  }
}

/* Form Controls */
.form-row {
  display: flex;
  gap: 1.5rem;
  flex-wrap: wrap;
}

.form-group {
  flex: 1;
  display: flex;
  flex-direction: column;
}

.form-label {
  font-weight: 600;
  margin-bottom: 0.5rem;
  color: var(--primary);
}

.form-control {
  width: 100%;
  padding: 0.9rem;
  border: 1px solid #e2e8f0;
  border-radius: var(--radius-sm);
  font-size: 1rem;
  transition: var(--transition);
}

.form-control:focus {
  border-color: var(--secondary);
  outline: none;
  box-shadow: 0 0 0 3px rgba(49,151,149,0.2);
}

/* Trip Type Selection */
.form-group label {
  cursor: pointer;
}

.form-group input[type="radio"] {
  accent-color: var(--secondary);
}

/* Price Display */
.price-display {
  background: var(--surface);
  padding: 1.5rem;
  border-radius: var(--radius);
  margin-top: 1.5rem;
  box-shadow: var(--shadow);
}

.price-display strong {
  color: var(--primary);
}

#final-price {
  font-size: 1.8rem;
  font-weight: 700;
  color: var(--secondary);
}

/* Booking Summary */
#booking-summary {
  background: var(--surface);
  padding: 1.5rem;
  border-radius: var(--radius);
  box-shadow: var(--shadow);
}

#booking-summary div {
  display: flex;
  justify-content: space-between;
  font-size: 1rem;
  color: var(--text);
}

/* Buttons */
.cta-button {
  background: var(--secondary);
  color: #fff;
  padding: 1rem 2rem;
  border-radius: var(--radius);
  font-weight: 600;
  text-decoration: none;
  display: inline-flex;
  align-items: center;
  gap: 0.75rem;
  transition: var(--transition);
  border: none;
  cursor: pointer;
}

.cta-button:hover {
  background: var(--accent);
  transform: translateY(-2px);
}

.cta-button[disabled] {
  background: #cbd5e0;
  cursor: not-allowed;
}

/* Back Button */
.cta-button.back {
  background: transparent;
  border: 1px solid var(--text-light);
  color: var(--primary);
}

.cta-button.back:hover {
  background: var(--surface);
  border-color: var(--secondary);
  color: var(--secondary);
}

/* Dark Mode Overrides */
body.dark-mode .booking-card,
body.dark-mode .vehicle-card,
body.dark-mode .price-display,
body.dark-mode #booking-summary {
  background: #1a202c;
  color: var(--text);
  border: 1px solid #2d3748;
}

body.dark-mode .form-control {
  background: #2d3748;
  border: 1px solid #4a5568;
  color: var(--text);
}

body.dark-mode .form-control:focus {
  border-color: var(--secondary);
  box-shadow: 0 0 0 3px rgba(99,179,237,0.3);
}

/* Footer */
.footer a {
  color: var(--primary);
  text-decoration: none;
  position: relative;
  transition: var(--transition);
}

.footer a::after {
  content: '';
  position: absolute;
  bottom: -2px;
  left: 0;
  width: 0;
  height: 2px;
  background: linear-gradient(90deg, var(--secondary), var(--accent));
  transition: width 0.3s ease;
}

.footer a:hover {
  color: var(--secondary);
}

.footer a:hover::after {
  width: 100%;
}


 </style>
</head>
<button class="dark-mode-toggle" id="darkModeToggle">üåô Dark Mode</button>
<body>
  <!-- Header -->
  <header class="header">
    <div class="container">
      <a href="/" class="logo">
        <img src="https://z-cdn-media.chatglm.cn/files/3eaefa2f-0d4c-4975-9331-d75cb51eb634.png?auth_key=1865215725-e69dae3a2e8743b8acf0bd92efa75293-0-3eed7ac04fb71c71866d9278902ba3af" alt="AIRPORT AND DESTINATION TRANSFERS">
        <span class="logo-text">AIRPORT AND DESTINATION TRANSFERS</span>
      </a>
      <nav class="nav">
        <a href="#booking">Book Now</a>
        <a href="#vehicles">Vehicles</a>
        <a href="#contact">Contact</a>
        <a href="https://wa.me/254723229651" target="_blank" style="color: #25D366;">
          <i class="fab fa-whatsapp"></i>
          WhatsApp
        </a>
      </nav>
    </div>
  </header>
<!-- ================================
     DYNAMIC HERO SECTION
================================ -->
<section class="hero" id="dynamic-hero">
  <!-- Background overlay for readability -->
  <div class="hero-overlay"></div>

<div class="hero-container container">

    <!-- LEFT PANEL: ONE WAY PRICES -->
    <div class="hero-panel hero-panel-left">
      <h3>One Way</h3>
      <ul id="hero-oneway-prices">
        <!-- JS will inject destinations -->
        <!-- Example:
        <li>
          <span class="destination">JKIA Airport</span>
          <span class="price">$45</span>
        </li>
        -->
      </ul>
    </div>

    <!-- CENTER CONTENT -->
    <div class="hero-content">
      <h1>AIRPORT & DESTINATION TRANSFERS</h1>
      <p>
        Professional 24/7 transportation services.
        Admin-managed vehicles, destinations, and pricing.
      </p>

      <a href="#booking" class="cta-button">
        <i class="fas fa-calendar-alt"></i>
        Book Instantly
      </a>

      <div class="hero-vehicle-meta">
        <span id="hero-vehicle-name">
          <!-- JS injects vehicle name -->
        </span>
      </div>
    </div>

    <!-- RIGHT PANEL: RETURN PRICES -->
    <div class="hero-panel hero-panel-right">
      <h3>Return</h3>
      <ul id="hero-return-prices">
        <!-- JS will inject destinations -->
      </ul>
    </div>

  </div>
</section>


  <!-- Stats -->
  <div class="container">
  <div class="stats">
    <div class="stat stat-countries">
      <div class="overlay"></div>
      <div class="stat-number">150+</div>
      <div>Countries</div>
    </div>
    <div class="stat stat-service">
      <div class="overlay"></div>
      <div class="stat-number">24/7</div>
      <div>Service</div>
    </div>
    <div class="stat stat-ontime">
      <div class="overlay"></div>
      <div class="stat-number">98%</div>
      <div>On Time</div>
    </div>
    <div class="stat stat-clients">
      <div class="overlay"></div>
      <div class="stat-number">50K+</div>
      <div>Happy Clients</div>
    </div>
  </div>
</div>


  <!-- Main Content -->
  <main class="container">
    <!-- Booking Section -->
    <section class="booking-section" id="booking">
      <div class="booking-card">
        <h2 style="margin-bottom: 2.5rem; font-size: 2.2rem; color: var(--primary);">Book Your 24/7 Transfer</h2>

        <!-- Step Indicator -->
        <div class="step-indicator">
          <div class="step active" data-step="1">
            <div class="step-number">1</div>
            <div>Select Vehicle</div>
          </div>
          <div class="step" data-step="2">
            <div class="step-number">2</div>
            <div>Destination & Trip</div>
          </div>
          <div class="step" data-step="3">
            <div class="step-number">3</div>
            <div>Confirm</div>
          </div>
        </div>
<!-- Step 1: Vehicle Selection -->
<div id="step-1" class="step-content active">
  <h3 class="step-title">Choose Your Vehicle</h3>
  <p class="step-subtitle">Select a vehicle to see available destinations and prices.</p>

  <!-- Vehicle Carousel -->
  <div class="vehicle-carousel">
    <button class="carousel-nav prev">&#10094;</button>
    <div id="vehicle-track" class="vehicle-track">
      <!-- Vehicles loaded via JS -->
      <div class="vehicle-card skeleton"></div>
      <div class="vehicle-card skeleton"></div>
      <div class="vehicle-card skeleton"></div>
      <div class="vehicle-card skeleton"></div>
    </div>
    <button class="carousel-nav next">&#10095;</button>
  </div>

  <button id="next-step-1" class="cta-button" disabled>
    Continue to Destination <i class="fas fa-arrow-right"></i>
  </button>
</div>


        <!-- Step 2: Destination & Trip Details -->
        <div id="step-2" class="step-content" style="display: none;">
          <h3 style="margin-bottom: 1.8rem; font-size: 1.8rem;">Trip Details</h3>

          <div id="selected-vehicle-preview" style="background: rgba(26, 54, 93, 0.1); padding: 1.5rem; border-radius: var(--radius-sm); margin-bottom: 1.8rem; display: none;">
            <strong>Selected Vehicle:</strong> <span id="selected-vehicle-name">None</span>
          </div>

          <form id="trip-form" style="display: grid; gap: 1.5rem;">
            <div class="form-row">
              <div class="form-group">
                <label class="form-label">Pickup Location</label>
                <input type="text" id="pickup" class="form-control" placeholder="Airport or address" required>
              </div>
              <div class="form-group">
                <label class="form-label">Destination</label>
                <select id="destination" class="form-control" required>
                  <option value="">Select destination</option>
                  <!-- Will be populated by JavaScript -->
                </select>
              </div>
            </div>

            <div class="form-row">
              <div class="form-group">
                <label class="form-label">Date</label>
                <input type="date" id="date" class="form-control" required>
              </div>
              <div class="form-group">
                <label class="form-label">Time</label>
                <input type="time" id="time" class="form-control" required>
              </div>
              <div class="form-group">
                <label class="form-label">Passengers</label>
                <select id="passengers" class="form-control">
                  <option value="1">1 Passenger</option>
                  <option value="2">2 Passengers</option>
                  <option value="3">3 Passengers</option>
                  <option value="4">4 Passengers</option>
                  <option value="5+">5+ Passengers</option>
                </select>
              </div>
            </div>

            <!-- Trip Type Selection -->
            <div class="form-group">
              <label class="form-label">Trip Type</label>
              <div style="display: flex; gap: 2rem; flex-wrap: wrap;">
                <label style="display: flex; align-items: center; gap: 0.75rem; padding: 1rem 1.5rem; background: rgba(26, 54, 93, 0.05); border-radius: var(--radius-sm); cursor: pointer; transition: var(--transition);">
                  <input type="radio" name="tripType" value="one_way" checked style="width: 1.2rem; height: 1.2rem;">
                  <div>
                    <div style="font-weight: 600; color: var(--primary);">One Way</div>
                    <div style="font-size: 0.9rem; color: var(--text-light);">From pickup to destination</div>
                  </div>
                </label>
                <label style="display: flex; align-items: center; gap: 0.75rem; padding: 1rem 1.5rem; background: rgba(26, 54, 93, 0.05); border-radius: var(--radius-sm); cursor: pointer; transition: var(--transition);">
                  <input type="radio" name="tripType" value="return" style="width: 1.2rem; height: 1.2rem;">
                  <div>
                    <div style="font-weight: 600; color: var(--primary);">Return Trip</div>
                    <div style="font-size: 0.9rem; color: var(--text-light);">Round trip with return to pickup</div>
                  </div>
                </label>
              </div>
            </div>

            <!-- Price Display -->
            <div id="price-display" class="price-display" style="display: none;">
              <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 0.5rem;">
                <div>
                  <strong style="font-size: 1.1rem;" id="selected-destination-name">Destination</strong>
                  <div style="font-size: 0.9rem; color: var(--text-light);" id="trip-type-display">One Way</div>
                </div>
                <div style="text-align: right;">
                  <div style="font-size: 1.8rem; font-weight: 700; color: var(--primary);" id="final-price">$0.00</div>
                  <div style="font-size: 0.9rem; color: var(--text-light);" id="price-in-ksh">KES 0.00</div>
                </div>
              </div>
              <div style="font-size: 0.85rem; color: var(--text-light);">
                <i class="fas fa-info-circle"></i> Price varies by destination and trip type
              </div>
            </div>
          </form>

          <div style="display: flex; gap: 1.5rem; margin-top: 2.5rem;">
            <button id="prev-step-2" class="cta-button" style="background: transparent; border: 1px solid var(--text-light); font-size: 1rem;">
              <i class="fas fa-arrow-left"></i> Back to Vehicles
            </button>
            <button id="next-step-2" class="cta-button" style="font-size: 1rem;">
              Continue to Contact <i class="fas fa-arrow-right"></i>
            </button>
          </div>
        </div>

        <!-- Step 3: Contact & Confirm -->
        <div id="step-3" class="step-content" style="display: none;">
          <h3 style="margin-bottom: 1.8rem; font-size: 1.8rem;">Contact Details</h3>

          <form id="contact-form" style="display: grid; gap: 1.5rem;">
            <div class="form-row">
              <div class="form-group">
                <label class="form-label">Full Name</label>
                <input type="text" id="name" class="form-control" required>
              </div>
              <div class="form-group">
                <label class="form-label">WhatsApp Number</label>
                <input type="tel" id="phone" class="form-control" placeholder="+2547XXXXXXXX" required>
                <small style="color: var(--text-light); margin-top: 0.5rem; display: block;">We'll confirm your booking via WhatsApp</small>
              </div>
            </div>

            <div class="form-group">
              <label class="form-label">Special Instructions</label>
              <textarea id="notes" rows="4" class="form-control" placeholder="Flight number, special requests..."></textarea>
            </div>
          </form>

          <div style="margin-top: 2.5rem; padding: 2rem; background: rgba(26, 54, 93, 0.05); border-radius: var(--radius-sm);">
            <h4 style="margin-bottom: 1.5rem; font-size: 1.4rem;">Booking Summary</h4>
            <div id="booking-summary" style="display: grid; gap: 0.8rem;">
              <!-- Filled by JS -->
            </div>
          </div>

          <div style="display: flex; gap: 1.5rem; margin-top: 2.5rem;">
            <button id="prev-step-3" class="cta-button" style="background: transparent; border: 1px solid var(--text-light); font-size: 1rem;">
              <i class="fas fa-arrow-left"></i> Back
            </button>
            <button id="confirm-booking" class="cta-button" style="background: #25D366; font-size: 1rem;">
              <i class="fab fa-whatsapp"></i> Confirm via WhatsApp
            </button>
          </div>
        </div>
      </div>
    </section>

    <!-- Why Choose Us -->
    <section style="margin-top: 5rem; padding: 3rem; background: var(--surface); border-radius: var(--radius);">
      <h2 style="text-align: center; margin-bottom: 3rem; font-size: 2.5rem; color: var(--primary);">Why Choose Our 24/7 Service</h2>
      <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 3rem;">
        <div style="text-align: center; padding: 2rem; background: linear-gradient(135deg, rgba(26, 54, 93, 0.05), rgba(26, 54, 93, 0.02)); border-radius: var(--radius); transition: var(--transition);">
          <div style="font-size: 3rem; color: var(--primary); margin-bottom: 1.5rem;">‚úàÔ∏è</div>
          <h3 style="font-size: 1.5rem; margin-bottom: 1rem; color: var(--primary);">Global Coverage</h3>
          <p style="color: var(--text-light); font-size: 1.1rem;">Airport transfers in over 150 countries worldwide, available 24/7</p>
        </div>
        <div style="text-align: center; padding: 2rem; background: linear-gradient(135deg, rgba(26, 54, 93, 0.05), rgba(26, 54, 93, 0.02)); border-radius: var(--radius); transition: var(--transition);">
          <div style="font-size: 3rem; color: var(--primary); margin-bottom: 1.5rem;">üë®‚Äç‚úàÔ∏è</div>
          <h3 style="font-size: 1.5rem; margin-bottom: 1rem; color: var(--primary);">Professional Drivers</h3>
          <p style="color: var(--text-light); font-size: 1.1rem;">Experienced, licensed, and multilingual drivers ready anytime</p>
        </div>
        <div style="text-align: center; padding: 2rem; background: linear-gradient(135deg, rgba(26, 54, 93, 0.05), rgba(26, 54, 93, 0.02)); border-radius: var(--radius); transition: var(--transition);">
          <div style="font-size: 3rem; color: var(--primary); margin-bottom: 1.5rem;">üöó</div>
          <h3 style="font-size: 1.5rem; margin-bottom: 1rem; color: var(--primary);">Modern Fleet</h3>
          <p style="color: var(--text-light); font-size: 1.1rem;">Clean, comfortable, and well-maintained vehicles for all your needs</p>
        </div>
        <div style="text-align: center; padding: 2rem; background: linear-gradient(135deg, rgba(26, 54, 93, 0.05), rgba(26, 54, 93, 0.02)); border-radius: var(--radius); transition: var(--transition);">
          <div style="font-size: 3rem; color: var(--primary); margin-bottom: 1.5rem;">‚è∞</div>
          <h3 style="font-size: 1.5rem; margin-bottom: 1rem; color: var(--primary);">24/7 Availability</h3>
          <p style="color: var(--text-light); font-size: 1.1rem;">Round-the-clock service for early flights and late arrivals</p>
        </div>
      </div>
    </section>
  </main>

  <!-- Footer -->
  <footer class="footer" id="contact">
    <div class="container">
      <div style="text-align: center;">
        <a href="/" class="logo" style="justify-content: center; margin-bottom: 1.5rem;">
          <img src="https://z-cdn-media.chatglm.cn/files/3eaefa2f-0d4c-4975-9331-d75cb51eb634.png?auth_key=1865215725-e69dae3a2e8743b8acf0bd92efa75293-0-3eed7ac04fb71c71866d9278902ba3af" alt="AIRPORT AND DESTINATION TRANSFERS" style="height: 45px;">
        </a>
        <p style="color: var(--text-light); margin-bottom: 2.5rem; font-size: 1.1rem;">Premium 24/7 airport transfers worldwide</p>

        <div style="display: flex; justify-content: center; gap: 2rem; margin-bottom: 3rem; flex-wrap: wrap;">
          <a href="https://wa.me/254723229651" target="_blank"
             style="color: #25D366; text-decoration: none; display: flex; align-items: center; gap: 0.75rem; font-size: 1.1rem; background: rgba(37, 211, 102, 0.1); padding: 0.8rem 1.5rem; border-radius: var(--radius-sm); transition: var(--transition);">
            <i class="fab fa-whatsapp"></i> WhatsApp
          </a>
          <a href="tel:+254723229651"
             style="color: var(--text); text-decoration: none; display: flex; align-items: center; gap: 0.75rem; font-size: 1.1rem; background: rgba(26, 54, 93, 0.05); padding: 0.8rem 1.5rem; border-radius: var(--radius-sm); transition: var(--transition);">
            <i class="fas fa-phone"></i> +254 723 229 651
          </a>
        </div>

        <div style="border-top: 1px solid #e9ecef; padding-top: 2rem; margin-top: 2rem;">
          <p style="color: var(--text-light); font-size: 1rem;">&copy; <span id="current-year"></span> AIRPORT AND DESTINATION TRANSFERS. All rights reserved.</p>
        </div>
      </div>
    </div>
  </footer>

  <!-- Refresh Button -->
  <button id="refresh-vehicles" class="refresh-btn" title="Refresh Vehicles">
    <i class="fas fa-sync-alt"></i>
    <div class="spinner"></div>
  </button>

  <!-- Toast Notification -->
  <div id="toast" class="toast"></div>

  <!-- Image Modal -->
  <div id="image-modal" class="image-modal">
    <div class="modal-content">
      <button class="modal-close">&times;</button>
      <img id="modal-image" class="modal-image" src="" alt="Vehicle Image">
      <button class="modal-nav prev">&lt;</button>
      <button class="modal-nav next">&gt;</button>
    </div>
  </div>

  <!-- Confirmation Modal -->
  <div id="confirmation-modal"
       style="position: fixed; top: 0; left: 0; right: 0; bottom: 0; background: rgba(0,0,0,0.85); display: none; justify-content: center; align-items: center; z-index: 2000;">
    <div style="background: var(--surface); padding: 2.5rem; border-radius: var(--radius); max-width: 550px; width: 90%;">
      <div style="text-align: center;">
        <div style="font-size: 5rem; color: var(--primary); margin-bottom: 1.5rem;">üéâ</div>
        <h3 style="margin-bottom: 1.2rem; font-size: 1.8rem;">Booking Confirmed!</h3>
        <p style="color: var(--text-light); margin-bottom: 2rem; font-size: 1.1rem;">Your 24/7 transfer request has been sent via WhatsApp. We'll confirm within 5 minutes.</p>
        <button id="close-modal" class="cta-button" style="width: 100%; font-size: 1.1rem;">
          <i class="fas fa-check"></i> Done
        </button>
      </div>
    </div>
  </div>

  <script>
    // Configuration
    const CONFIG = {
      apiEndpoint: '/api/vehicle-destination-prices/', // CHANGED: Now fetches destination prices
      whatsappNumber: '254723229651',
      cacheKey: 'vehicle_destination_prices_cache_v1',
      cacheTTL: 5 * 60 * 1000, // 5 minutes
      refreshInterval: 30000, // 30 seconds
      currency: 'USD',
      exchangeRate: 128.95, // USD to KSH conversion rate
      heroImage: 'https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcQbjckO6Df7JuBu7j3kjm63FTSQN2dRPEASqw&s'
    };

    // State management
    class AppState {
      constructor() {
        this.selectedVehicle = null;
        this.selectedDestination = null;
        this.tripType = 'one_way'; // 'one_way' or 'return'
        this.tripDetails = {};
        this.contactDetails = {};
        this.currentStep = 1;
        this.vehicles = [];
        this.isLoading = false;
        this.modalImages = [];
        this.currentModalIndex = 0;
      }

      update(updates) {
        Object.assign(this, updates);
        this.persist();
      }

      persist() {
        try {
          localStorage.setItem('booking_state', JSON.stringify({
            selectedVehicle: this.selectedVehicle,
            selectedDestination: this.selectedDestination,
            tripType: this.tripType,
            tripDetails: this.tripDetails,
            contactDetails: this.contactDetails,
            currentStep: this.currentStep,
          }));
        } catch (e) {
          // Ignore storage errors
        }
      }

      restore() {
        try {
          const saved = JSON.parse(localStorage.getItem('booking_state'));
          if (saved) {
            Object.assign(this, saved);
          }
        } catch (e) {
          // Ignore errors
        }
      }

      clear() {
        this.selectedVehicle = null;
        this.selectedDestination = null;
        this.tripType = 'one_way';
        this.tripDetails = {};
        this.contactDetails = {};
        this.currentStep = 1;
        this.vehicles = [];
        this.modalImages = [];
        this.currentModalIndex = 0;
        localStorage.removeItem('booking_state');
      }
    }

    // Vehicle Cache
    class VehicleCache {
      static get() {
        try {
          const cached = localStorage.getItem(CONFIG.cacheKey);
          if (!cached) return null;

          const { data, timestamp } = JSON.parse(cached);
          if (Date.now() - timestamp > CONFIG.cacheTTL) {
            localStorage.removeItem(CONFIG.cacheKey);
            return null;
          }

          return data;
        } catch {
          return null;
        }
      }

      static set(data) {
        try {
          localStorage.setItem(CONFIG.cacheKey, JSON.stringify({
            data,
            timestamp: Date.now(),
          }));
        } catch {
          // Ignore storage errors
        }
      }

      static clear() {
        localStorage.removeItem(CONFIG.cacheKey);
      }
    }

    // Fast HTTP Client
    class FastHTTP {
      static async get(url, options = {}) {
        const controller = new AbortController();
        const timeout = setTimeout(() => controller.abort(), 3000);

        try {
          const response = await fetch(url, {
            signal: controller.signal,
            headers: {
              'Accept': 'application/json',
              'Cache-Control': 'no-cache',
            },
            ...options,
          });

          clearTimeout(timeout);

          if (!response.ok) {
            throw new Error(`HTTP ${response.status}`);
          }

          return await response.json();
        } catch (error) {
          clearTimeout(timeout);
          throw error;
        }
      }
    }

    // Currency Converter
    class CurrencyConverter {
      static toKSH(amountUSD) {
        return (amountUSD * CONFIG.exchangeRate).toFixed(2);
      }

      static formatUSD(amount) {
        return `$${parseFloat(amount).toLocaleString('en-US', { minimumFractionDigits: 2, maximumFractionDigits: 2 })}`;
      }

      static formatKSH(amount) {
        return `KES ${parseFloat(amount).toLocaleString('en-US', { minimumFractionDigits: 2, maximumFractionDigits: 2 })}`;
      }
    }

    // Main Application
    class AirportTransfersApp {
      constructor() {
        this.state = new AppState();
        this.ui = new UIHandler(this);
        this.api = new APIHandler(this);
        this.refreshInterval = null;

        this.init();
      }

      async init() {
        // Restore state
        this.state.restore();

        // Initialize UI
        this.ui.init();

        // Load vehicles with destination prices
        await this.loadVehicleDestinationPrices();

        // Initialize event listeners
        this.setupEventListeners();

        // Update UI from state
        this.ui.updateFromState();

        // Start automatic refresh
        this.startAutoRefresh();
      }

      async loadVehicleDestinationPrices() {
        try {
          // Try cache first
          const cached = VehicleCache.get();
          if (cached) {
            this.state.update({ vehicles: cached });
            this.ui.renderVehicles(cached);
            // Update in background
            this.loadVehicleDestinationPricesFromAPI();
            return;
          }

          // Load from API
          await this.loadVehicleDestinationPricesFromAPI();
        } catch (error) {
          console.warn('Failed to load vehicle destination prices:', error);
          // Show fallback vehicles
          this.showFallbackVehicles();
        }
      }

      async loadVehicleDestinationPricesFromAPI() {
        try {
          this.state.update({ isLoading: true });
          this.ui.showLoading();

          const data = await FastHTTP.get(CONFIG.apiEndpoint);
          const vehicles = this.processVehicleDestinationData(data);

          this.state.update({ vehicles, isLoading: false });
          VehicleCache.set(vehicles);
          this.ui.renderVehicles(vehicles);
          this.ui.initHero(vehicles);
          this.ui.showToast('Vehicles and prices updated successfully', 'success');
        } catch (error) {
          console.warn('Failed to fetch vehicle destination prices from API:', error);
          this.state.update({ isLoading: false });
          this.ui.hideLoading();
          // Keep existing vehicles
        }
      }

      processVehicleDestinationData(data) {
        // Handle different API response formats
        let priceEntries = [];

        if (Array.isArray(data?.results)) {
          priceEntries = data.results;
        } else if (Array.isArray(data)) {
          priceEntries = data;
        } else if (data?.data) {
          priceEntries = data.data;
        }

        // Group by vehicle and create unique vehicle entries with multiple destinations
        const vehiclesMap = new Map();

        priceEntries.forEach(entry => {
          const vehicleId = entry.vehicle_id || entry.vehicle?.id;

          if (!vehiclesMap.has(vehicleId)) {
            // Create new vehicle entry
            vehiclesMap.set(vehicleId, {
              id: vehicleId,
              name: entry.vehicle_name || entry.vehicle?.make || 'Vehicle',
              model: entry.vehicle_model || entry.vehicle?.model || '',
              type: entry.vehicle_type || entry.vehicle?.vehicle_type || 'Standard',
              capacity: entry.vehicle_capacity || entry.vehicle?.capacity || 4,
              year: entry.vehicle_year || entry.vehicle?.year || new Date().getFullYear(),
              images: entry.vehicle_images || [entry.vehicle?.image_url] || [this.getVehicleImage(entry.vehicle_type)],
              features: entry.vehicle_features || entry.vehicle?.features || ['AC', 'Wifi', 'GPS'],
              isFeatured: entry.vehicle_is_featured || false,

              // Store destinations and prices
              destinations: [],

              // For display in step 1 (we'll show price range)
              minPriceUSD: null,
              maxPriceUSD: null,
              priceLabel: 'Price varies by destination',
            });
          }

          const vehicle = vehiclesMap.get(vehicleId);

          // Add destination info
          const destination = {
            id: entry.destination_id || entry.destination?.id,
            name: entry.destination_name || entry.destination?.name,
            type: entry.destination_type || entry.destination?.destination_type,
            priceOneWayUSD: parseFloat(entry.price_one_way_usd),
            priceReturnUSD: parseFloat(entry.price_return_usd),
            priceOneWayKSH: parseFloat(entry.price_one_way_ksh) || parseFloat(entry.price_one_way_usd) * CONFIG.exchangeRate,
            priceReturnKSH: parseFloat(entry.price_return_ksh) || parseFloat(entry.price_return_usd) * CONFIG.exchangeRate,
          };

          vehicle.destinations.push(destination);

          // Update min/max prices
          const prices = [destination.priceOneWayUSD, destination.priceReturnUSD];
          const minPrice = Math.min(...prices);
          const maxPrice = Math.max(...prices);

          if (vehicle.minPriceUSD === null || minPrice < vehicle.minPriceUSD) {
            vehicle.minPriceUSD = minPrice;
          }
          if (vehicle.maxPriceUSD === null || maxPrice > vehicle.maxPriceUSD) {
            vehicle.maxPriceUSD = maxPrice;
          }

          // Update price label
          if (vehicle.minPriceUSD === vehicle.maxPriceUSD) {
            vehicle.priceLabel = CurrencyConverter.formatUSD(vehicle.minPriceUSD);
          } else {
            vehicle.priceLabel = `${CurrencyConverter.formatUSD(vehicle.minPriceUSD)} - ${CurrencyConverter.formatUSD(vehicle.maxPriceUSD)}`;
          }
        });

        // Convert map to array
        return Array.from(vehiclesMap.values());
      }

      getVehicleImage(type) {
        const images = {
          'SUV': 'https://images.unsplash.com/photo-1503376780353-7e6692767b70?w=400&h=300&fit=crop',
          'Sedan': 'https://images.unsplash.com/photo-1549399542-7e3f8b79c341?w=400&h=300&fit=crop',
          'Van': 'https://images.unsplash.com/photo-1574201635302-388dd92a4c3f?w=400&h=300&fit=crop',
          'Luxury': 'https://images.unsplash.com/photo-1553440569-bcc63803a83d?w=400&h=300&fit=crop',
          'MINIBUS': 'https://images.unsplash.com/photo-1593941707882-a5bba53389b4?w=400&h=300&fit=crop',
          'BUS': 'https://images.unsplash.com/photo-1544620347-c4fd4a3d5957?w=400&h=300&fit=crop',
        };

        return images[type] || images['Sedan'];
      }

      showFallbackVehicles() {
        const fallbackVehicles = [
          {
            id: '1',
            name: 'Premium Sedan',
            model: 'Toyota Camry',
            type: 'Sedan',
            capacity: 4,
            images: ['https://images.unsplash.com/photo-1549399542-7e3f8b79c341?w=400&h=300&fit=crop'],
            features: ['AC', 'Wifi', 'Comfort Seats'],
            isFeatured: true,
            destinations: [
              {
                id: '1',
                name: 'Jomo Kenyatta Airport (JKIA)',
                type: 'AIRPORT',
                priceOneWayUSD: 45,
                priceReturnUSD: 80,
                priceOneWayKSH: 45 * CONFIG.exchangeRate,
                priceReturnKSH: 80 * CONFIG.exchangeRate,
              },
              {
                id: '2',
                name: 'Wilson Airport',
                type: 'AIRPORT',
                priceOneWayUSD: 35,
                priceReturnUSD: 65,
                priceOneWayKSH: 35 * CONFIG.exchangeRate,
                priceReturnKSH: 65 * CONFIG.exchangeRate,
              }
            ],
            minPriceUSD: 35,
            maxPriceUSD: 80,
            priceLabel: '$35 - $80',
          },
          {
            id: '2',
            name: 'Comfort SUV',
            model: 'Toyota Prado',
            type: 'SUV',
            capacity: 6,
            images: ['https://images.unsplash.com/photo-1503376780353-7e6692767b70?w=400&h=300&fit=crop'],
            features: ['AC', 'Wifi', 'Spacious', 'Luggage Space'],
            isFeatured: false,
            destinations: [
              {
                id: '1',
                name: 'Jomo Kenyatta Airport (JKIA)',
                type: 'AIRPORT',
                priceOneWayUSD: 60,
                priceReturnUSD: 110,
                priceOneWayKSH: 60 * CONFIG.exchangeRate,
                priceReturnKSH: 110 * CONFIG.exchangeRate,
              },
              {
                id: '3',
                name: 'Mombasa Airport',
                type: 'AIRPORT',
                priceOneWayUSD: 350,
                priceReturnUSD: 650,
                priceOneWayKSH: 350 * CONFIG.exchangeRate,
                priceReturnKSH: 650 * CONFIG.exchangeRate,
              }
            ],
            minPriceUSD: 60,
            maxPriceUSD: 650,
            priceLabel: '$60 - $650',
          },
          {
            id: '3',
            name: 'Executive Van',
            model: 'Toyota Hiace',
            type: 'Van',
            capacity: 12,
            images: ['https://images.unsplash.com/photo-1574201635302-388dd92a4c3f?w=400&h=300&fit=crop'],
            features: ['AC', 'Wifi', 'Luggage Space', 'Comfort Seats'],
            isFeatured: false,
            destinations: [
              {
                id: '1',
                name: 'Jomo Kenyatta Airport (JKIA)',
                type: 'AIRPORT',
                priceOneWayUSD: 80,
                priceReturnUSD: 150,
                priceOneWayKSH: 80 * CONFIG.exchangeRate,
                priceReturnKSH: 150 * CONFIG.exchangeRate,
              },
              {
                id: '4',
                name: 'Kisumu Airport',
                type: 'AIRPORT',
                priceOneWayUSD: 250,
                priceReturnUSD: 450,
                priceOneWayKSH: 250 * CONFIG.exchangeRate,
                priceReturnKSH: 450 * CONFIG.exchangeRate,
              }
            ],
            minPriceUSD: 80,
            maxPriceUSD: 450,
            priceLabel: '$80 - $450',
          },
        ];

        this.state.update({ vehicles: fallbackVehicles });
        this.ui.renderVehicles(fallbackVehicles);
      }

      setupEventListeners() {
        // Refresh button
        document.getElementById('refresh-vehicles').addEventListener('click', () => {
          this.refreshVehicleDestinationPrices();
        });

        // Step navigation
        document.getElementById('next-step-1')?.addEventListener('click', () => {
          if (!this.state.selectedVehicle) {
            this.ui.showToast('Please select a vehicle', 'error');
            return;
          }
          this.ui.goToStep(2);
        });

        document.getElementById('prev-step-2')?.addEventListener('click', () => {
          this.ui.goToStep(1);
        });

        document.getElementById('next-step-2')?.addEventListener('click', () => {
          // Validate trip details
          const pickup = document.getElementById('pickup').value;
          const destination = document.getElementById('destination').value;
          const date = document.getElementById('date').value;
          const time = document.getElementById('time').value;

          if (!pickup || !destination || !date || !time) {
            this.ui.showToast('Please fill all trip details', 'error');
            return;
          }

          if (!this.state.selectedDestination) {
            this.ui.showToast('Please select a destination', 'error');
            return;
          }

          this.state.update({
            tripDetails: {
              pickup,
              destination: this.state.selectedDestination.name,
              date,
              time,
              passengers: document.getElementById('passengers').value
            }
          });

          this.ui.goToStep(3);
          this.ui.updateBookingSummary();
        });

        document.getElementById('prev-step-3')?.addEventListener('click', () => {
          this.ui.goToStep(2);
        });

        // Trip type change
        document.querySelectorAll('input[name="tripType"]').forEach(radio => {
          radio.addEventListener('change', (e) => {
            this.state.update({ tripType: e.target.value });
            this.ui.updatePriceDisplay();
          });
        });

        // Destination change
        document.getElementById('destination').addEventListener('change', (e) => {
          const selectedId = e.target.value;
          if (!selectedId) {
            this.state.update({ selectedDestination: null });
            document.getElementById('price-display').style.display = 'none';
            return;
          }

          const vehicle = this.state.vehicles.find(v => v.id === this.state.selectedVehicle);
          if (!vehicle) return;

          const destination = vehicle.destinations.find(d => d.id == selectedId);
          if (destination) {
            this.state.update({ selectedDestination: destination });
            this.ui.updatePriceDisplay();
          }
        });

        // Confirm booking
        document.getElementById('confirm-booking')?.addEventListener('click', () => {
          this.confirmBooking();
        });

        // Modal close
        document.getElementById('close-modal')?.addEventListener('click', () => {
          document.getElementById('confirmation-modal').style.display = 'none';
        });

        // Image modal
        document.getElementById('image-modal').addEventListener('click', (e) => {
          if (e.target === e.currentTarget || e.target.classList.contains('modal-close')) {
            this.ui.closeImageModal();
          }
        });

        document.querySelector('.modal-nav.prev')?.addEventListener('click', () => {
          this.ui.showPreviousImage();
        });

        document.querySelector('.modal-nav.next')?.addEventListener('click', () => {
          this.ui.showNextImage();
        });

        // Auto-fill today's date
        const today = new Date().toISOString().split('T')[0];
        document.getElementById('date').value = today;
        document.getElementById('date').min = today;

        // Auto-fill current time + 1 hour
        const now = new Date();
        now.setHours(now.getHours() + 1);
        const timeString = now.toTimeString().slice(0,5);
        document.getElementById('time').value = timeString;
      }

      refreshVehicleDestinationPrices() {
        const refreshBtn = document.getElementById('refresh-vehicles');
        refreshBtn.classList.add('loading');

        this.loadVehicleDestinationPricesFromAPI().finally(() => {
          refreshBtn.classList.remove('loading');
        });
      }

      startAutoRefresh() {
        this.refreshInterval = setInterval(() => {
          this.loadVehicleDestinationPricesFromAPI();
        }, CONFIG.refreshInterval);
      }

      stopAutoRefresh() {
        if (this.refreshInterval) {
          clearInterval(this.refreshInterval);
          this.refreshInterval = null;
        }
      }

      confirmBooking() {
        // Get contact details
        const name = document.getElementById('name').value;
        const phone = document.getElementById('phone').value;
        const notes = document.getElementById('notes').value;

        if (!name || !phone) {
          this.ui.showToast('Please provide your contact details', 'error');
          return;
        }

        // Validate phone
        const phoneRegex = /^\+?254[0-9]{9}$/;
        if (!phoneRegex.test(phone)) {
          this.ui.showToast('Please enter a valid Kenyan number (+254XXXXXXXXX)', 'error');
          return;
        }

        if (!this.state.selectedDestination) {
          this.ui.showToast('Please select a destination', 'error');
          return;
        }

        this.state.update({
          contactDetails: { name, phone, notes }
        });

        // Send via WhatsApp
        this.sendWhatsAppBooking();
      }

      sendWhatsAppBooking() {
        const { selectedVehicle, selectedDestination, tripType, tripDetails, contactDetails } = this.state;
        const vehicle = this.state.vehicles.find(v => v.id === selectedVehicle);

        if (!vehicle || !tripDetails || !contactDetails || !selectedDestination) {
          this.ui.showToast('Please complete all booking details', 'error');
          return;
        }

        const priceUSD = tripType === 'one_way'
          ? selectedDestination.priceOneWayUSD
          : selectedDestination.priceReturnUSD;

        const priceKSH = tripType === 'one_way'
          ? selectedDestination.priceOneWayKSH
          : selectedDestination.priceReturnKSH;

        const message = `*NEW 24/7 TRANSFER BOOKING*%0A%0A` +
          `*Vehicle:* ${vehicle.name} ${vehicle.model} (${vehicle.capacity} seats)%0A` +
          `*Destination:* ${selectedDestination.name} (${selectedDestination.type})%0A` +
          `*Trip Type:* ${tripType === 'one_way' ? 'One Way' : 'Return Trip'}%0A` +
          `*Price:* ${CurrencyConverter.formatUSD(priceUSD)} / ${CurrencyConverter.formatKSH(priceKSH)}%0A` +
          `*Passengers:* ${tripDetails.passengers}%0A` +
          `*Pickup:* ${tripDetails.pickup}%0A` +
          `*Drop-off:* ${tripDetails.destination}%0A` +
          `*Date & Time:* ${tripDetails.date} at ${tripDetails.time}%0A` +
          `*Name:* ${contactDetails.name}%0A` +
          `*Phone:* ${contactDetails.phone}%0A` +
          `*Notes:* ${contactDetails.notes || 'None'}%0A%0A` +
          `*Booking Reference:* TRANS-${Date.now().toString().slice(-6)}`;

        const whatsappUrl = `https://wa.me/${CONFIG.whatsappNumber}?text=${message}`;

        // Open in new tab
        window.open(whatsappUrl, '_blank', 'noopener noreferrer');

        // Show confirmation modal
        document.getElementById('confirmation-modal').style.display = 'flex';

        // Clear state after successful booking
        setTimeout(() => {
          this.state.clear();
          this.ui.goToStep(1);
          document.getElementById('trip-form')?.reset();
          document.getElementById('contact-form')?.reset();
          document.getElementById('destination').innerHTML = '<option value="">Select destination</option>';
          document.getElementById('price-display').style.display = 'none';
        }, 5000);
      }
    }

    // UI Handler
    class UIHandler {
      constructor(app) {
        this.app = app;
      }
  initHero(vehicles) {
    const hero = document.getElementById('dynamic-hero');
    const oneway = document.getElementById('hero-oneway-prices');
    const ret = document.getElementById('hero-return-prices');
    const nameEl = document.getElementById('hero-vehicle-name');

    if (!hero || !oneway || !ret || !nameEl || !vehicles.length) return;

    let index = 0;

    const render = () => {
      const v = vehicles[index];
      if (!v || !v.destinations?.length) return;

      hero.style.backgroundImage =
        `url(${v.images?.[0] || this.app.getVehicleImage(v.type)})`;

      nameEl.textContent = `${v.name} ${v.model}`;

      oneway.innerHTML = '';
      ret.innerHTML = '';

      v.destinations.slice(0, 5).forEach(d => {
        oneway.innerHTML += `
          <li><span>${d.name}</span><span>$${d.priceOneWayUSD}</span></li>
        `;
        ret.innerHTML += `
          <li><span>${d.name}</span><span>$${d.priceReturnUSD}</span></li>
        `;
      });
    };

    render();

    setInterval(() => {
      index = (index + 1) % vehicles.length;
      render();
    }, 20000);
  }

      init() {
        // Initialize any UI components
      }

      renderVehicles(vehicles) {
        const container = document.getElementById('vehicle-track');
        if (!container) return;

        // Clear loading skeletons
        container.innerHTML = '';

        vehicles.forEach(vehicle => {
          const card = this.createVehicleCard(vehicle);
          container.appendChild(card);
        });
        initVehicleCarousel();
      }

      createVehicleCard(vehicle) {
        const card = document.createElement('div');
        card.className = 'vehicle-card';
        card.dataset.vehicleId = vehicle.id;

        const isSelected = this.app.state.selectedVehicle === vehicle.id;
        if (isSelected) {
          card.classList.add('selected');
        }

        if (vehicle.isFeatured) {
          card.classList.add('featured');
        }

        card.innerHTML = `
          <div class="vehicle-image-container">
            <img src="${vehicle.images[0] || this.app.getVehicleImage(vehicle.type)}"
                 alt="${vehicle.name} ${vehicle.model}"
                 class="vehicle-image"
                 loading="lazy">
            ${vehicle.isFeatured ? '<div class="vehicle-badge">Featured</div>' : ''}
            <button class="view-image-btn">
              <i class="fas fa-search-plus"></i> View Image
            </button>
          </div>
          <div class="vehicle-info">
            <h4 class="vehicle-name">${vehicle.name} ${vehicle.model}</h4>
            <div class="vehicle-details">
              <div>
                <div class="vehicle-capacity">${vehicle.type} ‚Ä¢ ${vehicle.capacity} seats</div>
                <div class="vehicle-price">${vehicle.priceLabel}</div>
                <small style="color: var(--text-light); font-size: 0.85rem;">Price varies by destination</small>
              </div>
              <button class="select-vehicle-btn ${isSelected ? 'selected' : ''}">
                ${isSelected ? '‚úì Selected' : 'Select'}
              </button>
            </div>
            <div class="vehicle-features">
              ${vehicle.features.slice(0, 3).map(feature => `
                <span class="feature-tag">${feature}</span>
              `).join('')}
              ${vehicle.features.length > 3 ? `<span class="feature-tag">+${vehicle.features.length - 3} more</span>` : ''}
            </div>
            <div style="margin-top: 0.5rem; font-size: 0.9rem; color: var(--text-light);">
              <i class="fas fa-map-marker-alt"></i> ${vehicle.destinations?.length || 0} destinations available
            </div>
          </div>
        `;

        // Add click handlers
        card.addEventListener('click', (e) => {
          if (!e.target.closest('.select-vehicle-btn') && !e.target.closest('.view-image-btn')) {
            this.selectVehicle(vehicle.id);
          }
        });

        card.querySelector('.select-vehicle-btn').addEventListener('click', (e) => {
          e.stopPropagation();
          this.selectVehicle(vehicle.id);
        });

        card.querySelector('.view-image-btn').addEventListener('click', (e) => {
          e.stopPropagation();
          this.showVehicleImage(vehicle);
        });

        return card;
      }

      selectVehicle(vehicleId) {
        this.app.state.update({ selectedVehicle: vehicleId });

        // Update UI
        document.querySelectorAll('.vehicle-card').forEach(card => {
          card.classList.remove('selected');
          const button = card.querySelector('.select-vehicle-btn');
          if (button) {
            button.textContent = 'Select';
            button.classList.remove('selected');
          }
        });

        const selectedCard = document.querySelector(`[data-vehicle-id="${vehicleId}"]`);
        if (selectedCard) {
          selectedCard.classList.add('selected');
          const button = selectedCard.querySelector('.select-vehicle-btn');
          if (button) {
            button.textContent = '‚úì Selected';
            button.classList.add('selected');
          }
        }

        // Update selected vehicle preview
        const vehicle = this.app.state.vehicles.find(v => v.id === vehicleId);
        if (vehicle) {
          document.getElementById('selected-vehicle-preview').style.display = 'block';
          document.getElementById('selected-vehicle-name').textContent =
            `${vehicle.name} ${vehicle.model} - ${vehicle.capacity} seats`;

          // Populate destinations dropdown
          this.populateDestinations(vehicle);
        }

        // Enable next button
        document.getElementById('next-step-1').disabled = false;
      }

      populateDestinations(vehicle) {
        const destinationSelect = document.getElementById('destination');
        destinationSelect.innerHTML = '<option value="">Select destination</option>';

        if (!vehicle || !vehicle.destinations || vehicle.destinations.length === 0) {
          this.app.state.update({ selectedDestination: null });
          document.getElementById('price-display').style.display = 'none';
          return;
        }

        // Sort destinations by name
        const sortedDestinations = [...vehicle.destinations].sort((a, b) =>
          a.name.localeCompare(b.name)
        );

        sortedDestinations.forEach(dest => {
          const option = document.createElement('option');
          option.value = dest.id;
          option.textContent = `${dest.name} (${dest.type})`;
          destinationSelect.appendChild(option);
        });

        // Reset price display
        this.app.state.update({ selectedDestination: null });
        document.getElementById('price-display').style.display = 'none';
      }

      updatePriceDisplay() {
        const { selectedDestination, tripType } = this.app.state;
        const priceDisplay = document.getElementById('price-display');

        if (!selectedDestination) {
          priceDisplay.style.display = 'none';
          return;
        }

        const priceUSD = tripType === 'one_way'
          ? selectedDestination.priceOneWayUSD
          : selectedDestination.priceReturnUSD;

        const priceKSH = tripType === 'one_way'
          ? selectedDestination.priceOneWayKSH
          : selectedDestination.priceReturnKSH;

        document.getElementById('selected-destination-name').textContent = selectedDestination.name;
        document.getElementById('trip-type-display').textContent = tripType === 'one_way' ? 'One Way Trip' : 'Return Trip';
        document.getElementById('final-price').textContent = CurrencyConverter.formatUSD(priceUSD);
        document.getElementById('price-in-ksh').textContent = CurrencyConverter.formatKSH(priceKSH);

        priceDisplay.style.display = 'block';
      }

      showVehicleImage(vehicle) {
        const modal = document.getElementById('image-modal');
        const modalImage = document.getElementById('modal-image');

        modalImage.src = vehicle.images[0] || this.app.getVehicleImage(vehicle.type);
        modal.classList.add('active');

        // Store current vehicle index for navigation
        const vehicleIndex = this.app.state.vehicles.findIndex(v => v.id === vehicle.id);
        this.app.state.update({ currentModalIndex: vehicleIndex });

        // Update navigation buttons visibility
        const prevBtn = document.querySelector('.modal-nav.prev');
        const nextBtn = document.querySelector('.modal-nav.next');

        if (prevBtn && nextBtn) {
          prevBtn.style.display = this.app.state.vehicles.length > 1 ? 'flex' : 'none';
          nextBtn.style.display = this.app.state.vehicles.length > 1 ? 'flex' : 'none';
        }
      }

      showPreviousImage() {
        const vehicles = this.app.state.vehicles;
        if (vehicles.length === 0) return;

        let newIndex = this.app.state.currentModalIndex - 1;
        if (newIndex < 0) {
          newIndex = vehicles.length - 1;
        }

        const vehicle = vehicles[newIndex];
        if (vehicle) {
          document.getElementById('modal-image').src = vehicle.images[0] || this.app.getVehicleImage(vehicle.type);
          this.app.state.update({ currentModalIndex: newIndex });
        }
      }

      showNextImage() {
        const vehicles = this.app.state.vehicles;
        if (vehicles.length === 0) return;

        let newIndex = this.app.state.currentModalIndex + 1;
        if (newIndex >= vehicles.length) {
          newIndex = 0;
        }

        const vehicle = vehicles[newIndex];
        if (vehicle) {
          document.getElementById('modal-image').src = vehicle.images[0] || this.app.getVehicleImage(vehicle.type);
          this.app.state.update({ currentModalIndex: newIndex });
        }
      }

      closeImageModal() {
        document.getElementById('image-modal').classList.remove('active');
      }

      goToStep(step) {
        this.app.state.update({ currentStep: step });

        // Hide all steps
        document.querySelectorAll('.step-content').forEach(el => {
          el.style.display = 'none';
        });

        // Show current step
        document.getElementById(`step-${step}`).style.display = 'block';

        // Update step indicators
        document.querySelectorAll('.step').forEach(el => {
          el.classList.remove('active', 'completed');
        });

        document.querySelector(`[data-step="${step}"]`).classList.add('active');

        // Update steps before current to completed
        for (let i = 1; i < step; i++) {
          const stepEl = document.querySelector(`[data-step="${i}"]`);
          if (stepEl) {
            stepEl.classList.add('completed');
          }
        }
      }

      updateFromState() {
        if (this.app.state.selectedVehicle) {
          this.selectVehicle(this.app.state.selectedVehicle);
        }

        if (this.app.state.currentStep) {
          this.goToStep(this.app.state.currentStep);
        }

        // Restore form values
        const { tripDetails, contactDetails, tripType } = this.app.state;

        if (tripDetails) {
          document.getElementById('pickup').value = tripDetails.pickup || '';
          document.getElementById('date').value = tripDetails.date || '';
          document.getElementById('time').value = tripDetails.time || '';
          document.getElementById('passengers').value = tripDetails.passengers || '1';
        }

        if (contactDetails) {
          document.getElementById('name').value = contactDetails.name || '';
          document.getElementById('phone').value = contactDetails.phone || '';
          document.getElementById('notes').value = contactDetails.notes || '';
        }

        // Restore trip type
        if (tripType) {
          document.querySelector(`input[name="tripType"][value="${tripType}"]`).checked = true;
        }
      }

      updateBookingSummary() {
        const { selectedVehicle, selectedDestination, tripType, tripDetails, contactDetails } = this.app.state;
        const vehicle = this.app.state.vehicles.find(v => v.id === selectedVehicle);
        const summary = document.getElementById('booking-summary');

        if (!summary || !vehicle || !tripDetails || !selectedDestination) return;

        const priceUSD = tripType === 'one_way'
          ? selectedDestination.priceOneWayUSD
          : selectedDestination.priceReturnUSD;

        const priceKSH = tripType === 'one_way'
          ? selectedDestination.priceOneWayKSH
          : selectedDestination.priceReturnKSH;

        summary.innerHTML = `
          <div><strong>Vehicle:</strong> ${vehicle.name} ${vehicle.model} (${vehicle.capacity} seats)</div>
          <div><strong>Destination:</strong> ${selectedDestination.name} (${selectedDestination.type})</div>
          <div><strong>Trip Type:</strong> ${tripType === 'one_way' ? 'One Way' : 'Return Trip'}</div>
          <div><strong>Pickup:</strong> ${tripDetails.pickup}</div>
          <div><strong>Drop-off:</strong> ${tripDetails.destination}</div>
          <div><strong>Date & Time:</strong> ${tripDetails.date} at ${tripDetails.time}</div>
          <div><strong>Passengers:</strong> ${tripDetails.passengers}</div>
          <div><strong>Price:</strong> ${CurrencyConverter.formatUSD(priceUSD)} / ${CurrencyConverter.formatKSH(priceKSH)}</div>
          ${contactDetails.name ? `<div><strong>Contact:</strong> ${contactDetails.name}</div>` : ''}
        `;
      }

      showToast(message, type = 'info') {
        const toast = document.getElementById('toast');
        toast.textContent = message;
        toast.style.background = type === 'error' ? '#dc3545' : 'var(--primary)';
        toast.style.color = type === 'error' ? 'white' : 'var(--light)';
        toast.classList.add('show');

        setTimeout(() => {
          toast.classList.remove('show');
        }, 3000);
      }

      showLoading() {
        const refreshBtn = document.getElementById('refresh-vehicles');
        refreshBtn.classList.add('loading');
      }

      hideLoading() {
        const refreshBtn = document.getElementById('refresh-vehicles');
        refreshBtn.classList.remove('loading');
      }
    }

    // API Handler (simplified)
    class APIHandler {
      constructor(app) {
        this.app = app;
      }
    }
// ================================
// VEHICLE CAROUSEL LOGIC
// ================================
let currentPage = 0;
const cardsPerPage = 4;

function initVehicleCarousel() {
  const track = document.getElementById('vehicle-track');
  const prevBtn = document.querySelector('.carousel-nav.prev');
  const nextBtn = document.querySelector('.carousel-nav.next');

  if (!track || !prevBtn || !nextBtn) return;

  function updateCarousel() {
    const card = track.querySelector('.vehicle-card');
    if (!card) return;

    const cardWidth = card.offsetWidth + 16;
    track.style.transform =
      `translateX(-${currentPage * cardWidth * cardsPerPage}px)`;
  }

  nextBtn.onclick = () => {
    const totalCards = track.children.length;
    const maxPage = Math.ceil(totalCards / cardsPerPage) - 1;

    if (currentPage < maxPage) {
      currentPage++;
      updateCarousel();
    }
  };

  prevBtn.onclick = () => {
    if (currentPage > 0) {
      currentPage--;
      updateCarousel();
    }
  };

  window.addEventListener('resize', updateCarousel);
  updateCarousel();
}


/* -----------------------------------------
   RENDER SINGLE VEHICLE
----------------------------------------- */
function renderHeroVehicle(index) {
  const vehicle = heroVehicles[index];
  if (!vehicle) return;

  /* Background image */
  heroSection.style.backgroundImage =
    `url(${vehicle.image_url})`;

  /* Vehicle name */
  if (vehicleNameEl) {
    vehicleNameEl.textContent = vehicle.name;
  }

  /* Clear lists */
  oneWayList.innerHTML = '';
  returnList.innerHTML = '';

  /* Populate destinations (limit to 5 for hero UX) */
  vehicle.destinations.slice(0, 5).forEach(dest => {

    const oneWayItem = document.createElement('li');
    oneWayItem.innerHTML = `
      <span class="destination">${dest.name}</span>
      <span class="price">$${dest.one_way}</span>
    `;

    const returnItem = document.createElement('li');
    returnItem.innerHTML = `
      <span class="destination">${dest.name}</span>
      <span class="price">$${dest.return}</span>
    `;

    oneWayList.appendChild(oneWayItem);
    returnList.appendChild(returnItem);
  });
}

/* -----------------------------------------
   ROTATION LOGIC
----------------------------------------- */
function startHeroRotation() {
  setInterval(() => {
    currentHeroIndex =
      (currentHeroIndex + 1) % heroVehicles.length;

    renderHeroVehicle(currentHeroIndex);
  }, HERO_ROTATION_INTERVAL);
}

/* -----------------------------------------
   INIT
----------------------------------------- */
    // Initialize app when DOM is ready
    document.addEventListener('DOMContentLoaded', () => {
      // Start app with requestIdleCallback for better performance
      if ('requestIdleCallback' in window) {
        requestIdleCallback(() => {
          window.app = new AirportTransfersApp();
        });
      } else {
        // Fallback for older browsers
        setTimeout(() => {
          window.app = new AirportTransfersApp();
        }, 100);
      }
    });
const toggleBtn = document.getElementById('darkModeToggle'); toggleBtn.addEventListener('click', () => { document.body.classList.toggle('dark-mode'); toggleBtn.textContent = document.body.classList.contains('dark-mode') ? '‚òÄÔ∏è Light Mode' : 'üåô Dark Mode'; });
    // Set current year
    document.getElementById('current-year').textContent = new Date().getFullYear();
  </script>
</body>
</html>