{% extends 'base.html' %}
{% block content %}
<div class="flex items-center justify-center min-h-screen bg-white text-center px-4">
  <div>
    <h2 class="text-xl font-semibold text-gray-800 mb-2">Finalizing Your Booking</h2>
    <p class="text-gray-600">Opening WhatsApp and redirecting you to ride details...</p>
  </div>
</div>

<script>
  document.addEventListener("DOMContentLoaded", function () {
    const whatsappUrl = "{{ whatsapp_url|safe }}";
    const rideId = "{{ ride_id }}";

    // Open WhatsApp in a new tab
    if (whatsappUrl && whatsappUrl.startsWith('https://')) {
      window.open(whatsappUrl, '_blank');
    }

    // Redirect to ride details
    setTimeout(() => {
      window.location.href = `/ride/${rideId}/`;
    }, 1500);
  });
</script>
{% endblock %}
autoescape